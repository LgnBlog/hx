(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-480837b2"],{"1ac5":function(t,e,a){"use strict";var l=a("5a8e"),i=a.n(l);i.a},2909:function(t,e,a){"use strict";function l(t,e){(null==e||e>t.length)&&(e=t.length);for(var a=0,l=new Array(e);a<e;a++)l[a]=t[a];return l}function i(t){if(Array.isArray(t))return l(t)}function s(t){if("undefined"!==typeof Symbol&&Symbol.iterator in Object(t))return Array.from(t)}function o(t,e){if(t){if("string"===typeof t)return l(t,e);var a=Object.prototype.toString.call(t).slice(8,-1);return"Object"===a&&t.constructor&&(a=t.constructor.name),"Map"===a||"Set"===a?Array.from(t):"Arguments"===a||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(a)?l(t,e):void 0}}function c(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}function r(t){return i(t)||s(t)||o(t)||c()}a.d(e,"a",(function(){return r}))},"5a8e":function(t,e,a){},"6ffa":function(t,e,a){"use strict";a.r(e);var l=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"servicePolicyProcess"},[a("div",{staticClass:"header"},[a("el-select",{staticClass:"select",attrs:{size:"small",clearable:"",placeholder:"请选择执行申请状态"},model:{value:t.queryForm.status,callback:function(e){t.$set(t.queryForm,"status",e)},expression:"queryForm.status"}},t._l(t.statusOptions,(function(t){return a("el-option",{key:t.value,attrs:{label:t.label,value:t.value}})})),1),a("el-input",{staticClass:"input",attrs:{size:"small",placeholder:"请输入营销活动内容关键词"},model:{value:t.queryForm.activityKeyword,callback:function(e){t.$set(t.queryForm,"activityKeyword","string"===typeof e?e.trim():e)},expression:"queryForm.activityKeyword"}}),a("el-button",{attrs:{size:"small",type:"primary"},on:{click:t.getTableData}},[t._v("查询")])],1),a("div",{staticClass:"content"},[a("el-table",{staticClass:"content-table",attrs:{border:"",data:t.tableData,height:500,"row-class-name":t.tableRowClassName}},[a("el-table-column",{attrs:{label:"序号",align:"center",type:"index",width:"70"}}),a("el-table-column",{attrs:{prop:"activityName",label:"现场营销活动名称"}}),a("el-table-column",{attrs:{prop:"hdyxq",label:"营销活动有效期"}}),a("el-table-column",{attrs:{align:"center",label:"推荐客户清单查看"},scopedSlots:t._u([{key:"default",fn:function(e){return[a("span",{staticClass:"text",attrs:{type:"text"},on:{click:function(a){return t.clickCheck(e.row)}}},[t._v("点击查看")])]}}])}),a("el-table-column",{attrs:{prop:"executePlacePlan",label:"计划执行地点"}}),a("el-table-column",{attrs:{prop:"executeTimePlan",label:"计划执行时间"}}),a("el-table-column",{attrs:{prop:"statusName",label:"执行申请状态"}}),a("el-table-column",{attrs:{align:"center",width:"200",label:"操作"},scopedSlots:t._u([{key:"default",fn:function(e){return["0"===e.row.status?a("span",{staticClass:"text",attrs:{type:"text"},on:{click:function(a){return t.clickSet(e.row)}}},[t._v("配置任务")]):t._e(),"1"===e.row.status?a("span",{staticClass:"text",attrs:{type:"text"},on:{click:function(a){return t.clickSubmit(e.row)}}},[t._v("提交申请")]):t._e()]}}])})],1),a("div",{staticClass:"content-page"},[a("el-pagination",{attrs:{"current-page":this.queryForm.current,"page-sizes":[10,20,30,40],"page-size":this.queryForm.size,layout:"total, sizes, prev, pager, next, jumper",total:this.queryForm.total},on:{"size-change":t.handleSizeChange,"current-change":t.handleCurrentChange}})],1)],1),a("el-dialog",{staticClass:"check-dialog",attrs:{title:"推荐清单查看",visible:t.checkDialogVisible,width:"80%","before-close":t.checkDialogClose,"close-on-click-modal":!1,"close-on-press-escape":!1},on:{"update:visible":function(e){t.checkDialogVisible=e}}},[a("span",{staticClass:"dialog-header",attrs:{slot:"title"},slot:"title"},[a("span",{staticClass:"header-text"},[t._v(t._s("推荐清单查看"))])]),a("div",{staticClass:"query-group"},[a("div",{staticClass:"search"},[a("el-select",{staticClass:"select",attrs:{size:"small",clearable:"",placeholder:"请选择标签"},model:{value:t.checkDialogForm.tagId,callback:function(e){t.$set(t.checkDialogForm,"tagId",e)},expression:"checkDialogForm.tagId"}},t._l(t.labelOptions,(function(t){return a("el-option",{key:t.value,attrs:{label:t.label,value:t.value}})})),1),a("el-input",{staticClass:"input",attrs:{size:"small",placeholder:"请输入用户编号"},model:{value:t.checkDialogForm.yhbh,callback:function(e){t.$set(t.checkDialogForm,"yhbh","string"===typeof e?e.trim():e)},expression:"checkDialogForm.yhbh"}}),a("el-button",{attrs:{size:"small",type:"primary"},on:{click:t.getCheckDialogData}},[t._v("查询")])],1)]),a("el-table",{directives:[{name:"loading",rawName:"v-loading",value:t.checkDialogDataLoading,expression:"checkDialogDataLoading"}],staticClass:"dialog-table",attrs:{border:"",data:t.checkDialogData,height:400,"row-class-name":t.tableRowClassName}},[a("el-table-column",{attrs:{prop:"yhbh",label:"用户编号"}}),a("el-table-column",{attrs:{prop:"yhmc",label:"用电客户名称"}}),a("el-table-column",{attrs:{prop:"yddz",label:"用户地址"}})],1),a("div",{staticClass:"dialog-pagination"},[a("el-pagination",{attrs:{"current-page":this.checkDialogForm.current,"page-sizes":[10,20,30,40],"page-size":this.checkDialogForm.size,layout:"total, sizes, prev, pager, next, jumper",total:this.checkDialogForm.total},on:{"size-change":t.checkDialogSizeChange,"current-change":t.checkDialogCurrentChange}})],1),a("span",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[a("el-button",{attrs:{size:"small"},on:{click:t.checkDialogClose}},[t._v("关闭")])],1)],1),a("el-dialog",{staticClass:"set-dialog",attrs:{title:"营销活动任务配置",visible:t.setDialogVisible,width:"40%","before-close":t.setDialogClose,"close-on-click-modal":!1,"close-on-press-escape":!1},on:{"update:visible":function(e){t.setDialogVisible=e}}},[a("span",{staticClass:"dialog-header",attrs:{slot:"title"},slot:"title"},[a("span",{staticClass:"header-text"},[t._v(t._s("营销活动任务配置"))])]),a("el-form",{staticClass:"setDialog-form",attrs:{model:t.setDialogForm,"label-width":"150px"}},[a("el-form-item",{attrs:{label:"活动计划执行地点"}},[a("el-input",{staticClass:"input",attrs:{size:"small",placeholder:"请输入活动计划执行地点"},model:{value:t.setDialogForm.executePlacePlan,callback:function(e){t.$set(t.setDialogForm,"executePlacePlan",e)},expression:"setDialogForm.executePlacePlan"}})],1),a("el-form-item",{attrs:{label:"活动计划执行时间"}},[a("el-date-picker",{staticClass:"input",attrs:{size:"small",type:"date","value-format":"yyyy-MM-dd",placeholder:"请选择时间"},model:{value:t.setDialogForm.executeTimePlan,callback:function(e){t.$set(t.setDialogForm,"executeTimePlan",e)},expression:"setDialogForm.executeTimePlan"}})],1)],1),a("span",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[a("el-button",{attrs:{type:"primary",size:"small"},on:{click:t.setDialogConfirm}},[t._v("确定")]),a("el-button",{attrs:{size:"small"},on:{click:t.setDialogClose}},[t._v("关闭")])],1)],1)],1)},i=[],s=(a("8e6e"),a("ac6a"),a("456d"),a("2909")),o=a("ade3"),c=a("db49"),r=a("6ed3");function n(t,e){var a=Object.keys(t);if(Object.getOwnPropertySymbols){var l=Object.getOwnPropertySymbols(t);e&&(l=l.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),a.push.apply(a,l)}return a}function u(t){for(var e=1;e<arguments.length;e++){var a=null!=arguments[e]?arguments[e]:{};e%2?n(Object(a),!0).forEach((function(e){Object(o["a"])(t,e,a[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(a)):n(Object(a)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(a,e))}))}return t}var h={name:"servicePolicyProcess",components:{},mixins:[r["a"]],props:{},data:function(){return{queryForm:{status:"",activityKeyword:"",current:1,size:10,total:0},statusOptions:[{value:"0",label:"待配置"},{value:"1",label:"待申请"},{value:"2",label:"审批中"},{value:"3",label:"执行中"},{value:"4",label:"已关闭"}],tableData:[],listId:"",activityId:"",checkDialogDataLoading:!1,checkDialogVisible:!1,checkDialogData:[],checkDialogForm:{tagId:"",yhbh:"",current:1,size:10,total:0},labelOptions:[],setDialogVisible:!1,setDialogData:[],setDialogForm:{executePlacePlan:"",executeTimePlan:""}}},mounted:function(){this.getTableData()},methods:{tableRowClassName:function(t){t.row;var e=t.rowIndex;return e%2===0?"success-row":""},handleSizeChange:function(t){this.queryForm.size=t,this.getTableData()},handleCurrentChange:function(t){this.queryForm.current=t,this.getTableData()},clickCheck:function(t){this.listId=t.id,this.activityId=t.activityId,this.checkDialogForm.current=1,this.checkDialogForm.size=10,this.getLabelOptions(),this.getCheckDialogData(),this.checkDialogVisible=!0},checkDialogClose:function(){this.checkDialogVisible=!1},checkDialogSizeChange:function(t){this.checkDialogForm.size=t,this.getCheckDialogData()},checkDialogCurrentChange:function(t){this.checkDialogForm.current=t,this.getCheckDialogData()},clickSet:function(t){this.listId=t.id,this.setDialogVisible=!0},clickSubmit:function(t){var e=this;this.listId=t.id,this.commitApply({id:this.listId}).then((function(t){e.$message.success(t),e.getTableData()})).catch((function(){}))},setDialogConfirm:function(){var t=this;this.disposeActivityConfig(u(u({},this.setDialogForm),{},{id:this.listId})).then((function(e){t.$message.success(e),t.setDialogVisible=!1,t.getTableData()})).catch((function(){}))},setDialogClose:function(){this.setDialogVisible=!1},getTableData:function(){var t=this;this.getActivityConfig(this.queryForm).then((function(e){t.tableData=Object(s["a"])(e.records),t.queryForm.total=e.total}))},getCheckDialogData:function(){var t=this;this.checkDialogDataLoading=!0,this.getRecommendCustomer(u(u({},this.checkDialogForm),{},{activityId:this.activityId})).then((function(e){t.checkDialogData=Object(s["a"])(e.records),t.checkDialogForm.total=e.total})).finally((function(){t.checkDialogDataLoading=!1}))},getLabelOptions:function(){var t=this;this.getLabel({tagobjId:c["i"]}).then((function(e){0!==e.length&&(t.labelOptions=e.map((function(t){return{value:t.bqId,label:t.bqName}})))}))}}},g=h,b=(a("1ac5"),a("2877")),m=Object(b["a"])(g,l,i,!1,null,"b6291642",null);e["default"]=m.exports}}]);
//# sourceMappingURL=chunk-480837b2.f5079da3.js.map