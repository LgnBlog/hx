(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-474b2d11"],{"1f84":function(e,t,a){},dc4b:function(e,t,a){"use strict";var r=a("1f84"),o=a.n(r);o.a},e2b1:function(e,t,a){"use strict";a.r(t);var r=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"approvalTask"},[a("div",{staticClass:"content"},[a("bdaTable",{staticClass:"content-table",attrs:{tableData:e.taskData,headerColor:e.taskHeaderColor,isPage:!0,pageConfig:e.pageConfig},on:{operate:e.taskOperate,changePage:e.changePage}})],1),e.resultDialogVisible?a("operateDialog",{attrs:{visible:e.resultDialogVisible,showData:e.resultDialogData,type:e.resultDialogType},on:{"update:visible":function(t){e.resultDialogVisible=t}}}):e._e()],1)},o=[],i=(a("8e6e"),a("ac6a"),a("456d"),a("2909")),s=a("ade3"),n=a("c286"),l=a("f9fe"),p=a("3479");function u(e,t){var a=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),a.push.apply(a,r)}return a}function c(e){for(var t=1;t<arguments.length;t++){var a=null!=arguments[t]?arguments[t]:{};t%2?u(Object(a),!0).forEach((function(t){Object(s["a"])(e,t,a[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(a)):u(Object(a)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(a,t))}))}return e}var g={components:{bdaTable:l["a"],operateDialog:p["default"]},name:"approvalTask",mixins:[n["a"]],watch:{filterText:function(e){this.$refs.tree.filter(e)}},props:{menuType:{type:String,default:""}},data:function(){return{taskData:{},taskRes:!1,taskHeaderColor:"",queryForm:{relationNumber:"",current:1,size:10,total:0},pageConfig:{current:1,size:10,pageSizes:[10,20,30,40],layout:"prev, pager, next, sizes,jumper,total",total:0},resultDialogVisible:!1,resultDialogType:"",resultDialogData:{}}},mounted:function(){this.getTaskData()},methods:{taskOperate:function(e,t){console.log(e,t),this.queryForm.relationNumber=t.relationNumber,"approval"===e?this.getTaskDetailData(t):("approvalPass"===e&&this.approvalResult("1"),"approvalFail"===e&&this.approvalResult("2"),this.resultDialogVisible=!1)},approvalResult:function(e){var t=this;this.approvalThrough({relationNumber:this.queryForm.relationNumber,approvalState:e}).then((function(e){t.getTaskData()}))},taskDialogClose:function(){this.taskDialogVisible=!1},submitApproval:function(){this.taskDialogVisible=!1},changePage:function(e){this.queryForm.size=e.size,this.queryForm.current=e.current,this.getTaskData()},getTaskData:function(){var e=this;this.taskHeaderColor="#1899fa";var t=[{prop:"relationName",label:"关联关系名称"},{prop:"descibe",label:"关联关系描述"},{prop:"Operate",label:"任务结果",align:"center",width:"120px",type:[{name:"任务详细信息",action:"approval"}]},{prop:"exeTime",label:"执行完成时间"},{prop:"Operate",label:"操作",align:"center",width:"200px",type:[{name:"审批通过",action:"approvalPass"},{name:"审批不通过",action:"approvalFail"}]}];this.approvalExecutionList(c(c({},this.queryForm),{},{menuType:this.menuType})).then((function(a){e.pageConfig.total=a.total,e.pageConfig.size=e.queryForm.size,e.pageConfig.current=e.queryForm.current,e.taskData={tableData:Object(i["a"])(a.records),columnNameData:t},e.taskRes=!0})).catch((function(a){a&&(e.taskData={tableData:[],columnNameData:t})}))},getTaskDetailData:function(e){var t=this;console.log(e,"data"),this.selectTaskDetail({relationNumber:e.relationNumber,targetId:e.targetId,recId:e.recId,tagId:e.tagId}).then((function(e){t.resultDialogType="approval",t.resultDialogData=e,t.resultDialogVisible=!0}))}}},b=g,f=(a("dc4b"),a("2877")),h=Object(f["a"])(b,r,o,!1,null,"6994f682",null);t["default"]=h.exports}}]);
//# sourceMappingURL=chunk-474b2d11.5e05da3b.js.map