(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-6d69b858"],{"0a56":function(t,e,a){"use strict";var s=a("cfeb"),l=a.n(s);l.a},2909:function(t,e,a){"use strict";function s(t,e){(null==e||e>t.length)&&(e=t.length);for(var a=0,s=new Array(e);a<e;a++)s[a]=t[a];return s}function l(t){if(Array.isArray(t))return s(t)}function n(t){if("undefined"!==typeof Symbol&&Symbol.iterator in Object(t))return Array.from(t)}function r(t,e){if(t){if("string"===typeof t)return s(t,e);var a=Object.prototype.toString.call(t).slice(8,-1);return"Object"===a&&t.constructor&&(a=t.constructor.name),"Map"===a||"Set"===a?Array.from(t):"Arguments"===a||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(a)?s(t,e):void 0}}function o(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}function i(t){return l(t)||n(t)||r(t)||o()}a.d(e,"a",(function(){return i}))},"742f":function(t,e,a){"use strict";a.r(e);var s=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"manualManage"},[a("div",{staticClass:"header"},[a("div",{staticClass:"selectNav"},[a("el-select",{staticClass:"input_td",attrs:{size:"small",clearable:"",placeholder:"请选择地市局"},on:{change:t.dsjChange},model:{value:t.selectParams.dsjVal,callback:function(e){t.$set(t.selectParams,"dsjVal",e)},expression:"selectParams.dsjVal"}},t._l(t.selectParams.dsjOptions,(function(t){return a("el-option",{key:t.ORG_CODE,attrs:{label:t.ORG_NAME,value:t.ORG_CODE}})})),1),a("el-select",{staticClass:"input_td",attrs:{clearable:"",placeholder:"请选择县区局",size:"small"},on:{change:t.qxjChange},model:{value:t.selectParams.xqjVal,callback:function(e){t.$set(t.selectParams,"xqjVal",e)},expression:"selectParams.xqjVal"}},t._l(t.selectParams.xqjOptions,(function(t){return a("el-option",{key:t.ORG_CODE,attrs:{label:t.ORG_NAME,value:t.ORG_CODE}})})),1),a("el-select",{staticClass:"input_td",attrs:{size:"small",clearable:"",placeholder:"请选择供电所"},model:{value:t.selectParams.gdsVal,callback:function(e){t.$set(t.selectParams,"gdsVal",e)},expression:"selectParams.gdsVal"}},t._l(t.selectParams.gdsOptions,(function(t){return a("el-option",{key:t.ORG_CODE,attrs:{label:t.ORG_NAME,value:t.ORG_CODE}})})),1),a("el-input",{staticClass:"input_300",attrs:{placeholder:"请输入用户编号",size:"small",clearable:""},model:{value:t.yhCodeInput,callback:function(e){t.yhCodeInput=e},expression:"yhCodeInput"}}),a("el-button",{attrs:{type:"primary",size:"small",icon:"el-icon-search"},on:{click:t.GetTagUser}},[t._v("查询")]),a("el-upload",{staticClass:"upload",attrs:{action:"/portal/strategy/tmNpmisTdmgjhgjkhxxT/uploadFile","on-success":t.handleSuccess,multiple:"",limit:1,accept:".xls, .xlsx","before-upload":t.beforeUpload,"show-file-list":!1}},[a("el-button",{attrs:{size:"small",type:"primary"}},[t._v("上传文件")])],1),a("el-button",{attrs:{type:"primary",size:"small",icon:"el-icon-search"},on:{click:t.submitMark}},[t._v("标记提交")])],1)]),a("div",{staticClass:"content"},[a("div",{staticClass:"title"},[t._v("停电敏感客户明细列表")]),a("div",{staticClass:"tableTd"},[a("el-table",{directives:[{name:"loading",rawName:"v-loading",value:t.loading,expression:"loading"}],staticStyle:{width:"100%"},attrs:{border:"",data:t.tableData,"row-class-name":t.tableRowClassName}},[a("el-table-column",{attrs:{label:"序号",align:"center",type:"index",width:"70"}}),a("el-table-column",{attrs:{prop:"yhbh",label:"用户编号"}}),a("el-table-column",{attrs:{prop:"yhmc",label:"用户名称"}}),a("el-table-column",{attrs:{prop:"yddz",label:"用电地址"}}),a("el-table-column",{attrs:{prop:"dsj",label:"地市局"}}),a("el-table-column",{attrs:{prop:"xqj",label:"县区局"}}),a("el-table-column",{attrs:{prop:"gds",label:"供电所"}}),a("el-table-column",{attrs:{prop:"tdlxgdx",label:"停电类型工单数"}}),a("el-table-column",{attrs:{prop:"tdcs",label:"停电次数"}}),a("el-table-column",{attrs:{prop:"tdsjldxdb",label:"停电事件来电相对比"}}),a("el-table-column",{attrs:{prop:"updateTime",label:"数据计算时间"}}),a("el-table-column",{attrs:{align:"center",width:"200",label:"选择至停电敏感客户标签标记清单"},scopedSlots:t._u([{key:"default",fn:function(e){return[a("el-checkbox",{attrs:{disabled:e.row.bindTagStatus},on:{change:function(a){return t.bindTagBChange(e.row)}},model:{value:e.row.bindTagB,callback:function(a){t.$set(e.row,"bindTagB",a)},expression:"scope.row.bindTagB"}},[t._v("是否标记")])]}}])})],1),a("div",{staticClass:"block"},[a("el-pagination",{attrs:{"current-page":t.pages.pageNo,"page-sizes":[8,10,20,50],"page-size":t.pages.pageSize,layout:"total, sizes, prev, pager, next, jumper",total:t.pages.total},on:{"size-change":t.handleSizeChange,"current-change":t.handleCurrentChange}})],1)],1)])])},l=[],n=a("2909"),r=(a("ac6a"),a("7f7f"),a("80f2")),o=a("8d05"),i={name:"manualManage",mixins:[r["a"],o["a"]],components:{},props:{},data:function(){return{selectParams:{dsjOptions:[],dsjVal:"",xqjOptions:[],xqjVal:"",gdsOptions:[],gdsVal:""},yhCodeInput:"",pages:{pageNo:1,pageSize:10,total:11},tableData:[],tableDataSelect:[],loading:!1}},mounted:function(){this.GetPowerAreaCode(),this.GetTagUser(),this.tableDataSelect=[]},methods:{tableRowClassName:function(t){t.row;var e=t.rowIndex;return e%2===0?"success-row":""},handleSizeChange:function(t){this.pages.pageSize=t,this.GetTagUser(),window.console.log("每页 ".concat(t," 条"))},handleCurrentChange:function(t){this.pages.pageNo=t,this.GetTagUser(),window.console.log("当前页: ".concat(t))},beforeUpload:function(t,e){var a=t.name.substring(t.name.lastIndexOf(".")+1),s="xls"===a||"xlsx"===a;return s||this.$alert("上传文件只能是xls、xlsx格式!"),s},handleSuccess:function(t){console.log(t),"00000"===t.code&&(this.$message.success("上传成功"),this.pages.total=t.data.total,this.tableData=t.data.records,this.tableData.forEach((function(t){t.bindTagB="1"===t.bindTag,t.bindTagStatus="1"===t.bindTag})))},bindTagBChange:function(t){var e=Object(n["a"])(this.tableData);this.tableData=[],this.tableData=Object(n["a"])(e),0!==this.tableDataSelect.length?-1===this.tableDataSelect.indexOf(t.yhbh)?this.tableDataSelect.push(t.yhbh):this.tableDataSelect.splice(this.tableDataSelect.indexOf(t.yhbh),1):this.tableDataSelect.push(t.yhbh),console.log(this.tableData,"this.tableData"),console.log(this.tableDataSelect,"this.tableDataSelect")},submitMark:function(){var t=this,e=[];this.tableData.filter((function(t){return t.bindTagB})).forEach((function(t){e.push(t.yhbh)})),this.markTag({yhbhs:e}).then((function(e){e&&(t.$message.success("标记成功"),t.GetTagUser())}))},GetPowerAreaCode:function(){var t=this;this.getPowerAreaCode({orgLev:"2"}).then((function(e){t.selectParams.dsjOptions=e}))},GetQxjPowerAreaCode:function(){var t=this;this.getPowerAreaCode({orgLev:"3",orgCode:this.selectParams.dsjVal}).then((function(e){t.selectParams.xqjOptions=e}))},GetGdsPowerAreaCode:function(){var t=this;this.getPowerAreaCode({orgLev:"4",orgCode:this.selectParams.xqjVal}).then((function(e){t.selectParams.gdsOptions=e}))},dsjChange:function(){this.selectParams.gdsVal="",this.selectParams.gdsOptions=[],this.selectParams.xqjVal="",this.selectParams.xqjOptions=[],this.GetQxjPowerAreaCode()},qxjChange:function(){this.selectParams.gdjVal="",this.selectParams.gdsOptions=[],this.GetGdsPowerAreaCode()},GetTagUser:function(){var t=this;this.getTagUser({dsj:this.selectParams.dsjVal,xqj:this.selectParams.xqjVal,gds:this.selectParams.gdsVal,yhbh:this.yhCodeInput,size:this.pages.pageSize,current:this.pages.pageNo}).then((function(e){t.pages.total=e.total,t.tableData=e.records,t.tableData.forEach((function(t){t.bindTagB="1"===t.bindTag,t.bindTagStatus="1"===t.bindTag}))}))}}},c=i,u=(a("0a56"),a("2877")),d=Object(u["a"])(c,s,l,!1,null,"8d7477ba",null);e["default"]=d.exports},"80f2":function(t,e,a){"use strict";var s=a("db49"),l=a("ab3e"),n=s["c"]+"/residentialElectricity/getPowerAreaCode";function r(t){return Object(l["a"])({method:"post",headers:{"Content-Type":"application/json;charset=utf8"},data:t,url:n})}var o=s["b"]+"/tag/listTagTreeAndTagobj";function i(t){return Object(l["a"])({method:"get",headers:{"Content-Type":"application/json;charset=utf8"},data:t,url:o})}var c=s["c"]+"/cptYxhdYdkh/getXl";function u(t){return Object(l["a"])({method:"get",headers:{"Content-Type":"application/json;charset=utf8"},data:t,url:c})}e["a"]={data:function(){return{commonApi:{list:[],page:null,limit:null,total:0,model:null}}},methods:{getPowerAreaCode:function(t){return r(t).then((function(t){return t}))},getBdaTagList:function(t){return i(t).then((function(t){return t}))},getXl:function(t){return u(t).then((function(t){return t}))}}}},cfeb:function(t,e,a){}}]);
//# sourceMappingURL=chunk-6d69b858.1eba8def.js.map