(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-1cbad7f0"],{"03400":function(e,t,a){"use strict";a.d(t,"a",(function(){return l})),a.d(t,"b",(function(){return o}));var n=a("db49"),i=a("bc3a"),r=a.n(i);function l(e){window.location.href=n["c"]+e}function o(e,t){console.log(e,t),r()({method:"post",url:n["c"]+e,data:t,responseType:"blob"}).then((function(e){console.log(e,"res");var t=e.data,a=new Blob([t]),n="导出信息.xls";if("download"in document.createElement("a")){var i=document.createElement("a");i.download=n,i.style.display="none",i.href=URL.createObjectURL(a),document.body.appendChild(i),i.click(),URL.revokeObjectURL(i.href),document.body.removeChild(i)}else navigator.msSaveBlob(a,n)}))}},"380c":function(e,t,a){"use strict";a.r(t);var n=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"panoramicAnalysis"},[a("div",{staticClass:"top"},[a("div",{staticClass:"content-left content"},[a("div",{staticClass:"content-left-top"},[a("div",{staticClass:"text"},[e._v("潜在过户数")]),a("div",{staticClass:"value"},[e._v(e._s(e.potentialTransferNumber?e.potentialTransferNumber:0))])]),a("div",{staticClass:"content-left-bottom"},[a("div",{staticClass:"text"},[e._v("疑似租赁数")]),a("div",{staticClass:"value"},[e._v(e._s(e.suspectedLeaseNumber?e.suspectedLeaseNumber:0))])])]),a("div",{staticClass:"content-right content content-border"},[e._m(0),a("div",{staticClass:"chart-main content-table"},[a("themeLabelList",{ref:"themeLabelList",attrs:{labelData:e.labelData,pageConfig:e.labelPageConfig,showDetailData:e.labelDetailData},on:{changePage:e.changePage,clickDetail:e.getLabelDetailData,changeDetailPage:e.changePage,exportExcel:e.themeLabelExportExcel}})],1)])]),a("div",{staticClass:"center"},[a("div",{staticClass:"content content-border"},[a("div",{staticClass:"content-title"},[e._m(1),a("div",{staticClass:"content-title-right"},[a("el-select",{staticStyle:{height:"30px","margin-right":"20px"},attrs:{size:"mini",clearable:"",placeholder:"请选择供电局"},on:{change:e.getPotentialSuspectedData},model:{value:e.potentialSuspectedForm.municipalBureau,callback:function(t){e.$set(e.potentialSuspectedForm,"municipalBureau",t)},expression:"potentialSuspectedForm.municipalBureau"}},e._l(e.municipalBureauOptions,(function(e){return a("el-option",{key:e.value,attrs:{label:e.name,value:e.value}})})),1)],1)]),a("div",{staticClass:"chart-main"},[e.potentialSuspectedRes?a("barCharts",{attrs:{barChartsData:e.potentialSuspectedData,name:"潜在过户与疑似租赁分布",legendStatus:!0,legendPosition:"right",isMultiple:!0,isShadow:!0,barWidth:20,barType:"bar",maxShowNumber:9},on:{setOption:e.setOption}}):e._e()],1)]),a("div",{staticClass:"content content-border"},[a("div",{staticClass:"content-title"},[a("div",{staticClass:"content-title-left"},[a("span",{staticClass:"block"}),a("div",{staticClass:"change-type"},[a("span",{staticClass:"change-button",class:"1"===e.potentialMarkersActive?"active":"",on:{click:function(t){return e.changePotentialMarkers("1")}}},[e._v("潜在过户标记")]),a("span",{staticClass:"change-button",class:"2"===e.potentialMarkersActive?"active":"",on:{click:function(t){return e.changePotentialMarkers("2")}}},[e._v("疑似房屋租赁")])])]),a("div",{staticClass:"content-title-right"},[a("el-select",{staticStyle:{height:"30px","margin-right":"20px"},attrs:{size:"mini",clearable:"",placeholder:"请选择供电局"},on:{change:e.getListAndGraphData},model:{value:e.potentialMarkersQueryForm.municipalBureau,callback:function(t){e.$set(e.potentialMarkersQueryForm,"municipalBureau",t)},expression:"potentialMarkersQueryForm.municipalBureau"}},e._l(e.municipalBureauOptions,(function(e){return a("el-option",{key:e.value,attrs:{label:e.name,value:e.value}})})),1)],1)]),a("div",{staticClass:"chart-main content-table"},[a("bdaTable",{staticClass:"main-table",attrs:{tableData:e.potentialMarkersData,headerColor:e.headerColor,isPage:!0,pageConfig:e.potentialMarkersPageConfig},on:{changePage:e.changePage}})],1)])]),a("div",{staticClass:"bottom"},[a("div",{staticClass:"content content-border"},[e._m(2),a("div",{staticClass:"chart-main"},[e.dailySeatRes?a("barCharts",{attrs:{barChartsData:e.dailySeatData,legendStatus:!0,name:"用户提醒与预警",legendPosition:"right",isMultiple:!0,isShadow:!1,isLabel:!1,barWidth:40,barType:"stack",maxShowNumber:11},on:{setOption:e.setOption}}):e._e()],1)])])])},i=[function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"content-title"},[a("div",{staticClass:"content-title-left"},[a("span",{staticClass:"block"}),a("span",{staticClass:"text"},[e._v("主题标签")])])])},function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"content-title-left"},[a("span",{staticClass:"block"}),a("span",{staticStyle:{"min-width":"100px"}},[e._v("潜在过户与疑似租赁分布")])])},function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"content-title"},[a("div",{staticClass:"content-title-left"},[a("span",{staticClass:"block"}),a("span",[e._v("用户提醒与预警")])])])}],r=(a("8e6e"),a("456d"),a("ac6a"),a("2909")),l=a("ade3"),o=(a("7f7f"),a("db49")),s=a("ab3e"),c=o["c"]+"/leanSeatingSkillController/themeLabelDisplay";function u(e){return Object(s["a"])({method:"post",headers:{"Content-Type":"application/json;charset=utf8"},data:e,url:c})}var p=o["c"]+"/leanSeatingSkillController/labelUserDisplay";function h(e){return Object(s["a"])({method:"post",headers:{"Content-Type":"application/json;charset=utf8"},data:e,url:p})}var f=o["c"]+"/potentialTransferController/selectTotal";function d(e){return Object(s["a"])({method:"post",headers:{"Content-Type":"application/json;charset=utf8"},data:e,url:f})}var b=o["c"]+"/potentialTransferController/cityDownFrameLevel";function m(e){return Object(s["a"])({method:"post",headers:{"Content-Type":"application/json;charset=utf8"},data:e,url:b})}var g=o["c"]+"/potentialTransferController/selectPotentialTransfer";function D(e){return Object(s["a"])({method:"post",headers:{"Content-Type":"application/json;charset=utf8"},data:e,url:g})}var y=o["c"]+"/potentialTransferController/potentialTransferMark";function v(e){return Object(s["a"])({method:"post",headers:{"Content-Type":"application/json;charset=utf8"},data:e,url:y})}var C=o["c"]+"/potentialTransferController/userReminderAndWarning";function k(e){return Object(s["a"])({method:"post",headers:{"Content-Type":"application/json;charset=utf8"},data:e,url:C})}var F={data:function(){return{potentialSuspected:{list:[],page:null,limit:null,total:0,model:null}}},methods:{themeLabelDisplay:function(e){return u(e).then((function(e){return e}))},labelUserDisplay:function(e){return h(e).then((function(e){return e}))},selectTotal:function(e){return d(e).then((function(e){return e}))},cityDownFrameLevel:function(e){return m(e).then((function(e){return e}))},selectPotentialTransfer:function(e){return D(e).then((function(e){return e}))},potentialTransferMark:function(e){return v(e).then((function(e){return e}))},userReminderAndWarning:function(e){return k(e).then((function(e){return e}))}}},O=a("f9fe"),w=a("1b04"),P=a("ac3e"),L=a("03400"),j=a("bc3a"),S=a.n(j);function z(e,t){var a=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),a.push.apply(a,n)}return a}function x(e){for(var t=1;t<arguments.length;t++){var a=null!=arguments[t]?arguments[t]:{};t%2?z(Object(a),!0).forEach((function(t){Object(l["a"])(e,t,a[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(a)):z(Object(a)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(a,t))}))}return e}var M={components:{bdaTable:O["a"],barCharts:w["a"],themeLabelList:P["a"]},name:"panoramicAnalysis",mixins:[F],data:function(){return{potentialTransferNumber:0,suspectedLeaseNumber:0,potentialSuspectedForm:{municipalBureau:""},municipalBureauOptions:[],labelData:[],labelQueryForm:{menuType:"4",current:1,size:10},labelPageConfig:{name:"label",current:1,size:10,pageSizes:[10,20,30,40,50],layout:"prev, pager, next, sizes,jumper,total",total:0},labelDetailData:{},labelDetailQueryForm:{dbcolumnAS:"",menuType:"4",tagName:"",current:1,size:10},labelDetailPageConfig:{name:"labelDetail",current:1,size:10,pageSizes:[10,20,30,40,50],layout:"prev, pager, next, sizes,jumper,total",total:0},potentialSuspectedData:{},potentialSuspectedRes:!1,potentialMarkersActive:"1",potentialMarkersData:{},potentialMarkersQueryForm:{municipalBureau:"",current:1,size:10},potentialMarkersPageConfig:{name:"potentialMarkers",current:1,size:10,pageSizes:[10,20,30,40],layout:"prev, pager, next, sizes,jumper,total",total:0},dailySeatData:{},dailySeatRes:!1,headerColor:"",setOptionData:{}}},mounted:function(){var e=this;this.getLabelData(),this.getTotlNumber(),this.getMunicipalBureauOptions(),this.getPotentialSuspectedData(),this.getListAndGraphData(),window.addEventListener("resize",(function(){e.setOptionData["潜在过户与疑似租赁分布"]&&e.setOptionData["潜在过户与疑似租赁分布"].resize(),e.setOptionData["用户提醒与预警"]&&e.setOptionData["用户提醒与预警"].resize()}))},methods:{setOption:function(e,t){this.setOptionData[e]=t},changePage:function(e){console.log(e,"data"),"label"===e.name&&(this.labelQueryForm.size=e.size,this.labelQueryForm.current=e.current,this.getLabelData()),"labelDetail"===e.name&&(this.labelDetailQueryForm.dbcolumnAS=e.keyValue||"",this.labelDetailQueryForm.size=e.size,this.labelDetailQueryForm.current=e.current,this.getLabelDetailData()),"potentialMarkers"===e.name&&(this.potentialMarkersQueryForm.size=e.size,this.potentialMarkersQueryForm.current=e.current,this.getPotentialMarkersData())},themeLabelExportExcel2:function(e){try{Object(L["a"])("/leanSeatingSkillController/exportLabelUserDisplay?tagId="+e.tagId)}finally{this.$refs.themeLabelList.changeLoading()}},themeLabelExportExcel:function(e){var t=this;this.excelLoading=!0;var a="/leanSeatingSkillController/exportLabelUserDisplay",n={tagId:e.tagId};S()({method:"get",url:o["c"]+a,params:n,headers:{"Content-Type":"application/json;charset=UTF-8"},responseType:"blob"}).then((function(e){var t=e.data,a=new Blob([t]),n="导出信息.xls";if("download"in document.createElement("a")){var i=document.createElement("a");i.download=n,i.style.display="none",i.href=URL.createObjectURL(a),document.body.appendChild(i),i.click(),URL.revokeObjectURL(i.href),document.body.removeChild(i)}else navigator.msSaveBlob(a,n)})).finally((function(){t.$refs.themeLabelList.changeLoading()})).catch((function(){t.$refs.themeLabelList.changeLoading()}))},getLabelData:function(){var e=this;this.themeLabelDisplay(this.labelQueryForm).then((function(t){e.labelPageConfig.total=t.total,e.labelPageConfig.size=e.labelQueryForm.size,e.labelPageConfig.current=e.labelQueryForm.current,e.labelData=t.list.map((function(e){return x(x({},e),{},{name:e.tagName,text:e.tagDescription,value:e.account||0})})),console.log(e.labelData,"labelData")}))},getLabelDetailData:function(e){var t=this;e&&(this.labelDetailQueryForm.tagId=e.tagId,this.labelDetailQueryForm.size=10,this.labelDetailQueryForm.current=1);var a=[];this.labelUserDisplay(x({},this.labelDetailQueryForm)).then((function(e){t.labelDetailPageConfig.total=e.result[0]?e.result[0].total:0,t.labelDetailPageConfig.size=t.labelDetailQueryForm.size,t.labelDetailPageConfig.current=t.labelDetailQueryForm.current,e.showField[t.labelDetailQueryForm.tagId]&&(a=e.showField[t.labelDetailQueryForm.tagId].map((function(e){return{prop:e.dbcolumnAS,label:e.dbcolumnTitle}})).filter((function(e){return"地区编码"!==e.label&&"县区局编码"!==e.label&&"供电单位编码"!==e.label&&"供电电网编码"!==e.label})).filter((function(e){return"地区编码"!==e.label&&"县区局编码"!==e.label&&"供电单位编码"!==e.label&&"供电电网编码"!==e.label}))),console.log(a,"columnNameData"),e.result.shift(),t.labelDetailData={tableData:Object(r["a"])(e.result),columnNameData:a,name:"labelDetail",headerColor:"#1899fa",title:"客户明细列表",total:t.labelDetailPageConfig.total,current:t.labelDetailQueryForm.current,size:t.labelDetailQueryForm.size}}))},getTotlNumber:function(){var e=this;this.selectTotal({}).then((function(t){e.potentialTransferNumber=t.qzghs,e.suspectedLeaseNumber=t.yszls}))},getPotentialSuspectedData:function(e){var t=this,a="";this.municipalBureauOptions.forEach((function(e){e.value===t.potentialSuspectedForm.municipalBureau&&(a=e.orgLev)})),this.potentialSuspectedRes=!1,this.selectPotentialTransfer(e?{powerSupplyCode:this.potentialSuspectedForm.municipalBureau,orgLev:a}:{}).then((function(e){var a=[],n=[],i=[],r=[],l=[];e.forEach((function(e){l.push(e.areaName),a.push(e.potentialHouseholds),n.push(e.confirmPotentialHouseholds),i.push(e.handleTransfer),r.push(e.suspectedLease)})),t.potentialSuspectedData={dataMap:{"潜在过户数":a,"确认潜在过户数":n,"办理过户数":i,"疑似租赁数":r},xNameData:l,colorMap:{"潜在过户数":[["#2790FF","#55BFFF","#ddf2ff"]],"确认潜在过户数":[["#19A7CD","#66D6FF","#def6fe"]],"办理过户数":[["#28B16E","#6AE3AA","#def5fd"]],"疑似租赁数":[["#E69622","#F8CC67","#fdf3df"]]},xyName:{"x轴":{name:"",color:"#4D4D4D",diffcolor:!1},"y轴":[{name:"单位：户数",color:"#808080"}]}},t.potentialSuspectedRes=!0}))},changePotentialMarkers:function(e){this.potentialMarkersActive=e,this.potentialMarkersQueryForm.municipalBureau="",this.getListAndGraphData()},getListAndGraphData:function(){this.potentialMarkersQueryForm.current=1,this.getPotentialMarkersData(),this.getDailySeatData()},getPotentialMarkersData:function(){var e=this;this.headerColor="#1899fa";var t=[{prop:"yhbh",label:"用户编码"},{prop:"yhmc",label:"用户名称"},{prop:"yddz",label:"用电地址"},{prop:"gdj",label:"供电局"},{prop:"gddw",label:"供电单位"},{prop:"tqmc",label:"台区"},{prop:"xlmc",label:"线路线段"},{prop:"ysd",label:"疑似度"},{prop:"sfzqbj",label:"确认是否正确标记"},{prop:"sfblgh",label:"1"===this.potentialMarkersActive?"标记后是否办理过户":"标记后是否修改档案信息"}];this.potentialMarkersData={},this.potentialTransferMark({mark:this.potentialMarkersActive,city:this.potentialMarkersQueryForm.municipalBureau,size:this.potentialMarkersQueryForm.size,current:this.potentialMarkersQueryForm.current}).then((function(a){e.potentialMarkersPageConfig.total=a.total,e.potentialMarkersPageConfig.size=e.potentialMarkersQueryForm.size,e.potentialMarkersPageConfig.current=e.potentialMarkersQueryForm.current,a.records.forEach((function(e){e.ysd=e.ysd+"%"})),e.potentialMarkersData={tableData:Object(r["a"])(a.records),columnNameData:t}}))},getDailySeatData:function(){var e=this;this.dailySeatRes=!1,this.userReminderAndWarning({mark:this.potentialMarkersActive,city:this.potentialMarkersQueryForm.municipalBureau}).then((function(t){var a=[],n=[],i=[],r=[];t.forEach((function(e){a.push(e.name),n.push(e.correct),i.push(e.undetermined),r.push(e.error)})),e.dailySeatData={dataMap:{"正确标记":n,"待定标记":i,"错误标记":r},xNameData:a,colorMap:{"正确标记":[["#2790FF","#55BFFF"]],"待定标记":[["#28B16E","#6AE3AA"]],"错误标记":[["#E69622","#F8CC67"]]},xyName:{"x轴":{name:"",color:"#808080",diffcolor:!1},"y轴":[{name:"客户数",color:"#808080"}]}},e.dailySeatRes=!0}))},getMunicipalBureauOptions:function(){var e=this;this.cityDownFrameLevel({}).then((function(t){e.municipalBureauOptions=t.map((function(e){return{name:e.orgName,value:e.orgCode,orgLev:e.orgLev}}))}))}}},_=M,E=(a("710c"),a("2877")),T=Object(E["a"])(_,n,i,!1,null,"4ae1c146",null);t["default"]=T.exports},"52f8":function(e,t,a){},"710c":function(e,t,a){"use strict";var n=a("52f8"),i=a.n(n);i.a},ac3e:function(e,t,a){"use strict";var n=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"lable-table"},[e._m(0),0!==e.labelDealData.length?a("div",{staticClass:"lable-box",style:{height:e.tableHeight+"px"}},e._l(e.labelDealData,(function(t,n){return a("div",{key:n,staticClass:"lable-item"},[a("span",{staticClass:"name",style:{backgroundColor:t.color}},[e._v("\n        "+e._s(t.name)+"\n      ")]),a("span",{staticClass:"text",style:{backgroundColor:t.backgroundColor}},[e._v("\n        "+e._s(t.text)+"\n      ")]),a("span",{staticClass:"value",style:{backgroundColor:t.backgroundColor},on:{click:function(a){return e.showDetail(t)}}},[e._v(e._s(t.value+"户"))])])})),0):a("div",{staticClass:"no-data"},[a("span",[e._v("暂无数据")])]),e.isPage?a("el-pagination",{staticClass:"content-pagination",attrs:{"current-page":e.queryForm.current,"page-sizes":e.pageConfig.pageSizes,"page-size":e.queryForm.size,layout:e.pageConfig.layout,total:e.pageConfig.total},on:{"size-change":e.sizeChange,"current-change":e.currentChange}}):e._e(),e.showDetailVisible?a("showDetailList",{ref:"showDetailList",attrs:{visible:e.showDetailVisible,detailData:e.detailData,isQuery:e.isQuery},on:{"update:visible":function(t){e.showDetailVisible=t},changePageData:e.changePageData,exportExcel:e.exportExcel}}):e._e()],1)},i=[function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"lable-header"},[a("span",{staticClass:"name"},[e._v("标签名称")]),a("span",{staticClass:"text"},[e._v("标签说明")]),a("span",{staticClass:"value"},[e._v("覆盖客户数")])])}],r=(a("8e6e"),a("ade3")),l=(a("7f7f"),a("ac6a"),a("456d"),a("db03"));function o(e,t){var a=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),a.push.apply(a,n)}return a}function s(e){for(var t=1;t<arguments.length;t++){var a=null!=arguments[t]?arguments[t]:{};t%2?o(Object(a),!0).forEach((function(t){Object(r["a"])(e,t,a[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(a)):o(Object(a)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(a,t))}))}return e}var c={components:{showDetailList:l["a"]},props:{labelData:{type:Array,default:function(){return[]}},showDetailData:{type:Object,default:function(){return{}}},isQuery:{type:Boolean,default:function(){return!1}},isPage:{type:Boolean,default:function(){return!0}},pageConfig:{type:Object,default:function(){return{name:"",current:1,size:10,pageSizes:[10,20,30,40],layout:"prev, pager, next, sizes,jumper,total",total:0}}}},name:"show-detail-list",data:function(){return{tableHeight:0,queryForm:{tagId:"",name:"",current:1,size:10},labelDealData:[],showDetailVisible:!1,detailData:{},rowData:{},detailQueryForm:{current:1,size:10},detailPageConfig:{name:"detail",current:1,size:10,pageSizes:[10,20,30,40,50],layout:"prev, pager, next, sizes,jumper,total",total:0}}},mounted:function(){this.init()},watch:{labelData:function(){this.dataDeal(this.labelData)},showDetailData:function(){console.log(this.showDetailData,"showDetailData"),0!==Object.keys(this.showDetailData).length&&this.showDetailDeal()}},methods:{changeLoading:function(){this.$refs.showDetailList.themeLoading=!1},init:function(){this.tableHeight=document.getElementsByClassName("lable-table")[0].clientHeight-30-(this.isPage?52:0),this.queryForm.name=this.pageConfig.name,this.queryForm.size=this.pageConfig.size,this.queryForm.current=this.pageConfig.current,this.dataDeal(this.labelData)},sizeChange:function(e){this.queryForm.size=e,this.$emit("changePage",this.queryForm)},currentChange:function(e){this.queryForm.current=e,this.$emit("changePage",this.queryForm)},exportExcel:function(e){this.$emit("exportExcel",s(s({},e),{},{tagId:this.queryForm.tagId}))},showDetail:function(e){this.queryForm.tagId=e.tagId,this.$emit("clickDetail",e)},changePageData:function(e){this.rowData=e,this.$emit("changeDetailPage",s(s({},e),this.rowData))},showDetailDeal:function(){var e=s({},this.showDetailData);console.log(e,"rowData"),this.detailData=e,this.showDetailVisible=!0},dataDeal:function(e){var t=this;if(this.labelDealData=[],0!==Object.keys(e).length){var a=["#3890FF","#21CCA8","#E69617","#1ABDEF","#546EDD","#1FB7C8","#8663D5"],n=["#ebf3ff","#e8f9f6","#fcf4e7","#e8f8fd","#edf0fb","#e8f7f9","#f2effa"];e.forEach((function(e,t){t<a.length?(e.color=a[t],e.backgroundColor=n[t]):(e.color=a[t-a.length*Math.floor(t/a.length)],e.backgroundColor=n[t-a.length*Math.floor(t/a.length)])})),this.$nextTick((function(){t.labelDealData=e}))}}}},u=c,p=(a("cb3b"),a("2877")),h=Object(p["a"])(u,n,i,!1,null,"1b473ea9",null);t["a"]=h.exports},cb3b:function(e,t,a){"use strict";var n=a("e62f"),i=a.n(n);i.a},e62f:function(e,t,a){}}]);
//# sourceMappingURL=chunk-1cbad7f0.286bdcf7.js.map