(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-ddd7329c"],{2909:function(t,e,a){"use strict";function n(t,e){(null==e||e>t.length)&&(e=t.length);for(var a=0,n=new Array(e);a<e;a++)n[a]=t[a];return n}function r(t){if(Array.isArray(t))return n(t)}function s(t){if("undefined"!==typeof Symbol&&Symbol.iterator in Object(t))return Array.from(t)}function o(t,e){if(t){if("string"===typeof t)return n(t,e);var a=Object.prototype.toString.call(t).slice(8,-1);return"Object"===a&&t.constructor&&(a=t.constructor.name),"Map"===a||"Set"===a?Array.from(t):"Arguments"===a||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(a)?n(t,e):void 0}}function l(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}function i(t){return r(t)||s(t)||o(t)||l()}a.d(e,"a",(function(){return i}))},"80f2":function(t,e,a){"use strict";var n=a("db49"),r=a("ab3e"),s=n["c"]+"/residentialElectricity/getPowerAreaCode";function o(t){return Object(r["a"])({method:"post",headers:{"Content-Type":"application/json;charset=utf8"},data:t,url:s})}var l=n["b"]+"/tag/listTagTreeAndTagobj";function i(t){return Object(r["a"])({method:"get",headers:{"Content-Type":"application/json;charset=utf8"},data:t,url:l})}var c=n["c"]+"/cptYxhdYdkh/getXl";function u(t){return Object(r["a"])({method:"get",headers:{"Content-Type":"application/json;charset=utf8"},data:t,url:c})}e["a"]={data:function(){return{commonApi:{list:[],page:null,limit:null,total:0,model:null}}},methods:{getPowerAreaCode:function(t){return o(t).then((function(t){return t}))},getBdaTagList:function(t){return i(t).then((function(t){return t}))},getXl:function(t){return u(t).then((function(t){return t}))}}}},ad17:function(t,e,a){},be54:function(t,e,a){"use strict";a.r(e);var n=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"manualManage"},[a("div",{staticClass:"header"},[a("div",{staticClass:"selectNav"},[a("el-select",{staticClass:"input_td",attrs:{size:"small",clearable:"",placeholder:"请选择地市局"},on:{change:t.dsjChange},model:{value:t.queryForm.dsj,callback:function(e){t.$set(t.queryForm,"dsj",e)},expression:"queryForm.dsj"}},t._l(t.dsjOptions,(function(t){return a("el-option",{key:t.ORG_CODE,attrs:{label:t.ORG_NAME,value:t.ORG_CODE}})})),1),a("el-select",{staticClass:"input_td",attrs:{clearable:"",placeholder:"请选择县区局",size:"small"},on:{change:t.qxjChange},model:{value:t.queryForm.xqj,callback:function(e){t.$set(t.queryForm,"xqj",e)},expression:"queryForm.xqj"}},t._l(t.xqjOptions,(function(t){return a("el-option",{key:t.ORG_CODE,attrs:{label:t.ORG_NAME,value:t.ORG_CODE}})})),1),a("el-select",{staticClass:"input_td",attrs:{size:"small",clearable:"",placeholder:"请选择供电所"},model:{value:t.queryForm.gds,callback:function(e){t.$set(t.queryForm,"gds",e)},expression:"queryForm.gds"}},t._l(t.gdsOptions,(function(t){return a("el-option",{key:t.ORG_CODE,attrs:{label:t.ORG_NAME,value:t.ORG_CODE}})})),1),a("el-input",{staticClass:"input_300",attrs:{placeholder:"请输入用户编号",size:"small",clearable:""},model:{value:t.queryForm.yhbh,callback:function(e){t.$set(t.queryForm,"yhbh",e)},expression:"queryForm.yhbh"}}),a("el-button",{attrs:{type:"primary",size:"small",icon:"el-icon-search"},on:{click:t.getTableData}},[t._v("查询")]),a("el-upload",{staticClass:"upload",attrs:{action:"/portal/strategy/tmNpmisTdmgjhgjkhxxT/uploadFileSecond","on-success":t.handleSuccess,multiple:"",limit:1,accept:".xls, .xlsx","before-upload":t.beforeUpload,"show-file-list":!1}},[a("el-button",{attrs:{size:"small",type:"primary"}},[t._v("上传文件")])],1),a("el-button",{attrs:{type:"primary",size:"small",icon:"el-icon-search"},on:{click:t.submitMark}},[t._v("标记提交")])],1)]),a("div",{staticClass:"content"},[a("div",{staticClass:"title"},[t._v("停电敏感客户第2次通知客户标签标记")]),a("div",{staticClass:"tableTd"},[a("el-table",{directives:[{name:"loading",rawName:"v-loading",value:t.loading,expression:"loading"}],staticStyle:{width:"100%"},attrs:{border:"",data:t.tableData,"row-class-name":t.tableRowClassName}},[a("el-table-column",{attrs:{label:"序号",align:"center",type:"index",width:"70"}}),a("el-table-column",{attrs:{prop:"yhbh",label:"用户编号"}}),a("el-table-column",{attrs:{prop:"yhmc",label:"用户名称"}}),a("el-table-column",{attrs:{prop:"yddz",label:"用电地址"}}),a("el-table-column",{attrs:{prop:"dsj",label:"地市局"}}),a("el-table-column",{attrs:{prop:"xqj",label:"县区局"}}),a("el-table-column",{attrs:{prop:"gds",label:"供电所"}}),a("el-table-column",{attrs:{prop:"updateTime",label:"标签更新时间"}}),a("el-table-column",{attrs:{align:"center",width:"200",label:"选择至停电敏感客户标签标记清单"},scopedSlots:t._u([{key:"default",fn:function(e){return[a("el-checkbox",{attrs:{disabled:e.row.bindTagStatus},on:{change:function(a){return t.bindTagBChange(e.row)}},model:{value:e.row.bindTagB,callback:function(a){t.$set(e.row,"bindTagB",a)},expression:"scope.row.bindTagB"}},[t._v("是否标记")])]}}])})],1),a("div",{staticClass:"block"},[a("el-pagination",{attrs:{"current-page":this.queryForm.current,"page-sizes":[10,20,30,40],"page-size":this.queryForm.size,layout:"total, sizes, prev, pager, next, jumper",total:this.queryForm.total},on:{"size-change":t.handleSizeChange,"current-change":t.handleCurrentChange}})],1)],1)])])},r=[],s=(a("ac6a"),a("2909")),o=(a("7f7f"),a("8d05")),l=a("80f2"),i={name:"manualManage",components:{},props:{},mixins:[o["a"],l["a"]],data:function(){return{dsjOptions:[],xqjOptions:[],gdsOptions:[],queryForm:{yhbh:"",dsj:"",xqj:"",gds:"",current:1,size:10,total:0},tableData:[],tableDataSelect:[],loading:!1}},mounted:function(){this.getAreaCode(),this.getTableData()},methods:{dsjChange:function(){this.queryForm.gds="",this.gdsOptions=[],this.queryForm.xqj="",this.xqjOptions=[],this.getQxjPowerAreaCode()},qxjChange:function(){this.queryForm.gds="",this.gdsOptions=[],this.getGdsPowerAreaCode()},handleSizeChange:function(t){this.queryForm.size=t,this.getTableData()},handleCurrentChange:function(t){this.queryForm.current=t,this.getTableData()},beforeUpload:function(t,e){var a=t.name.substring(t.name.lastIndexOf(".")+1),n="xls"===a||"xlsx"===a;return n||this.$alert("上传文件只能是xls、xlsx格式!"),n},handleSuccess:function(t){console.log(t),"00000"===t.code&&(this.$message.success("上传成功"),this.tableData=Object(s["a"])(t.data.records),this.queryForm.total=t.data.total,this.tableData.forEach((function(t){t.bindTagB="1"===t.bindTag,t.bindTagStatus="1"===t.bindTag})))},tableRowClassName:function(t){t.row;var e=t.rowIndex;return e%2===0?"success-row":""},bindTagBChange:function(t){var e=Object(s["a"])(this.tableData);this.tableData=[],this.tableData=Object(s["a"])(e),0!==this.tableDataSelect.length?-1===this.tableDataSelect.indexOf(t.yhbh)?this.tableDataSelect.push(t.yhbh):this.tableDataSelect.splice(this.tableDataSelect.indexOf(t.yhbh),1):this.tableDataSelect.push(t.yhbh),console.log(this.tableData,"this.tableData"),console.log(this.tableDataSelect,"this.tableDataSelect")},submitMark:function(){var t=this,e=[];this.tableData.filter((function(t){return t.bindTagB})).forEach((function(t){e.push(t.yhbh)})),this.markSecondeTimeTag({yhbhs:e}).then((function(e){e&&(t.$message.success("标记成功"),t.getTableData())}))},getAreaCode:function(){var t=this;this.getPowerAreaCode({orgLev:"2"}).then((function(e){t.dsjOptions=e}))},getQxjPowerAreaCode:function(){var t=this;this.getPowerAreaCode({orgLev:"3",orgCode:this.queryForm.dsj}).then((function(e){t.xqjOptions=e}))},getGdsPowerAreaCode:function(){var t=this;this.getPowerAreaCode({orgLev:"4",orgCode:this.queryForm.xqj}).then((function(e){t.gdsOptions=e}))},getTableData:function(){var t=this;this.getSecondTimeTagUser(this.queryForm).then((function(e){t.tableData=Object(s["a"])(e.records),t.queryForm.total=e.total,t.tableData.forEach((function(t){t.bindTagB="1"===t.bindTag,t.bindTagStatus="1"===t.bindTag}))}))}}},c=i,u=(a("fbb4"),a("2877")),d=Object(u["a"])(c,n,r,!1,null,"5cf31394",null);e["default"]=d.exports},fbb4:function(t,e,a){"use strict";var n=a("ad17"),r=a.n(n);r.a}}]);
//# sourceMappingURL=chunk-ddd7329c.2ba97f2b.js.map