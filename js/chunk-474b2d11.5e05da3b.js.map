{"version":3,"sources":["webpack:///./src/views/recommendManagement/approvalTask.vue?f2f5","webpack:///./src/views/recommendManagement/approvalTask.vue?3185","webpack:///src/views/recommendManagement/approvalTask.vue","webpack:///./src/views/recommendManagement/approvalTask.vue?74d7","webpack:///./src/views/recommendManagement/approvalTask.vue"],"names":["render","_vm","this","_h","$createElement","_c","_self","staticClass","attrs","taskData","taskHeaderColor","pageConfig","on","taskOperate","changePage","resultDialogVisible","resultDialogData","resultDialogType","$event","_e","staticRenderFns","components","bdaTable","operateDialog","name","mixins","watch","filterText","$refs","tree","filter","val","props","menuType","type","String","default","data","taskRes","queryForm","relationNumber","current","size","total","pageSizes","layout","mounted","getTaskData","methods","console","log","getTaskDetailData","approvalResult","approvalThrough","approvalState","taskDialogClose","taskDialogVisible","submitApproval","approvalExecutionList","tableData","columnNameData","err","selectTaskDetail","targetId","recId","tagId","component"],"mappings":"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","file":"js/chunk-474b2d11.5e05da3b.js","sourcesContent":["import mod from \"-!../../../node_modules/mini-css-extract-plugin/dist/loader.js??ref--8-oneOf-1-0!../../../node_modules/css-loader/index.js??ref--8-oneOf-1-1!../../../node_modules/vue-loader/lib/loaders/stylePostLoader.js!../../../node_modules/postcss-loader/src/index.js??ref--8-oneOf-1-2!../../../node_modules/sass-loader/dist/cjs.js??ref--8-oneOf-1-3!../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./approvalTask.vue?vue&type=style&index=0&id=6994f682&scoped=true&lang=scss&\"; export default mod; export * from \"-!../../../node_modules/mini-css-extract-plugin/dist/loader.js??ref--8-oneOf-1-0!../../../node_modules/css-loader/index.js??ref--8-oneOf-1-1!../../../node_modules/vue-loader/lib/loaders/stylePostLoader.js!../../../node_modules/postcss-loader/src/index.js??ref--8-oneOf-1-2!../../../node_modules/sass-loader/dist/cjs.js??ref--8-oneOf-1-3!../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./approvalTask.vue?vue&type=style&index=0&id=6994f682&scoped=true&lang=scss&\"","var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('div',{staticClass:\"approvalTask\"},[_c('div',{staticClass:\"content\"},[_c('bdaTable',{staticClass:\"content-table\",attrs:{\"tableData\":_vm.taskData,\"headerColor\":_vm.taskHeaderColor,\"isPage\":true,\"pageConfig\":_vm.pageConfig},on:{\"operate\":_vm.taskOperate,\"changePage\":_vm.changePage}})],1),(_vm.resultDialogVisible)?_c('operateDialog',{attrs:{\"visible\":_vm.resultDialogVisible,\"showData\":_vm.resultDialogData,\"type\":_vm.resultDialogType},on:{\"update:visible\":function($event){_vm.resultDialogVisible=$event}}}):_vm._e()],1)}\nvar staticRenderFns = []\n\nexport { render, staticRenderFns }","<!-- 审批执行任务 -->\r\n<template>\r\n  <div class=\"approvalTask\">\r\n    <div class=\"content\">\r\n      <bdaTable\r\n        class=\"content-table\"\r\n        :tableData=\"taskData\"\r\n        :headerColor=\"taskHeaderColor\"\r\n        @operate=\"taskOperate\"\r\n        :isPage=\"true\"\r\n        :pageConfig=\"pageConfig\"\r\n        @changePage=\"changePage\"\r\n      ></bdaTable>\r\n    </div>\r\n    <operateDialog\r\n      v-if=\"resultDialogVisible\"\r\n      :visible.sync=\"resultDialogVisible\"\r\n      :showData=\"resultDialogData\"\r\n      :type=\"resultDialogType\"\r\n    ></operateDialog>\r\n  </div>\r\n</template>\r\n\r\n<script>\r\nimport Interface from '@/base/mixin/recommend-management';\r\nimport bdaTable from \"../../components/bda-table/bda-table\";\r\nimport operateDialog from \"./components/operate-dialog\";\r\n\r\nexport default {\r\n  components: {\r\n    bdaTable,\r\n    operateDialog\r\n  },\r\n  name: \"approvalTask\",\r\n  mixins: [Interface],\r\n  watch: {\r\n    filterText(val) {\r\n      this.$refs.tree.filter(val);\r\n    }\r\n  },\r\n  props: {\r\n    menuType: {\r\n      type: String,\r\n      default: ''\r\n    }\r\n  },\r\n  data() {\r\n    return {\r\n      //推荐生成任务\r\n      taskData: {},\r\n      taskRes: false,\r\n      taskHeaderColor: \"\",\r\n      queryForm: {\r\n        relationNumber: '',\r\n        current: 1,\r\n        size: 10,\r\n        total: 0\r\n      },\r\n      //分页设置\r\n      pageConfig: {\r\n        current: 1,\r\n        size: 10,\r\n        pageSizes: [10, 20, 30, 40],\r\n        layout: \"prev, pager, next, sizes,jumper,total\",\r\n        total: 0\r\n      },\r\n      //执行结果查看\r\n      resultDialogVisible: false,\r\n      resultDialogType: \"\",\r\n      resultDialogData: {},\r\n    };\r\n  },\r\n  mounted() {\r\n    this.getTaskData();\r\n  },\r\n  methods: {\r\n    //点击任务表格\r\n    taskOperate(type, data) {\r\n      console.log(type, data);\r\n      this.queryForm.relationNumber = data.relationNumber\r\n      if (type === \"approval\") {\r\n        this.getTaskDetailData(data)\r\n      } else {\r\n        if (type === 'approvalPass') {\r\n          this.approvalResult('1')\r\n        }\r\n        if (type === 'approvalFail') {\r\n          this.approvalResult('2')\r\n        }\r\n\r\n        this.resultDialogVisible = false;\r\n      }\r\n\r\n    },\r\n    //审批通过/不通过\r\n    approvalResult(val) {\r\n      this.approvalThrough({\r\n        relationNumber: this.queryForm.relationNumber,\r\n        approvalState: val,\r\n      }).then(res => {\r\n        // if(val==='1')  \r\n        // if(val==='2') \r\n        this.getTaskData()\r\n      })\r\n    },\r\n    //关闭任务模态框\r\n    taskDialogClose() {\r\n      this.taskDialogVisible = false;\r\n    },\r\n    //提交审批\r\n    submitApproval() {\r\n      this.taskDialogVisible = false;\r\n    },\r\n    //改变分页\r\n    changePage(data) {\r\n      this.queryForm.size = data.size\r\n      this.queryForm.current = data.current\r\n      this.getTaskData()\r\n    },\r\n    //获取推荐生成任务列表\r\n    getTaskData() {\r\n      this.taskHeaderColor = \"#1899fa\";\r\n      let columnNameData = [\r\n        // { prop: \"relationNumber\", label: \"关联关系编号\" },\r\n        { prop: \"relationName\", label: \"关联关系名称\" },\r\n        { prop: \"descibe\", label: \"关联关系描述\" },\r\n\r\n        {\r\n          prop: \"Operate\",\r\n          label: \"任务结果\",\r\n          align: \"center\",\r\n          width: \"120px\",\r\n          type: [{ name: \"任务详细信息\", action: \"approval\" }]\r\n        },\r\n        { prop: \"exeTime\", label: \"执行完成时间\" },\r\n        // { prop: \"executionStatus\", label: \"执行状态\", width: \"100px\" },\r\n        {\r\n          prop: \"Operate\",\r\n          label: \"操作\",\r\n          align: \"center\",\r\n          width: \"200px\",\r\n          type: [\r\n            {\r\n              name: \"审批通过\",\r\n              action: \"approvalPass\",\r\n            },\r\n            {\r\n              name: \"审批不通过\",\r\n              action: \"approvalFail\",\r\n            }\r\n          ]\r\n        }\r\n      ]\r\n      this.approvalExecutionList({ ...this.queryForm, menuType: this.menuType }).then(res => {\r\n        this.pageConfig.total = res.total\r\n        this.pageConfig.size = this.queryForm.size\r\n        this.pageConfig.current = this.queryForm.current\r\n        this.taskData = {\r\n          tableData: [\r\n            ...res.records\r\n          ],\r\n          columnNameData: columnNameData\r\n        };\r\n        this.taskRes = true;\r\n      }).catch((err) => {\r\n        if (err) {\r\n          this.taskData = {\r\n            tableData: [],\r\n            columnNameData: columnNameData\r\n          }\r\n        }\r\n      })\r\n    },\r\n    //获取审批任务详细信息\r\n    getTaskDetailData(data) {\r\n      console.log(data, 'data')\r\n      this.selectTaskDetail({\r\n        relationNumber: data.relationNumber,\r\n        targetId: data.targetId,\r\n        recId: data.recId,\r\n        tagId: data.tagId,\r\n      }).then(res => {\r\n        this.resultDialogType = \"approval\";\r\n        this.resultDialogData = res\r\n        this.resultDialogVisible = true;\r\n      })\r\n    },\r\n  }\r\n};\r\n</script>\r\n\r\n<style scoped lang=\"scss\">\r\n.approvalTask {\r\n  width: 100%;\r\n  height: 100%;\r\n  .content {\r\n    ::v-deep .el-table .warning-row {\r\n      background: #e9f3fe;\r\n    }\r\n    width: 100%;\r\n    height: calc(100%);\r\n    background: #ffffff;\r\n    padding: 10px;\r\n    box-sizing: border-box;\r\n    .content-table {\r\n      height: 100%;\r\n    }\r\n  }\r\n  .task-dialog {\r\n    ::v-deep .el-dialog__header {\r\n      padding: 10px 0 10px;\r\n      border-bottom: 1px solid #e6e6e6;\r\n    }\r\n    ::v-deep .el-dialog__body {\r\n      padding: 10px;\r\n    }\r\n    ::v-deep .el-dialog__footer {\r\n      padding: 10px 10px 10px 0;\r\n      border-top: 1px solid #e6e6e6;\r\n      text-align: center;\r\n    }\r\n    .dialog-header {\r\n      .header-text {\r\n        margin-left: 20px;\r\n        color: #808080;\r\n        font-size: 14px;\r\n      }\r\n    }\r\n    .dialog-content {\r\n      .input {\r\n        width: 80%;\r\n      }\r\n    }\r\n  }\r\n}\r\n</style>\r\n","import mod from \"-!../../../node_modules/cache-loader/dist/cjs.js??ref--12-0!../../../node_modules/thread-loader/dist/cjs.js!../../../node_modules/babel-loader/lib/index.js!../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./approvalTask.vue?vue&type=script&lang=js&\"; export default mod; export * from \"-!../../../node_modules/cache-loader/dist/cjs.js??ref--12-0!../../../node_modules/thread-loader/dist/cjs.js!../../../node_modules/babel-loader/lib/index.js!../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./approvalTask.vue?vue&type=script&lang=js&\"","import { render, staticRenderFns } from \"./approvalTask.vue?vue&type=template&id=6994f682&scoped=true&\"\nimport script from \"./approvalTask.vue?vue&type=script&lang=js&\"\nexport * from \"./approvalTask.vue?vue&type=script&lang=js&\"\nimport style0 from \"./approvalTask.vue?vue&type=style&index=0&id=6994f682&scoped=true&lang=scss&\"\n\n\n/* normalize component */\nimport normalizer from \"!../../../node_modules/vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  \"6994f682\",\n  null\n  \n)\n\nexport default component.exports"],"sourceRoot":""}