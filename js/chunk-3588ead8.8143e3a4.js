(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-3588ead8","chunk-3a3db05c","chunk-3a3db05c","chunk-488a7f82","chunk-10295a16","chunk-42d8de46","chunk-5cb129e6","chunk-f7f522b8"],{"03400":function(e,t,a){"use strict";a.d(t,"a",(function(){return o})),a.d(t,"b",(function(){return r}));var i=a("db49"),l=a("bc3a"),s=a.n(l);function o(e){window.location.href=i["c"]+e}function r(e,t){console.log(e,t),s()({method:"post",url:i["c"]+e,data:t,responseType:"blob"}).then((function(e){console.log(e,"res");var t=e.data,a=new Blob([t]),i="导出信息.xls";if("download"in document.createElement("a")){var l=document.createElement("a");l.download=i,l.style.display="none",l.href=URL.createObjectURL(a),document.body.appendChild(l),l.click(),URL.revokeObjectURL(l.href),document.body.removeChild(l)}else navigator.msSaveBlob(a,i)}))}},"03d4":function(e,t,a){"use strict";var i=a("fb55"),l=a.n(i);l.a},"0705":function(e,t,a){},"0973":function(e,t,a){"use strict";a.r(t);var i=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"operate-dialog"},[a("el-dialog",{staticClass:"createTask-dialog",attrs:{title:"提示",visible:e.visible,fullscreen:!0,"show-close":!1,"close-on-click-modal":!1,"close-on-press-escape":!1},on:{"update:visible":function(t){e.visible=t}}},[a("div",{staticClass:"dialog-header",attrs:{slot:"title"},slot:"title"},[a("el-button",{staticClass:"back",on:{click:e.createTaskDialogClose}},[e._v("返回")]),a("span",{staticClass:"header-text"},[e._v(e._s(e.createTaskDialogTitle))])],1),a("div",{staticClass:"dialog-content"},[a("el-form",{ref:"createTaskForm",staticClass:"createTask-form",attrs:{model:e.createTaskForm,rules:e.createTaskFormRules,"label-width":"160px"}},[a("div",{staticClass:"base-info"},[a("div",{staticClass:"title"},[a("span",{staticClass:"text"},[e._v("关联关系基本信息")])]),a("div",{staticClass:"content"},[a("el-row",[a("el-col",{attrs:{span:8}},[a("el-form-item",{attrs:{label:"关联关系名称：",prop:"relationName"}},[a("el-input",{staticClass:"input",attrs:{size:"mini",disabled:e.isCheck},model:{value:e.createTaskForm.relationName,callback:function(t){e.$set(e.createTaskForm,"relationName",t)},expression:"createTaskForm.relationName"}})],1)],1),a("el-col",{attrs:{span:8}},[a("el-form-item",{attrs:{label:"关联关系编号："}},[a("el-input",{staticClass:"input",attrs:{size:"mini",disabled:!0},model:{value:e.createTaskForm.relationNumber,callback:function(t){e.$set(e.createTaskForm,"relationNumber",t)},expression:"createTaskForm.relationNumber"}})],1)],1)],1),a("el-row",[a("el-col",{attrs:{span:24}},[a("el-form-item",{attrs:{label:"关联关系描述：",prop:"descibe"}},[a("el-input",{staticClass:"input-row",attrs:{disabled:e.isCheck,type:"textarea",rows:5,resize:"none",placeholder:"请输入内容"},model:{value:e.createTaskForm.descibe,callback:function(t){e.$set(e.createTaskForm,"descibe",t)},expression:"createTaskForm.descibe"}})],1)],1)],1),a("el-row",[a("el-col",{attrs:{span:6}},[a("el-form-item",{attrs:{label:e.isCheck?"主体关联关系描述：":"关联关系选择：",prop:"targetId"}},[a("el-select",{staticClass:"input",staticStyle:{width:"100%"},attrs:{size:"mini",disabled:e.isCheck,placeholder:"请选择"},on:{change:e.getTagTargetNameOptions},model:{value:e.createTaskForm.targetId,callback:function(t){e.$set(e.createTaskForm,"targetId",t)},expression:"createTaskForm.targetId"}},e._l(e.targetIdOptions,(function(e){return a("el-option",{key:e.value,attrs:{label:e.name,value:e.value,disabled:e.disabled}})})),1)],1)],1),a("el-col",{staticClass:"line",attrs:{span:1}},[a("span",[e._v("-")])]),a("el-col",{attrs:{span:4}},[a("el-form-item",{attrs:{"label-width":"0px",prop:"recId"}},[a("el-select",{staticClass:"input",staticStyle:{width:"100%"},attrs:{size:"mini",disabled:e.isCheck,placeholder:"请选择"},on:{change:e.getTagRecNameOptions},model:{value:e.createTaskForm.recId,callback:function(t){e.$set(e.createTaskForm,"recId",t)},expression:"createTaskForm.recId"}},e._l(e.recIdOptions,(function(e){return a("el-option",{key:e.value,attrs:{label:e.name,value:e.value,disabled:e.disabled}})})),1)],1)],1)],1)],1)]),a("div",{staticClass:"label-setup"},[a("div",{staticClass:"title"},[a("span",{staticClass:"text"},[e._v("\n              "+e._s(e.isCheck?"关联主体标签描述":"关联主体标签设置")+"\n            ")])]),a("div",{staticClass:"content"},[a("el-table",{staticStyle:{width:"100%",height:"100%"},attrs:{data:e.createTaskForm.listRelationPair,border:"",height:287,"header-cell-style":e.headStyle}},[a("el-table-column",{attrs:{prop:"tagTargetId",label:"目标主体的标签"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("el-select",{staticStyle:{width:"80%",padding:"10px"},attrs:{size:"mini",placeholder:"请选择",disabled:0===e.tagTargetNameOptions.length||e.isCheck},model:{value:t.row.tagTargetId,callback:function(a){e.$set(t.row,"tagTargetId",a)},expression:"scope.row.tagTargetId"}},e._l(e.tagTargetNameOptions,(function(e){return a("el-option",{key:e.value,attrs:{label:e.name,value:e.value}})})),1)]}}])}),a("el-table-column",{attrs:{prop:"tagRecId",label:"推荐主体的标签"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("el-select",{staticStyle:{width:"80%",padding:"10px"},attrs:{size:"mini",placeholder:"请选择",disabled:0===e.tagRecNameOptions.length||e.isCheck},model:{value:t.row.tagRecId,callback:function(a){e.$set(t.row,"tagRecId",a)},expression:"scope.row.tagRecId"}},e._l(e.tagRecNameOptions,(function(e){return a("el-option",{key:e.value,attrs:{label:e.name,value:e.value}})})),1)]}}])}),a("el-table-column",{attrs:{prop:"weight",label:"权重",width:"200"},scopedSlots:e._u([{key:"default",fn:function(t){return[e.isCheck?a("span",[e._v(e._s(t.row.weight))]):a("el-input",{staticClass:"input",attrs:{size:"mini"},model:{value:t.row.weight,callback:function(a){e.$set(t.row,"weight",a)},expression:"scope.row.weight"}})]}}])}),e.isCheck?e._e():a("el-table-column",{attrs:{label:"操作",width:"100"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("el-button",{attrs:{type:"text",disabled:0===t.$index},on:{click:function(a){return e.delListRelationPair(t.$index,t.row)}}},[e._v("删除")])]}}],null,!1,51936785)})],1),e.isCheck?e._e():a("div",{staticClass:"add-label"},[a("span",{staticStyle:{cursor:"pointer"},on:{click:e.addLabelSetup}},[a("em",{staticClass:"el-icon-plus icon"}),a("span",{staticClass:"text"},[e._v("添加关联关系对")])])])],1)]),e.isCheck?e._e():a("div",{staticClass:"rule-setup"},[a("div",{staticClass:"title"},[a("span",{staticClass:"text"},[e._v("过滤规则设置")])]),a("div",{staticClass:"content"},[a("el-row",[a("el-col",{attrs:{span:8}},[a("el-form-item",{attrs:{label:"过滤对象："}},[a("el-select",{staticStyle:{width:"80%"},attrs:{size:"mini",placeholder:"请选择"},model:{value:e.createTaskForm.blacklistObject,callback:function(t){e.$set(e.createTaskForm,"blacklistObject",t)},expression:"createTaskForm.blacklistObject"}},e._l(e.blacklistObjectOptions,(function(e){return a("el-option",{key:e.value,attrs:{label:e.name,value:e.value}})})),1)],1)],1),a("el-col",{attrs:{span:16}},[a("el-form-item",{attrs:{label:"黑名单过滤："}},[a("div",{staticClass:"button-group"},[a("el-button",{staticClass:"button",attrs:{size:"mini"},on:{click:e.downloadUpload}},[e._v("下载上传模板")]),a("el-upload",{style:{display:"inline-block"},attrs:{action:"/portal/blackList/uploadBlackList",data:{menuType:"0",objType:e.createTaskForm.blacklistObject,objId:"1"===e.createTaskForm.blacklistObject?e.createTaskForm.targetId:e.createTaskForm.recId},"on-change":e.uploadObject,"show-file-list":!1,disabled:!e.createTaskForm.blacklistObject,accept:".xlsx, .xls"}},[a("el-button",{staticClass:"button",attrs:{size:"mini",disabled:!e.createTaskForm.blacklistObject}},[e._v("上传对象清单")])],1),a("el-button",{attrs:{size:"mini",disabled:!e.createTaskForm.blacklistObject},on:{click:e.chooseHistory}},[e._v("从过滤历史中选择")]),a("el-button",{attrs:{size:"mini"},on:{click:e.resultPreview}},[e._v("推荐结果预览")])],1)])],1)],1)],1)]),a("div",{staticClass:"result-setup"},[a("div",{staticClass:"title"},[a("span",{staticClass:"text"},[e._v(e._s(e.isCheck?"推荐结果":"推荐结果设置"))])]),a("div",{staticClass:"content"},[a("el-row",[a("el-col",{attrs:{span:8}},[a("el-form-item",{attrs:{label:"最大推荐结果数：",prop:"recResultNumber"}},[a("el-input",{staticClass:"input",attrs:{size:"mini",disabled:e.isCheck},model:{value:e.createTaskForm.recResultNumber,callback:function(t){e.$set(e.createTaskForm,"recResultNumber",t)},expression:"createTaskForm.recResultNumber"}})],1)],1),a("el-col",{attrs:{span:8}},[a("el-form-item",{attrs:{label:"推荐结果为空时："}},[a("el-radio-group",{attrs:{disabled:e.isCheck},model:{value:e.createTaskForm.recEmpty,callback:function(t){e.$set(e.createTaskForm,"recEmpty",t)},expression:"createTaskForm.recEmpty"}},[a("el-radio",{attrs:{label:"0"}},[e._v("不处理")]),a("el-radio",{attrs:{label:"1"}},[e._v("随机分配")])],1)],1)],1),e.isCheck?e._e():a("el-col",{attrs:{span:8}},[a("el-form-item",{attrs:{"label-width":"0px"}},[a("span",[e._v("（当目标对象无具体推荐对象时，给目标对象随机分配主体内的对象）")])])],1)],1)],1)]),e.isCheck?e._e():a("div",{staticClass:"update-setup"},[a("div",{staticClass:"title"},[a("span",{staticClass:"text"},[e._v("更新配置")])]),a("div",{staticClass:"content"},[a("el-row",[a("el-col",{attrs:{span:24}},[a("el-form-item",{attrs:{label:"更新周期："}},[a("el-radio-group",{model:{value:e.createTaskForm.updateCycle,callback:function(t){e.$set(e.createTaskForm,"updateCycle",t)},expression:"createTaskForm.updateCycle"}},[a("el-radio",{attrs:{label:"1"}},[e._v("日更新")]),a("el-radio",{attrs:{label:"2"}},[e._v("周更新")]),a("el-radio",{attrs:{label:"3"}},[e._v("月更新")]),a("el-radio",{attrs:{label:"4"}},[e._v("年更新")])],1)],1)],1)],1),a("el-row",[a("el-col",{attrs:{span:8}},[a("el-form-item",{attrs:{label:"更新有效期："}},[a("el-date-picker",{staticClass:"input",attrs:{size:"mini",type:"datetimerange","range-separator":"至","value-format":"yyyy-MM-dd HH:mm:ss","start-placeholder":"开始日期","end-placeholder":"结束日期"},model:{value:e.createTaskForm.updateTime,callback:function(t){e.$set(e.createTaskForm,"updateTime",t)},expression:"createTaskForm.updateTime"}})],1)],1),a("el-col",{attrs:{span:5}},[a("el-form-item",{attrs:{label:"更新模式："}},[a("el-select",{staticStyle:{width:"80%"},attrs:{size:"mini",placeholder:"请选择"},model:{value:e.createTaskForm.updateModel,callback:function(t){e.$set(e.createTaskForm,"updateModel",t)},expression:"createTaskForm.updateModel"}},e._l(e.updateModelOptions,(function(e){return a("el-option",{key:e.value,attrs:{label:e.name,value:e.value}})})),1)],1)],1),a("el-col",{attrs:{span:8}},[a("el-form-item",{attrs:{"label-width":"0px"}},[a("span",[e._v("（配置完成后立即执行更新，后续按照更新配置）")])])],1)],1)],1)]),"approval"===e.type?a("div",{staticClass:"update-setup"},[a("div",{staticClass:"title"},[a("span",{staticClass:"text"},[e._v("执行信息")])]),a("div",{staticClass:"content"},[a("el-row",[a("el-col",{attrs:{span:8}},[a("el-form-item",{attrs:{label:"执行方式：",prop:"exeType"}},[a("span",[e._v(e._s(e.createTaskForm.exeType))])])],1),a("el-col",{attrs:{span:8}},[a("el-form-item",{attrs:{label:"执行渠道：",prop:"exeChannel"}},[a("span",[e._v(e._s(e.createTaskForm.exeChannel))])])],1),a("el-col",{attrs:{span:8}},[a("el-form-item",{attrs:{label:"申请人：",prop:"applicant"}},[a("span",[e._v(e._s(e.createTaskForm.applicant))])])],1)],1)],1)]):e._e()])],1),a("span",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[e.isCheck?e._e():a("el-button",{attrs:{type:"primary"},on:{click:e.createTaskSave}},[e._v("保存")]),a("el-button",{on:{click:e.createTaskDialogClose}},[e._v("\n        "+e._s(e.isCheck?"关闭":"取消")+"\n      ")])],1)]),e.filterHistoryDialogVisible?a("el-dialog",{staticClass:"filterHistory-dialog",attrs:{title:"提示",visible:e.filterHistoryDialogVisible,width:"70%","before-close":e.filterHistoryClose,"close-on-click-modal":!1,"close-on-press-escape":!1},on:{"update:visible":function(t){e.filterHistoryDialogVisible=t}}},[a("span",{staticClass:"dialog-header",attrs:{slot:"title"},slot:"title"},[a("span",{staticClass:"header-text"},[e._v(e._s("过滤历史"))])]),a("div",{staticClass:"dialog-search"},[a("el-form",{staticClass:"dialog-form",attrs:{model:e.filterHistoryForm,"label-width":"160px"}},[a("el-row",[a("el-col",{attrs:{span:12}},[a("el-form-item",{attrs:{label:"显示字段：",prop:"historyField"}},[a("el-select",{staticClass:"input",attrs:{size:"mini",multiple:"",placeholder:"请选择","collapse-tags":""},model:{value:e.filterHistoryForm.historyField,callback:function(t){e.$set(e.filterHistoryForm,"historyField",t)},expression:"filterHistoryForm.historyField"}},e._l(e.historyFieldOptions,(function(e){return a("el-option",{key:e.value,attrs:{label:e.name,value:e.value}})})),1)],1)],1),a("el-col",{attrs:{span:6}},[a("el-form-item",{attrs:{label:"","label-width":"0px"}},[a("el-button",{attrs:{type:"primary",size:"mini"},on:{click:function(t){return e.getFilterHistoryData("confirm")}}},[e._v("展示")])],1)],1)],1)],1)],1),a("bdaTable",{staticClass:"dialog-table",attrs:{tableData:e.filterHistoryData,headerColor:"#1899fa",selectWidth:60},on:{select:e.filterHistorySelectData}}),a("span",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[a("el-button",{attrs:{type:"primary"},on:{click:e.filterHistorySelectConfirm}},[e._v("确定")])],1)],1):e._e(),e.resultPreviewDialogVisible?a("resultPreviewDialog",{attrs:{visible:e.resultPreviewDialogVisible,showData:e.createTaskForm,type:e.resultPreviewDialogType},on:{"update:visible":function(t){e.resultPreviewDialogVisible=t}}}):e._e()],1)},l=[],s=(a("8e6e"),a("456d"),a("7f7f"),a("2909")),o=(a("ac6a"),a("ade3")),r=(a("28a5"),a("c286")),n=a("2595"),c=a("f9fe"),u=a("03400");function d(e,t){var a=Object.keys(e);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);t&&(i=i.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),a.push.apply(a,i)}return a}function h(e){for(var t=1;t<arguments.length;t++){var a=null!=arguments[t]?arguments[t]:{};t%2?d(Object(a),!0).forEach((function(t){Object(o["a"])(e,t,a[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(a)):d(Object(a)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(a,t))}))}return e}var p={components:{bdaTable:c["a"],resultPreviewDialog:n["default"]},mixins:[r["a"]],props:{visible:{type:Boolean,default:function(){return!1}},showData:{type:Object,default:function(){return{}}},type:{type:String,default:function(){return"add"}}},data:function(){return{isCheck:!1,createTaskDialogTitle:"",createTaskFormRules:{relationName:[{required:!0,message:"请输入关联关系名称",trigger:"blur"}],descibe:[{required:!0,message:"请输入关联关系描述",trigger:"blur"}],targetId:[{required:!0,message:"请选择目标主体",trigger:"blur"}],recId:[{required:!0,message:"请选择推荐主体",trigger:"blur"}],recResultNumber:[{required:!0,message:"请输入最大推荐结果数",trigger:"blur"}]},createTaskForm:{menuType:"",relationName:"",relationNumber:"",descibe:"",targetId:"",recId:"",listRelationPair:[{tagId:"",tagTargetId:"",tagRecId:"",tagTargetName:"",tagRecName:"",weight:"1"}],blacklist:[],blacklistObject:"",recResultNumber:"",recEmpty:"1",updateCycle:"",updateTime:[],updateModel:"",updatePeriod:"",exeType:"",exeChannel:"",applicant:""},updateWeek:"",updateDetail:"",targetIdOptions:[],recIdOptions:[],tagTargetNameOptions:[],tagRecNameOptions:[],blacklistObjectOptions:[],updateModelOptions:[],weekOptions:[{name:"周一",value:"1"},{name:"周二",value:"2"},{name:"周三",value:"3"},{name:"周四",value:"4"},{name:"周五",value:"5"},{name:"周六",value:"6"},{name:"周日",value:"7"}],headStyle:{background:"#1895f9"},filterHistoryDialogVisible:!1,filterHistoryForm:{keyValue:"",keyName:"",historyField:[]},filterHistoryData:{},filterHistoryMultipleData:[],filterHistoryColumnData:[],historyFieldOptions:[],filterHistorySaveData:{},filterHistorySaveMultipleData:[],resultPreviewDialogVisible:!1,resultPreviewDialogData:{},resultPreviewDialogType:""}},watch:{},created:function(){this.createTaskForm.menuType=window.location.href.split("/")[window.location.href.split("/").length-1],console.log(this.createTaskForm.menuType," this.createTaskForm.menuType ")},mounted:function(){this.typeDeal(),this.getTargetIdOptions(),this.getBlacklistObjectOptions(),this.getUpdateModelOptions()},methods:{typeDeal:function(){"detail"!==this.type&&"check"!==this.type&&"approval"!==this.type||(this.isCheck=!0,this.createTaskDialogTitle="关联关系详细信息",this.dataInit()),"edit"===this.type&&(this.dataInit(),this.createTaskDialogTitle="编辑推荐生成任务",this.isCheck=!1),"add"===this.type&&(this.isCheck=!1,this.createTaskDialogTitle="新增推荐生成任务")},dataInit:function(){var e=h({},this.showData);this.createTaskForm.relationName=e.relationName||"",this.createTaskForm.relationNumber=e.relationNumber||"",this.createTaskForm.descibe=e.descibe||"",this.createTaskForm.targetId=e.targetId||"",this.createTaskForm.recId=e.recId||"",this.getTagTargetNameOptions(e.targetId),this.getTagRecNameOptions(e.recId),this.createTaskForm.listRelationPair=e.listRelationPair||[{tagId:"",tagTargetId:"",tagRecId:"",tagTargetName:"",tagRecName:"",weight:"1"}],this.createTaskForm.recResultNumber=e.recResultNumber||"",this.createTaskForm.recEmpty=e.recEmpty||"",this.createTaskForm.updateCycle=e.updateCycle||"",this.createTaskForm.updateModel=e.updateModel||"",this.createTaskForm.updateTime=[e.validityTimeStart||"",e.validityTimeEnd||""],this.createTaskForm.exeType=e.exeType||"",this.createTaskForm.exeChannel=e.exeChannel||"",this.createTaskForm.blacklistObject=e.blacklistObject||"",this.createTaskForm.applicant=e.applicant||""},createTaskSave:function(){var e=this;console.log(this.createTaskForm,"this.createTaskForm");var t=!1;this.createTaskForm.listRelationPair.forEach((function(e){e.tagTargetId&&e.tagRecId||(t=!0)})),t?this.$message.warning("主体标签不能为空"):(this.createTaskForm.listRelationPair.forEach((function(a){var i=0;e.createTaskForm.listRelationPair.forEach((function(e){a.tagTargetId===e.tagTargetId&&a.tagRecId===e.tagRecId&&i++})),i>1&&(t=!0)})),t?this.$message.warning("关联关系对不能重复"):this.$refs["createTaskForm"].validate((function(t){if(!t)return!1;var a={menuType:e.createTaskForm.menuType,relationNumber:e.createTaskForm.relationNumber,relationName:e.createTaskForm.relationName,descibe:e.createTaskForm.descibe,listRelationPair:e.createTaskForm.listRelationPair,blacklist:e.createTaskForm.blacklist,recResultNumber:e.createTaskForm.recResultNumber,recEmpty:e.createTaskForm.recEmpty,updateCycle:e.createTaskForm.updateCycle,updateModel:e.createTaskForm.updateModel,updatePeriod:e.createTaskForm.updatePeriod,validityTimeStart:e.createTaskForm.updateTime[0],validityTimeEnd:e.createTaskForm.updateTime[1],targetId:e.createTaskForm.targetId,recId:e.createTaskForm.recId};"add"===e.type&&e.insertRecommendGenerateTask(a).then((function(t){console.log(t,"insertRecommendGenerateTask"),e.$message.success("新增成功"),e.$emit("operateStauts","success"),e.$emit("update:visible",!1)})).catch((function(t){t&&(e.$emit("operateStauts","fail"),e.$emit("update:visible",!1))})),"edit"===e.type&&(console.log(a,"params"),e.updateRecommendGenerateTask(a).then((function(t){console.log(t,"updateRecommendGenerateTask"),e.$message.success("编辑成功"),e.$emit("operateStauts","success"),e.$emit("update:visible",!1)})).catch((function(t){t&&(e.$emit("operateStauts","fail"),e.$emit("update:visible",!1))})))})))},createTaskDialogClose:function(){this.$emit("update:visible",!1)},delListRelationPair:function(e,t){console.log(e,t,"delListRelationPair"),this.createTaskForm.listRelationPair.splice(e,1)},addLabelSetup:function(){this.createTaskForm.listRelationPair.push({tagId:"",tagTargetId:"",tagRecId:"",tagTargetName:"",tagRecName:"",weight:"1"}),console.log(this.createTaskForm.listRelationPair," this.createTaskForm.listRelationPair")},downloadUpload:function(){Object(u["a"])("/blackList/downloadBlackListDemo")},uploadObject:function(e){console.log(e,"file"),"success"===e.status&&this.$message.success("上传成功"),"fail"===e.status&&this.$message.error("上传失败")},chooseHistory:function(){this.getFilterHistoryData(),this.filterHistoryDialogVisible=!0},filterHistorySelectData:function(e){this.filterHistoryMultipleData=e},filterHistorySelectSaveData:function(e){this.filterHistorySaveMultipleData=e},filterHistorySelectConfirm:function(){var e=[];this.filterHistoryMultipleData.forEach((function(t){e.push(t.BLACKNUMBER)})),this.createTaskForm.blacklist=e,console.log(this.createTaskForm.blacklist,"filterHistorySelectConfirm"),this.filterHistoryDialogVisible=!1},filterHistoryClose:function(){this.filterHistoryDialogVisible=!1},resultPreview:function(){this.createTaskForm.targetId&&this.createTaskForm.recId?this.createTaskForm.listRelationPair[0].tagTargetId&&this.createTaskForm.listRelationPair[0].tagRecId?(this.resultPreviewDialogType="preview",this.resultPreviewDialogVisible=!0):this.$message.warning("请设置关联主体标签"):this.$message.warning("请选择关联关系")},getTargetIdOptions:function(){var e=this;this.selectTargetAndSecSubject({}).then((function(t){e.targetIdOptions=[],e.recIdOptions=[],t.forEach((function(t){e.targetIdOptions.push({name:t.tagobjName,value:t.tagobjId}),e.recIdOptions.push({name:t.tagobjName,value:t.tagobjId})}))}))},getTagTargetNameOptions:function(e){if(this.createTaskForm.listRelationPair.forEach((function(e){e.tagTargetId=""})),e){var t=this.recIdOptions;t.forEach((function(t){t.value===e?t.disabled=!0:t.disabled=!1})),this.recIdOptions=t}},getTagRecNameOptions:function(e){var t=this;this.createTaskForm.listRelationPair.forEach((function(e){e.tagRecId=""}));var a=this.targetIdOptions;this.targetIdOptions.forEach((function(t){t.value===e?t.disabled=!0:t.disabled=!1})),this.targetIdOptions=a,e&&this.selectSecSubjectDesc({recObjId:e}).then((function(e){t.tagRecNameOptions=[],e.forEach((function(e){t.tagRecNameOptions.push({name:e.tagName,value:e.tagId})}))}))},getBlacklistObjectOptions:function(){this.blacklistObjectOptions=[{name:"目标对象",value:"1"},{name:"推荐对象",value:"0"}]},getFilterHistoryData:function(e){var t=this;console.log(e,"val"),e?this.filterHistoryForSelect({relationNumber:this.createTaskForm.relationNumber,menuType:this.createTaskForm.menuType,objType:this.createTaskForm.blacklistObject}).then((function(e){var a=[];t.filterHistoryForm.historyField.forEach((function(e){a.push({prop:e,label:t.filterField(e)})})),t.filterHistoryColumnData=a,console.log(a,"filterHistoryColumnData "),t.filterHistoryData={tableData:Object(s["a"])(e.result),columnNameData:t.filterHistoryColumnData}})):this.filterHistoryForSelect({relationNumber:this.createTaskForm.relationNumber,menuType:this.createTaskForm.menuType,objType:this.createTaskForm.blacklistObject}).then((function(e){t.getHistoryFieldOptions(e.showField[1]),console.log(t.filterHistoryColumnData,"dbcolumnName"),t.filterHistoryData={tableData:Object(s["a"])(e.result),columnNameData:t.filterHistoryColumnData}}))},getHistoryFieldOptions:function(e){var t=this;this.filterHistoryColumnData=[],this.filterHistoryForm.historyField=[],this.historyFieldOptions=e.map((function(e){return e.isKey&&(t.filterHistoryForm.keyValue=e.dbcolumnName,t.filterHistoryForm.keyName=e.dbcolumnAS),{name:e.dbcolumnTitle,value:e.dbcolumnAS}})),this.filterHistoryForm.historyField.push(this.filterHistoryForm.keyName),this.filterHistoryColumnData.push({prop:this.filterHistoryForm.keyName,label:this.filterField(this.filterHistoryForm.keyName)})},getFilterHistorySaveData:function(){var e=this;this.$nextTick((function(){e.filterHistorySaveData={tableData:[{object:"用电客户",objectNumber:"0306003723",objectName:"张三",filterMatter:"无",filterTime:"2020.10.30 23:00:00",filterPerson:"张三"},{object:"用电客户",objectNumber:"0306003723",objectName:"张三",filterMatter:"无",filterTime:"2020.10.30 23:00:00",filterPerson:"张三"},{object:"用电客户",objectNumber:"0306003723",objectName:"张三",filterMatter:"无",filterTime:"2020.10.30 23:00:00",filterPerson:"张三"},{object:"用电客户",objectNumber:"0306003723",objectName:"张三",filterMatter:"无",filterTime:"2020.10.30 23:00:00",filterPerson:"张三"},{object:"用电客户",objectNumber:"0306003723",objectName:"张三",filterMatter:"无",filterTime:"2020.10.30 23:00:00",filterPerson:"张三"}],columnNameData:[{prop:"object",label:"对象"},{prop:"objectNumber",label:"对象编号"},{prop:"objectName",label:"对象名称"},{prop:"filterMatter",label:"过滤事件"},{prop:"filterTime",label:"过滤时间"},{prop:"filterPerson",label:"过滤操作人"}]}}))},getUpdateModelOptions:function(){this.updateModelOptions=[{name:"全量更新",value:"0"},{name:"增量更新",value:"1"}]},filterField:function(e){var t=Object(s["a"])(this.historyFieldOptions),a="";return t.forEach((function(t){t.value===e&&(a=t.name)})),a},dealWeek:function(e,t){var a="";return"save"===e&&"2"===this.createTaskForm.updateCycle?a=this.updateDetail+"^^"+this.updateWeek:"back"===e?(a=t,this.updateDetail=t.split("^^")[0]||"",this.updateWeek=t.split("^^")[1]||""):a=this.updateDetail,a}}},g=p,m=(a("b85d"),a("2877")),b=Object(m["a"])(g,i,l,!1,null,"a7e59b06",null);t["default"]=b.exports},"0a6a":function(e,t,a){"use strict";var i=a("e01e"),l=a.n(i);l.a},1380:function(e,t,a){"use strict";a.r(t);var i=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"marketingActivityAllocation"},[a("div",{staticClass:"header"},[a("el-input",{staticClass:"input",attrs:{size:"small",placeholder:"请输入活动标签"},model:{value:e.queryForm.hdbq,callback:function(t){e.$set(e.queryForm,"hdbq","string"===typeof t?t.trim():t)},expression:"queryForm.hdbq"}}),a("el-input",{staticClass:"input",attrs:{size:"small",placeholder:"请输入营销活动内容关键词"},model:{value:e.queryForm.idtypeKey,callback:function(t){e.$set(e.queryForm,"idtypeKey","string"===typeof t?t.trim():t)},expression:"queryForm.idtypeKey"}}),a("el-button",{attrs:{size:"small",type:"primary"},on:{click:e.getTableData}},[e._v("查询")]),a("el-button",{attrs:{size:"small",type:"primary"},on:{click:e.clickAdd}},[e._v("新增营销活动")])],1),a("div",{staticClass:"content"},[a("el-table",{staticClass:"content-table",attrs:{border:"",data:e.tableData,height:500,"row-class-name":e.tableRowClassName}},[a("el-table-column",{attrs:{label:"序号",align:"center",type:"index",width:"70"}}),a("el-table-column",{attrs:{prop:"hdmc",label:"营销活动名称",width:"120"}}),a("el-table-column",{attrs:{prop:"hdmd",label:"营销活动目的"}}),a("el-table-column",{attrs:{prop:"hdnr",label:"营销活动内容"}}),a("el-table-column",{attrs:{prop:"yxhdbq",label:"活动分类标签"}}),a("el-table-column",{attrs:{prop:"sjywj",label:"设计源文件",width:"120"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("span",{staticClass:"text",attrs:{type:"text"},on:{click:function(a){return e.importFile(t.row.hdbh)}}},[e._v("导出源文件")])]}}])}),a("el-table-column",{attrs:{prop:"tplj",label:"图片",width:"100"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("span",{staticClass:"text",attrs:{type:"text"},on:{click:function(a){return e.importImg(t.row.hdbh)}}},[e._v("导出图片")])]}}])}),a("el-table-column",{attrs:{align:"center",width:"120",label:"操作"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("span",{staticClass:"text",attrs:{type:"text"},on:{click:function(a){return e.exportContent(t.row.hdbh)}}},[e._v("导出活动内容")])]}}])}),a("el-table-column",{attrs:{prop:"czsj",label:"创建时间",width:"120"}}),a("el-table-column",{attrs:{prop:"czr",label:"创建人",width:"120"}})],1),a("div",{staticClass:"content-page"},[a("el-pagination",{attrs:{"current-page":this.queryForm.current,"page-sizes":[10,20,30,40],"page-size":this.queryForm.size,layout:"total, sizes, prev, pager, next, jumper",total:this.queryForm.total},on:{"size-change":e.handleSizeChange,"current-change":e.handleCurrentChange}})],1)],1),a("el-dialog",{staticClass:"add-dialog",attrs:{title:"新增营销活动",visible:e.addDialogVisible,width:"80%",fullscreen:"","before-close":e.addDialogClose,"close-on-click-modal":!1,"close-on-press-escape":!1},on:{"update:visible":function(t){e.addDialogVisible=t}}},[a("span",{staticClass:"dialog-header",attrs:{slot:"title"},slot:"title"},[a("span",{staticClass:"header-text"},[e._v(e._s("新增营销活动"))])]),a("div",{staticClass:"dialog-pagination"},[a("el-row",{staticClass:"item",attrs:{gutter:20}},[a("el-col",{attrs:{span:4}},[a("div",{staticClass:"label"},[e._v("活动名称 ：")])]),a("el-col",{attrs:{span:18}},[a("el-input",{attrs:{type:"textarea",rows:2,placeholder:"请输入活动名称"},model:{value:e.addDialogForm.activeName,callback:function(t){e.$set(e.addDialogForm,"activeName",t)},expression:"addDialogForm.activeName"}})],1)],1),a("el-row",{staticClass:"item",attrs:{gutter:20}},[a("el-col",{attrs:{span:4}},[a("div",{staticClass:"label"},[e._v("活动目的 ：")])]),a("el-col",{attrs:{span:18}},[a("el-input",{attrs:{type:"textarea",rows:3,placeholder:"请输入活动目的"},model:{value:e.addDialogForm.activeObjective,callback:function(t){e.$set(e.addDialogForm,"activeObjective",t)},expression:"addDialogForm.activeObjective"}})],1)],1),a("el-row",{staticClass:"item",attrs:{gutter:20}},[a("el-col",{attrs:{span:4}},[a("div",{staticClass:"label"},[e._v("活动内容 ：")])]),a("el-col",{attrs:{span:18}},[a("el-input",{attrs:{type:"textarea",rows:4,placeholder:"请输入活动名称"},model:{value:e.addDialogForm.activeCon,callback:function(t){e.$set(e.addDialogForm,"activeCon",t)},expression:"addDialogForm.activeCon"}})],1)],1),a("el-row",{staticClass:"item",attrs:{gutter:20}},[a("el-col",{attrs:{span:4}},[a("div",{staticClass:"label"},[e._v("活动有效期选择 ：")])]),a("el-col",{attrs:{span:18}},[a("el-date-picker",{staticStyle:{width:"100%"},attrs:{type:"date",placeholder:"选择日期",format:"yyyy 年 MM 月 dd 日","value-format":"yyyy-MM-dd"},model:{value:e.addDialogForm.activeYxq,callback:function(t){e.$set(e.addDialogForm,"activeYxq",t)},expression:"addDialogForm.activeYxq"}})],1)],1),a("el-row",{staticClass:"item",attrs:{gutter:20}},[a("el-col",{attrs:{span:4}},[a("div",{staticClass:"label"},[e._v("分类标签选择 ：")])]),a("el-col",{attrs:{span:18}},[a("div",{staticClass:"left"},[a("el-input",{staticStyle:{width:"calc(100% - 66px)"},attrs:{placeholder:"输入关键字进行过滤",size:"medium"},model:{value:e.filterText2,callback:function(t){e.filterText2=t},expression:"filterText2"}}),a("el-button",{attrs:{icon:"el-icon-search",size:"medium"},on:{click:function(t){return e.selectTree(e.filterText2)}}}),a("el-tree",{directives:[{name:"loading",rawName:"v-loading",value:e.treeLoading,expression:"treeLoading"},{name:"show",rawName:"v-show",value:!e.showSelectTree,expression:"!showSelectTree"}],ref:"tree",staticClass:"filter-tree",style:e.treeStyleObject,attrs:{"filter-node-method":e.filterNode,props:e.defaultProps,load:e.loadNode,"highlight-current":!0,"expand-on-click-node":!1,lazy:""},on:{"node-click":e.nodeClick},scopedSlots:e._u([{key:"default",fn:function(t){var i=t.node,l=t.data;return a("span",{staticClass:"custom-tree-node"},[a("span",["tagobj"===l.type?a("i",{staticClass:"el-icon-office-building"}):"index"===l.type?a("i",{staticClass:"el-icon-folder-opened"}):"tag"===l.type?a("i",{staticClass:"el-icon-price-tag"}):e._e(),e._v("\n                                  "+e._s(i.label)+"\n                              ")])])}}])}),a("el-tree",{directives:[{name:"loading",rawName:"v-loading",value:e.treeLoading,expression:"treeLoading"},{name:"show",rawName:"v-show",value:e.showSelectTree,expression:"showSelectTree"}],style:{treeStyleObject:e.treeStyleObject},attrs:{data:e.dataTree,"default-expand-all":"",props:e.defaultProps2,"expand-on-click-node":!1,"highlight-current":!0},on:{"node-click":e.nodeClick},scopedSlots:e._u([{key:"default",fn:function(t){var i=t.node,l=t.data;return a("span",{staticClass:"custom-tree-node"},[a("span",["tagobj"===l.type?a("i",{staticClass:"el-icon-office-building"}):"index"===l.type?a("i",{staticClass:"el-icon-folder-opened"}):"tag"===l.type?a("i",{staticClass:"el-icon-price-tag"}):e._e(),e._v("\n                                  "+e._s(i.label)+"\n                              ")])])}}])})],1),a("div",{staticClass:"right"},[a("div",{staticClass:"title"},[a("span",{staticStyle:{"margin-right":"20px"}},[e._v("已选标签名称")]),a("el-button",{attrs:{type:"warning",icon:"el-icon-delete",size:"small"},on:{click:e.delAllTag}},[e._v("全部清除")])],1),e._l(e.tagSelectList,(function(t){return a("el-tag",{key:t.tagId,staticClass:"tag"},[e._v(e._s(t.tagName)),a("span",{staticClass:"el-icon-close closeTag",on:{click:function(a){return e.deleteTag(t)}}})])}))],2)])],1),a("div",{staticClass:"bottom"},[a("el-row",{staticClass:"item",attrs:{gutter:20}},[a("el-col",{attrs:{span:12}},[a("el-upload",{staticClass:"upload-demo",attrs:{action:e.uploadFileUrl,"on-remove":e.handleRemove,"on-success":e.handleAvatarSuccessFile,multiple:"",limit:1,"on-exceed":e.handleExceed,"file-list":e.fileList}},[a("el-button",{attrs:{size:"small",type:"primary"}},[e._v("上传设计源文件")])],1)],1),a("el-col",{attrs:{span:12}},[a("el-upload",{staticClass:"upload-demo",attrs:{action:e.uploadImgUrl,"on-remove":e.handleRemove,"on-success":e.handleAvatarSuccessImg,multiple:"",limit:1,"on-exceed":e.handleExceed,"file-list":e.imgList}},[a("el-button",{attrs:{size:"small",type:"primary"}},[e._v("上传活动图片")])],1)],1)],1)],1)],1),a("span",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[a("el-button",{attrs:{size:"small",type:"primary"},on:{click:e.addData}},[e._v("确认")]),a("el-button",{attrs:{size:"small",type:"warning"},on:{click:e.addDialogClose}},[e._v("关闭")])],1)])],1)},l=[],s=(a("7f7f"),a("ac6a"),a("6ed3")),o=a("80f2"),r=a("db49"),n={name:"marketingActivityAllocation",components:{},mixins:[s["a"],o["a"]],props:{},data:function(){return{queryForm:{hdbq:"",idtypeKey:"",current:1,size:10,total:0},tableData:[],addDialogVisible:!1,addDialogData:[],addDialogForm:{activeName:"",activeCon:"",activeObjective:"",activeYxq:"",current:1,size:10,total:0},defaultProps:{children:"children",label:"text",isLeaf:"leaf"},defaultProps2:{children:"children",label:"text"},filterText2:"",treeLoading:!1,showSelectTree:!1,dataTree:[],node:[],resolve:[],numb:1,treeStyleObject:{maxHeight:"400px",minHeight:"300px",overflow:"scroll"},tagSelectList:[],imgList:[],uploadImgUrl:"",imgUrl:"",fileList:[],uploadFileUrl:"",fileUrl:""}},created:function(){},mounted:function(){this.uploadFileUrl=r["c"]+"/cptYxhdjbxx/uploadYFile",this.uploadImgUrl=r["c"]+"/cptYxhdjbxx/uploadPhoto",this.getTableData()},methods:{tableRowClassName:function(e){e.row;var t=e.rowIndex;return t%2===0?"success-row":""},handleSizeChange:function(e){this.queryForm.size=e,this.getTableData()},handleCurrentChange:function(e){this.queryForm.current=e,this.getTableData()},clickAdd:function(e){this.addDialogVisible=!0},addDialogClose:function(){this.addDialogVisible=!1},addDialogSizeChange:function(e){this.addDialogForm.size=e,this.getAddDialogData()},addDialogCurrentChange:function(e){this.addDialogForm.current=e,this.getAddDialogData()},exportContent:function(e){window.location.href=r["c"]+"/cptYxhdjbxx/exportHdNr?hdbh="+e},getTableData:function(){var e=this;this.getXcyxActive({hdbq:this.queryForm.hdbq,hdnr:this.queryForm.idtypeKey,size:this.queryForm.size,current:this.queryForm.current}).then((function(t){e.queryForm.total=t.total,e.tableData=t.list,window.console.log(t,"ttt")}))},getAddDialogData:function(){},selectTree:function(e){var t=this;this.treeLoading=!0;var a="";""!=e&&null!=e?(a=e,this.showSelectTree=!0,this.value=""):(this.showSelectTree=!1,a=this.value,this.filterText2=""),this.node.childNodes=[],this.getBdaTagList({keyword:a,id:0}).then((function(e){t.dataTree=e,t.treeLoading=!1,t.resolve(t.dataTree)})).catch((function(){}))},filterNode:function(e,t){return!e||-1!==t.text.indexOf(e)},loadNode:function(e,t){var a=this;1===this.numb&&(this.node=e,this.resolve=t,this.node.childNodes=[],this.numb++),this.dataTree=[];var i=this;if(e.data)e.data.type?this.getBdaTagList({id:e.data.entryId,type:e.data.type,tagobjId:r["j"]}).then((function(e){i.dataTree=e,i.dataTree.forEach((function(e){"tag"==e.type&&(e.leaf=!0)})),a.treeLoading=!1,t(i.dataTree)})).catch((function(){})):t([]);else{var l={tagobjId:r["j"]};this.treeLoading=!0,this.getBdaTagList(l).then((function(e){i.options=e;for(var l=0;l<e.length;l++)e[l].disabled=!0;a.dataTree=e,a.treeLoading=!1,t(a.dataTree)})).catch((function(){}))}},nodeClick:function(e){if("tag"===e.type){if(0===this.tagSelectList.length)return void this.tagSelectList.push({tagName:e.name,tagId:e.entryId});for(var t=0;t<this.tagSelectList.length;t++)if(this.tagSelectList[t].tagId===e.entryId)return void this.$message.success("当前标签以经存在");this.tagSelectList.push({tagName:e.name,tagId:e.entryId})}},deleteTag:function(e){this.tagSelectList=this.tagSelectList.filter((function(t){if(t.tagId!==e.tagId)return t}))},delAllTag:function(){this.tagSelectList=[]},handleRemove:function(e,t){window.console.log(e,t)},handleExceed:function(e,t){this.$message.warning("当前限制选择 1 个文件，本次选择了 ".concat(e.length," 个文件，共选择了 ").concat(e.length+t.length," 个文件"))},handleAvatarSuccessFile:function(e,t){this.fileUrl=t.response.data},handleAvatarSuccessImg:function(e,t){this.imgUrl=t.response.data},addData:function(){var e=this;if(this.tagSelectList.length<1)this.$message.warning("请选择标签");else{for(var t=[],a=[],i=0;i<this.tagSelectList.length;i++)t.push(this.tagSelectList[i].tagId),a.push(this.tagSelectList[i].tagName);this.addXcyxActive({hdmc:this.addDialogForm.activeName,hdmd:this.addDialogForm.activeObjective,hdnr:this.addDialogForm.activeCon,hdyxq:this.addDialogForm.activeYxq,yxhdbq:a.join(),yxhdbqId:t.join(),sjywj:this.fileUrl,tplj:this.imgUrl}).then((function(t){e.$message.success(t),e.getTableData(),e.addDialogVisible=!1}))}},importFile:function(e){window.location.href=r["c"]+"/cptYxhdjbxx/downYFile?hdbh="+e},importImg:function(e){window.location.href=r["c"]+"/cptYxhdjbxx/downPhoto?hdbh="+e}}},c=n,u=(a("3a0c"),a("2877")),d=Object(u["a"])(c,i,l,!1,null,"24a76d5a",null);t["default"]=d.exports},"177d":function(e,t,a){"use strict";a.r(t);var i=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"taskExecutionMonitoring"},[a("div",{staticClass:"right"},[a("div",{staticClass:"right-content"},[a("bdaTable",{staticClass:"content-table",attrs:{tableData:e.taskData,headerColor:e.taskHeaderColor,indexWidth:0,isPage:!0,pageConfig:e.pageConfig},on:{operate:e.taskOperate,changePage:e.changePage}})],1),e.resultDialogVisible?a("resultPreviewDialog",{attrs:{showData:e.resultDialogData,visible:e.resultDialogVisible,type:e.resultDialogType},on:{"update:visible":function(t){e.resultDialogVisible=t}}}):e._e()],1)])},l=[],s=(a("8e6e"),a("ac6a"),a("456d"),a("2909")),o=a("ade3"),r=a("c286"),n=a("f9fe"),c=a("2595");function u(e,t){var a=Object.keys(e);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);t&&(i=i.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),a.push.apply(a,i)}return a}function d(e){for(var t=1;t<arguments.length;t++){var a=null!=arguments[t]?arguments[t]:{};t%2?u(Object(a),!0).forEach((function(t){Object(o["a"])(e,t,a[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(a)):u(Object(a)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(a,t))}))}return e}var h={components:{bdaTable:n["a"],resultPreviewDialog:c["default"]},name:"taskExecutionMonitoring",mixins:[r["a"]],watch:{filterText:function(e){this.$refs.tree.filter(e)}},props:{menuType:{type:String,default:""}},data:function(){return{filterText:"",treeData:[],defaultProps:{children:"children",label:"label"},taskData:{},taskHeaderColor:"",queryForm:{current:1,size:10},pageConfig:{current:1,size:10,pageSizes:[10,20,30,40],layout:"prev, pager, next, sizes,jumper,total",total:0},resultDialogVisible:!1,resultDialogType:"",resultDialogData:[]}},mounted:function(){this.getTaskData()},methods:{nodeClick:function(e,t){console.log(e,t,"obj, node")},taskOperate:function(e,t){console.log(e,t),"executeResult"===e?(this.resultDialogType="executeResult",this.resultDialogData=t,this.resultDialogVisible=!0):(this.runExecute(t),this.resultDialogVisible=!1)},changePage:function(e){this.queryForm.size=e.size,this.queryForm.current=e.current,this.getTaskData()},filterNode:function(e,t){return console.log(e,t,"value, data"),!e||-1!==t.label.indexOf(e)},getTaskData:function(){var e=this;this.taskHeaderColor="#1899fa";var t=[{prop:"relationNumber",label:"关系编号"},{prop:"relationName",label:"关联关系名称"},{prop:"descibe",label:"关联关系描述"},{prop:"updateCycle",label:"更新周期"},{prop:"createTime",label:"创建时间"},{prop:"updateTime",label:"更新时间"},{prop:"executeStartTime",label:"执行开始时间"},{prop:"executeEndTime",label:"执行完成时间"},{prop:"state",label:"执行状态",width:"100px"},{prop:"Operate",label:"操作",align:"center",width:"200px",type:[{name:"立即执行",action:"execute"},{name:"执行结果查看",action:"executeResult"}]}];this.getTaskExecuteMonitor(d({menuType:this.menuType},this.queryForm)).then((function(a){e.pageConfig.total=a.total,e.pageConfig.size=e.queryForm.size,e.pageConfig.current=e.queryForm.current,e.taskData={tableData:Object(s["a"])(a.list),columnNameData:t}}))},runExecute:function(e){var t=this;this.runTask({relationNumber:e.relationNumber}).then((function(e){t.$message.success("正在执行中")}))}}},p=h,g=(a("180b"),a("2877")),m=Object(g["a"])(p,i,l,!1,null,"6fa69668",null);t["default"]=m.exports},"17fb":function(e,t,a){},"180b":function(e,t,a){"use strict";var i=a("823e"),l=a.n(i);l.a},"1ac5":function(e,t,a){"use strict";var i=a("5a8e"),l=a.n(i);l.a},2595:function(e,t,a){"use strict";a.r(t);var i=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"result-preview-dialog"},[this.visible?a("el-dialog",{staticClass:"dialog",attrs:{title:"提示",visible:this.visible,width:"70%","before-close":e.handleClose,"close-on-click-modal":!1,"close-on-press-escape":!1},on:{"update:visible":function(t){return e.$set(this,"visible",t)}}},[a("span",{staticClass:"dialog-header",attrs:{slot:"title"},slot:"title"},[a("el-row",{staticStyle:{display:"flex","align-items":"center"}},[a("el-col",{attrs:{span:4}},[a("span",{staticClass:"header-text"},[e._v(e._s(e.isPreview?"推荐结果预览":"推荐关联关系"))])]),"histroy"===e.type?a("el-col",{staticStyle:{display:"flex","align-items":"center"},attrs:{span:9}},[a("span",{staticStyle:{width:"100px"}},[e._v("更新时间：")]),a("el-date-picker",{attrs:{type:"date",size:"mini","value-format":"yyyy-MM-dd","range-separator":"至","start-placeholder":"开始日期","end-placeholder":"结束日期"},model:{value:e.time,callback:function(t){e.time=t},expression:"time"}})],1):e._e()],1)],1),a("div",{staticClass:"dialog-content"},[e.isPreview?e._e():a("div",{staticClass:"dialog-content-top"},[a("div",{staticClass:"dialog-table"},[e.labelRelationRes?a("el-table",{staticClass:"dialog-table",staticStyle:{width:"100%",height:"100%"},attrs:{data:e.labelRelationData,height:"187px",border:"","header-cell-style":e.headStyle}},[a("el-table-column",{attrs:{type:"index",label:"关联序号",width:"100px"}}),a("el-table-column",{attrs:{prop:"tagTargetName",label:"目标对象名称"}}),a("el-table-column",{attrs:{prop:"tagRecName",label:"推荐对象名称"}}),a("el-table-column",{attrs:{prop:"weight",label:"权重",width:"200"}})],1):a("div",{staticClass:"no-data"},[a("span",[e._v("暂无数据")])])],1),a("el-pagination",{staticClass:"dialog-pagination",attrs:{"current-page":e.labelForm.current,"page-sizes":[10,20,30,40],"page-size":e.labelForm.size,layout:" prev, pager, next, sizes,jumper,total",total:e.labelForm.total},on:{"size-change":e.labelSizeChange,"current-change":e.labelCurrentChange}})],1),a("div",{directives:[{name:"loading",rawName:"v-loading",value:e.loading,expression:"loading"}],staticClass:"dialog-content-bottom"},[e.isPreview?e._e():a("div",{staticClass:"dialog-title"},[a("span",{staticClass:"text"},[e._v("推荐结果预览")])]),a("div",{staticClass:"dialog-search"},[a("el-form",{staticClass:"dialog-form",attrs:{model:e.resultForm,"label-width":"160px"}},[a("el-row",[a("el-col",{attrs:{span:9}},[a("el-form-item",{attrs:{label:"目标对象显示字段：",prop:"targetSubjectField"}},[a("el-select",{staticClass:"input",attrs:{size:"mini",multiple:"",placeholder:"请选择","collapse-tags":""},model:{value:e.resultForm.targetSubjectField,callback:function(t){e.$set(e.resultForm,"targetSubjectField",t)},expression:"resultForm.targetSubjectField"}},e._l(e.targetSubjectFieldOptions,(function(e){return a("el-option",{key:e.value,attrs:{label:e.name,value:e.value}})})),1)],1)],1),a("el-col",{attrs:{span:9}},[a("el-form-item",{attrs:{label:"推荐对象显示字段：",prop:"recommendedSubjectField"}},[a("el-select",{staticClass:"input",attrs:{size:"mini",multiple:"",placeholder:"请选择","collapse-tags":""},model:{value:e.resultForm.recommendedSubjectField,callback:function(t){e.$set(e.resultForm,"recommendedSubjectField",t)},expression:"resultForm.recommendedSubjectField"}},e._l(e.recommendedSubjectFieldOptions,(function(e){return a("el-option",{key:e.value,attrs:{label:e.name,value:e.value}})})),1)],1)],1)],1),a("el-row",[a("el-col",{attrs:{span:9}},[a("el-form-item",{attrs:{label:this.filterField(this.resultForm.targetKeyName)+"：",prop:"targetSearchText"}},[a("el-input",{staticClass:"input",attrs:{size:"mini",placeholder:"请输入"},model:{value:e.resultForm.targetSearchText,callback:function(t){e.$set(e.resultForm,"targetSearchText",t)},expression:"resultForm.targetSearchText"}})],1)],1),a("el-col",{attrs:{span:9}},[a("el-form-item",{attrs:{label:this.filterField(this.resultForm.recKeyName)+"：",prop:"recommendSearchText"}},[a("el-input",{staticClass:"input",attrs:{size:"mini",placeholder:"请输入"},model:{value:e.resultForm.recommendSearchText,callback:function(t){e.$set(e.resultForm,"recommendSearchText",t)},expression:"resultForm.recommendSearchText"}})],1)],1),a("el-col",{attrs:{span:6}},[a("el-form-item",{attrs:{label:"","label-width":"0px"}},[a("el-button",{attrs:{type:"primary",size:"mini"},on:{click:e.searchResultPreviewData}},[e._v("搜索")])],1)],1)],1)],1)],1),a("div",{staticClass:"dialog-table",style:{height:e.isPreview?"345px":"187px"}},[e.resultPreviewRes?a("el-table",{attrs:{data:e.resultPreviewData,border:"",height:e.isPreview?"342px":"187px","header-cell-style":e.headStyle,"cell-style":e.timeStyle},on:{"selection-change":e.handleSelectionChange}},[e.isSelect&&0!==e.resultPreviewData.length?a("el-table-column",{attrs:{type:"selection",width:"55"}}):e._e(),e._l(e.columnData,(function(t,i){return a("el-table-column",{key:i,attrs:{prop:t.prop,label:t.label,width:t.width,align:t.align?t.align:"left"},scopedSlots:e._u([{key:"default",fn:function(i){return["Operate"===t.prop?a("div",{staticClass:"operate"},e._l(t.type,(function(t,l){return a("el-button",{key:l,attrs:{type:"text"},on:{click:function(a){return e.operate(t.action,i.row)}}},[e._v(e._s(t.name))])})),1):a("div",{staticClass:"text"},[a("span",[e._v(e._s(i.row[t.prop]))])])]}}],null,!0)},[e._v("\n              >\n              ")])}))],2):e._e()],1),a("el-pagination",{staticClass:"dialog-pagination",attrs:{"current-page":e.resultForm.current,"page-sizes":[10,20,30,40],"page-size":e.resultForm.size,layout:" prev, pager, next, sizes,jumper,total",total:e.resultForm.total},on:{"size-change":e.resultSizeChange,"current-change":e.resultCurrentChange}})],1)]),a("span",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},["executeEntry"===e.type?a("el-button",{attrs:{type:"primary"},on:{click:e.entry}},[e._v("录入")]):e._e(),e.isNeedConfirm?a("el-button",{attrs:{type:"primary"},on:{click:e.comfirm}},[e._v("校验通过")]):e._e(),a("el-button",{on:{click:e.handleClose}},[e._v("关闭")])],1)]):e._e()],1)},l=[],s=(a("8e6e"),a("456d"),a("7f7f"),a("ac6a"),a("2909")),o=a("ade3"),r=a("c286");function n(e,t){var a=Object.keys(e);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);t&&(i=i.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),a.push.apply(a,i)}return a}function c(e){for(var t=1;t<arguments.length;t++){var a=null!=arguments[t]?arguments[t]:{};t%2?n(Object(a),!0).forEach((function(t){Object(o["a"])(e,t,a[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(a)):n(Object(a)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(a,t))}))}return e}var u={components:{},mixins:[r["a"]],props:{visible:{type:Boolean,default:function(){return!1}},showData:{type:Object,default:function(){return{}}},type:{type:String,default:function(){return""}},isNeedConfirm:{type:Boolean,default:function(){return!1}},isSelect:{type:Boolean,default:function(){return!1}}},data:function(){return{isSupervision:!1,isEntry:!1,isPreview:!1,time:"",loading:!0,queryData:{},dialogRes:!1,dialogHeaderColor:"",resultForm:{targetSubjectField:"",recommendedSubjectField:"",targetSearchText:"",recommendSearchText:"",targetKey:"",recKey:"",targetKeyName:"",recKeyName:"",current:1,size:10,total:500},selectionData:[],columnData:[],headStyle:{background:"#189afb"},targetSubjectFieldOptions:[],recommendedSubjectFieldOptions:[],resultPreviewData:[],resultPreviewRes:!0,labelForm:{current:1,size:10,total:0},targetSubjectLabelOptions:[],recommendedSubjectLabelOptions:[],labelRelationData:[],labelRelationRes:!1}},watch:{type:function(){this.typeDeal()}},mounted:function(){this.typeDeal(),this.getTargetSubjectLabelOptions(),this.getRecommendedSubjectLabelOptions()},methods:{timeStyle:function(e){return e.columnIndex<this.columnData.filter((function(e){return e.differColor})).length?"background-color: #e3f7f3":"background-color: #fffaeb"},typeDeal:function(){console.log(this.type,"this.type"),"executeEntry"!==this.type&&"executeResultShow"!==this.type||(this.isEntry=!0),"executeSupervision"===this.type&&(this.isSupervision=!0),"preview"===this.type?(this.isPreview=!0,this.dataInitPreview()):(this.isPreview=!1,this.dataInitResult(),this.getLabelRelationData())},dataInitPreview:function(){var e=this,t=c(c({},this.showData),{},{current:this.resultForm.current,size:this.resultForm.size});this.queryData=c({},t),this.resultPreview({current:t.current,size:t.size,recId:t.recId,targetId:t.targetId,recTagId:t.listRelationPair[0].tagRecId,targetTagId:t.listRelationPair[0].tagTargetId}).then((function(t){e.resultForm.total=t.page.total,e.getTargetSubjectFieldOptions(t.showField[1]),e.getRecommendedSubjectFieldOptions(t.showField[0]),console.log(e.columnData,"dbcolumnName"),e.resultPreviewData=Object(s["a"])(t.result),e.loading=!1})).catch((function(t){t&&(e.loading=!1)}))},dataInitResult:function(){var e=this;console.log(this.showData,"this.showData");var t=c(c({},this.showData),{},{current:this.resultForm.current,size:this.resultForm.size});this.queryData=c({},t);var a={current:t.current,size:t.size,relationNumber:t.relationNumber,exeType:this.isEntry?t.exeType:"",version:this.time,callType:this.isSupervision?"2":"1"};this.resultCrate(a).then((function(t){e.resultForm.total=t.page.total,e.getTargetSubjectFieldOptions(t.showField[1]),e.getRecommendedSubjectFieldOptions(t.showField[0]),console.log(e.columnData,"dbcolumnName"),e.isEntry&&e.columnData.push({prop:"IS_REDER",label:"是否被读取",differColor:!1},{prop:"EXE_TIME",label:"执行时间",differColor:!1}),e.isSupervision&&e.columnData.push({prop:"REQUEST_NUM",label:"读取次数",differColor:!1},{prop:"USE_NUM",label:"来电次数",differColor:!1}),e.resultPreviewData=Object(s["a"])(t.result),e.loading=!1})).catch((function(t){t&&(e.loading=!1)}))},searchResultPreviewData:function(){this.isPreview?this.getPreviewData():this.getResultData()},handleSelectionChange:function(e){this.selectionData=e},searchLabelRelationData:function(){},resultSizeChange:function(e){this.resultForm.size=e,this.isPreview?this.getPreviewData():this.getResultData()},resultCurrentChange:function(e){this.resultForm.current=e,this.isPreview?this.getPreviewData():this.getResultData()},labelSizeChange:function(e){this.labelForm.size=e,this.getLabelRelationData()},labelCurrentChange:function(e){this.labelForm.current=e,this.getLabelRelationData()},entry:function(){var e=this,t=this.selectionData.map((function(t){return{targetValue:t[e.resultForm.targetKeyName],recValue:t[e.resultForm.recKeyName]}}));this.resultReadUpdate({previewRequestList:t}).then((function(t){e.$message.info(t)}))},comfirm:function(){var e=this;this.dialogRes=!1,this.updateCheckState({relationNumber:this.queryData.relationNumber,checkState:this.queryData.checkStateId}).then((function(t){e.$message.success("校验完成"),e.$emit("update:visible",!1)})).catch((function(t){t&&e.$emit("update:visible",!1)}))},handleClose:function(){this.dialogRes=!1,this.$emit("update:visible",!1)},getPreviewData:function(){var e=this;this.resultPreviewRes=!1,this.loading=!0,this.resultPreview({current:this.resultForm.current,size:this.resultForm.size,recId:this.queryData.recId,targetId:this.queryData.targetId,recTagId:this.queryData.listRelationPair[0].tagRecId,targetTagId:this.queryData.listRelationPair[0].tagTargetId,targetKey:this.resultForm.targetKey,recKey:this.resultForm.recKey,recValue:this.resultForm.recommendSearchText,targetValue:this.resultForm.targetSearchText}).then((function(t){console.log(t),e.resultForm.total=t.page.total,console.log(e.resultForm.targetSubjectField,"targetSubjectField"),console.log(e.resultForm.recommendedSubjectField,"recommendedSubjectField");var a=[];e.resultForm.targetSubjectField.forEach((function(t){a.push({prop:t,label:e.filterField(t),differColor:!0})})),e.resultForm.recommendedSubjectField.forEach((function(t){a.push({prop:t,label:e.filterField(t)})})),e.columnData=a,e.resultPreviewData=Object(s["a"])(t.result),e.loading=!1,e.resultPreviewRes=!0})).catch((function(t){t&&(e.loading=!1,e.resultPreviewRes=!0)}))},getResultData:function(){var e=this;this.resultPreviewRes=!1,this.loading=!0;var t={current:this.resultForm.current,size:this.resultForm.size,relationNumber:this.queryData.relationNumber,targetKey:this.resultForm.targetKey,recKey:this.resultForm.recKey,recValue:this.resultForm.recommendSearchText,targetValue:this.resultForm.targetSearchText,version:this.time,exeType:this.isEntry?this.queryData.exeType:"",callType:this.isSupervision?"2":"1"};this.resultCrate(t).then((function(t){e.resultForm.total=t.page.total,console.log(e.resultForm.targetSubjectField,"targetSubjectField"),console.log(e.resultForm.recommendedSubjectField,"recommendedSubjectField");var a=[];e.resultForm.targetSubjectField.forEach((function(t){a.push({prop:t,label:e.filterField(t),differColor:!0})})),e.resultForm.recommendedSubjectField.forEach((function(t){a.push({prop:t,label:e.filterField(t)})})),e.columnData=a,e.resultPreviewData=Object(s["a"])(t.result),e.loading=!1,e.resultPreviewRes=!0})).catch((function(t){t&&(e.loading=!1,e.resultPreviewRes=!0)}))},filterField:function(e){var t=[].concat(Object(s["a"])(this.targetSubjectFieldOptions),Object(s["a"])(this.recommendedSubjectFieldOptions)),a="";return t.forEach((function(t){t.value===e&&(a=t.name)})),a},getTargetSubjectFieldOptions:function(e){var t=this;this.targetSubjectFieldOptions=e.map((function(e){return e.isKey&&(t.resultForm.targetKey=e.dbcolumnName,t.resultForm.targetKeyName=e.dbcolumnAS),{name:e.dbcolumnTitle,value:e.dbcolumnAS}})),this.resultForm.targetSubjectField.push(this.resultForm.targetKeyName),this.columnData.push({prop:this.resultForm.targetKeyName,label:this.filterField(this.resultForm.targetKeyName),differColor:!0})},getRecommendedSubjectFieldOptions:function(e){var t=this;this.recommendedSubjectFieldOptions=e.map((function(e){return e.isKey&&(t.resultForm.recKey=e.dbcolumnName,t.resultForm.recKeyName=e.dbcolumnAS),{name:e.dbcolumnTitle,value:e.dbcolumnAS}})),this.resultForm.recommendedSubjectField.push(this.resultForm.recKeyName),this.columnData.push({prop:this.resultForm.recKeyName,label:this.filterField(this.resultForm.recKeyName),differColor:!1})},getTargetSubjectLabelOptions:function(){this.targetSubjectLabelOptions=[{name:"经常投诉客户",value:"001"},{name:"经常点赞客户",value:"002"}]},getRecommendedSubjectLabelOptions:function(){this.recommendedSubjectLabelOptions=[{name:"擅长处理投诉客户的坐席",value:"001"},{name:"不擅长处理投诉客户的坐席",value:"002"}]},getLabelRelationData:function(){var e=this;console.log(this.queryData,"this.queryData"),this.labelRelationRes=!1,this.recommendationCorrelation(c({tagId:this.queryData.tagId},this.labelForm)).then((function(t){e.labelForm.total=t.total,e.labelRelationData=Object(s["a"])(t.records),e.labelRelationRes=!0}))}}},d=u,h=(a("97ad"),a("2877")),p=Object(h["a"])(d,i,l,!1,null,"3f864e95",null);t["default"]=p.exports},"2e82":function(e,t,a){},"34c2":function(e,t,a){"use strict";var i=a("d1f8"),l=a.n(i);l.a},"3a0c":function(e,t,a){"use strict";var i=a("7d8f"),l=a.n(i);l.a},"3c4c":function(e,t,a){},4186:function(e,t,a){},"41de":function(e,t,a){"use strict";var i=a("17fb"),l=a.n(i);l.a},4287:function(e,t,a){"use strict";a.r(t);var i=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"auditManagement"},[a("div",{staticClass:"content"},[a("bdaTable",{staticClass:"content-table",attrs:{tableData:e.taskData,headerColor:e.taskHeaderColor,indexWidth:0,isPage:!0,pageConfig:e.pageConfig},on:{operate:e.taskOperate,changePage:e.changePage}})],1),e.resultDialogVisible?a("resultPreviewDialog",{attrs:{visible:e.resultDialogVisible,type:e.resultDialogType,isNeedConfirm:e.isNeedConfirm,showData:e.resultDialogData},on:{"update:visible":function(t){e.resultDialogVisible=t}}}):e._e(),a("el-dialog",{staticClass:"task-dialog",attrs:{title:"提示",visible:e.taskDialogVisible,"before-close":e.taskDialogClose,"close-on-click-modal":!1,"close-on-press-escape":!1},on:{"update:visible":function(t){e.taskDialogVisible=t}}},[a("div",{staticClass:"dialog-header",attrs:{slot:"title"},slot:"title"},[a("span",{staticClass:"header-text"},[e._v(e._s("任务信息"))])]),a("div",{staticClass:"dialog-content"},[a("el-form",{staticClass:"task-form",attrs:{model:e.taskForm,"label-width":"160px"}},[a("el-row",[a("el-col",{attrs:{span:18}},[a("el-form-item",{attrs:{label:"执行方式：",prop:"exeType"}},[a("el-select",{staticClass:"input",staticStyle:{width:"100%"},attrs:{size:"mini",disabled:e.executeCheck,placeholder:"请选择"},model:{value:e.taskForm.exeType,callback:function(t){e.$set(e.taskForm,"exeType",t)},expression:"taskForm.exeType"}},e._l(e.exeTypeOptions,(function(e){return a("el-option",{key:e.value,attrs:{label:e.name,value:e.value}})})),1)],1)],1)],1),a("el-row",[a("el-col",{attrs:{span:18}},[a("el-form-item",{attrs:{label:"执行渠道：",prop:"exeChannel"}},[a("el-select",{staticClass:"input",staticStyle:{width:"100%"},attrs:{size:"mini",disabled:e.executeCheck,placeholder:"请选择"},model:{value:e.taskForm.exeChannel,callback:function(t){e.$set(e.taskForm,"exeChannel",t)},expression:"taskForm.exeChannel"}},e._l(e.exeChannelOptions,(function(e){return a("el-option",{key:e.value,attrs:{label:e.name,value:e.value}})})),1)],1)],1)],1)],1)],1),a("span",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[e.executeCheck?a("el-button",{attrs:{size:"mini"},on:{click:e.taskDialogClose}},[e._v("\n        "+e._s("确定")+"\n      ")]):a("el-button",{attrs:{type:"primary",size:"mini"},on:{click:e.submitApproval}},[e._v("提交审批")])],1)])],1)},l=[],s=(a("8e6e"),a("ac6a"),a("456d"),a("2909")),o=a("ade3"),r=a("c286"),n=a("f9fe"),c=a("2595");function u(e,t){var a=Object.keys(e);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);t&&(i=i.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),a.push.apply(a,i)}return a}function d(e){for(var t=1;t<arguments.length;t++){var a=null!=arguments[t]?arguments[t]:{};t%2?u(Object(a),!0).forEach((function(t){Object(o["a"])(e,t,a[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(a)):u(Object(a)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(a,t))}))}return e}var h={components:{bdaTable:n["a"],resultPreviewDialog:c["default"]},name:"auditManagement",mixins:[r["a"]],watch:{filterText:function(e){this.$refs.tree.filter(e)}},props:{menuType:{type:String,default:""}},data:function(){return{taskData:{},taskHeaderColor:"",queryForm:{current:1,size:10,total:0},pageConfig:{current:1,size:10,pageSizes:[10,20,30,40],layout:"prev, pager, next, sizes,jumper,total",total:0},resultDialogVisible:!1,resultDialogType:"",resultDialogData:{},taskDialogVisible:!1,taskForm:{relationNumber:"",exeType:"",exeChannel:""},exeTypeOptions:[],exeChannelOptions:[],executeCheck:!1,isNeedConfirm:!1}},mounted:function(){this.getTaskData(),this.getexeTypeOptions(),this.getexeChannelOptions()},methods:{taskOperate:function(e,t){console.log(e,t),"histroy"===e&&(this.resultDialogType="histroy",this.resultDialogData=t,this.isNeedConfirm=!1,this.resultDialogVisible=!0),"executeResult"===e&&(this.resultDialogType="executeResult",this.resultDialogData=t,this.isNeedConfirm=!0,this.resultDialogVisible=!0),"set"===e&&(this.taskForm.relationNumber=t.relationNumber,this.executeCheck=!1,this.taskForm.exeType="",this.taskForm.exeChannel="",this.taskDialogVisible=!0),"detail"===e&&(this.executeCheck=!0,this.taskForm.relationNumber=t.relationNumber,this.checkTaskDetail())},taskDialogClose:function(){this.taskDialogVisible=!1},submitApproval:function(){var e=this;this.saveTaskVerification(this.taskForm).then((function(t){e.$message.success("提交成功"),e.taskDialogVisible=!1}))},checkTaskDetail:function(){var e=this;this.getTaskDetailInfo({relationNumber:this.taskForm.relationNumber}).then((function(t){e.taskForm.exeType=t.exeType,e.taskForm.exeChannel=t.exeChannel,e.taskDialogVisible=!0}))},changePage:function(e){this.queryForm.size=e.size,this.queryForm.current=e.current,this.getTaskData()},getTaskData:function(){var e=this;this.taskHeaderColor="#1899fa";var t=[{prop:"relationName",label:"关联关系名称"},{prop:"updateTime",label:"任务更新时间"},{prop:"Operate",label:"历史匹配查看",align:"center",width:"140px",type:[{name:"详细结果",action:"histroy"}]},{prop:"executeEndTime",label:"执行完成时间"},{prop:"checkState",label:"执行申请状态",width:"140px"},{prop:"Operate",label:"操作",align:"center",width:"310px",type:[{name:"查看执行结果",action:"executeResult"},{name:"任务执行配置",action:"set"},{name:"任务详细信息",action:"detail"}]}];this.getTaskVerification(d(d({},this.queryForm),{},{menuType:this.menuType})).then((function(a){e.pageConfig.total=a.total,e.pageConfig.size=e.queryForm.size,e.pageConfig.current=e.queryForm.current,e.taskData={tableData:Object(s["a"])(a.list),columnNameData:t}})).catch((function(a){a&&(e.taskData={tableData:[],columnNameData:t})}))},getexeTypeOptions:function(){this.exeTypeOptions=[{name:"自动执行",value:"1"},{name:"手工执行",value:"0"}]},getexeChannelOptions:function(){this.exeChannelOptions=[{name:"智能IVR",value:"智能IVR"},{name:"语音平台",value:"语音平台"},{name:"短信平台",value:"短信平台"}]}}},p=h,g=(a("0a6a"),a("2877")),m=Object(g["a"])(p,i,l,!1,null,"54b97955",null);t["default"]=m.exports},"4cb8":function(e,t,a){"use strict";a.r(t);var i=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"lelationalPolicyLibrary"},[a("div",{staticClass:"header"},[a("el-select",{staticClass:"select",attrs:{size:"small",placeholder:"请选择营销活动标签",filterable:"",clearable:""},model:{value:e.queryForm.yxhdbq,callback:function(t){e.$set(e.queryForm,"yxhdbq",t)},expression:"queryForm.yxhdbq"}},e._l(e.yxhdbqOptions,(function(e){return a("el-option",{key:e.value,attrs:{label:e.label,value:e.value}})})),1),a("el-select",{staticClass:"select",attrs:{size:"small",placeholder:"请选择用户编号标签",filterable:"",clearable:""},model:{value:e.queryForm.yhbhbq,callback:function(t){e.$set(e.queryForm,"yhbhbq",t)},expression:"queryForm.yhbhbq"}},e._l(e.yhbhbqOptions,(function(e){return a("el-option",{key:e.value,attrs:{label:e.label,value:e.value}})})),1),a("el-button",{attrs:{size:"small",type:"primary"},on:{click:e.getTableData}},[e._v("查询")]),a("el-button",{attrs:{size:"small",type:"primary"},on:{click:e.clickAdd}},[e._v("新增关联关系")])],1),a("div",{staticClass:"content"},[a("el-table",{staticClass:"content-table",attrs:{border:"",data:e.tableData,height:500,"row-class-name":e.tableRowClassName}},[a("el-table-column",{attrs:{label:"序号",align:"center",type:"index",width:"70"}}),a("el-table-column",{attrs:{prop:"ykid",label:"关系编号"}}),a("el-table-column",{attrs:{prop:"yxhdbq",label:"营销活动标签"}}),a("el-table-column",{attrs:{prop:"yhbhbq",label:"用户编号标签"}}),a("el-table-column",{attrs:{prop:"zdtjjgs",label:"最大推荐结果数"}}),a("el-table-column",{attrs:{prop:"tjjgwks",label:"推荐结果为空时"},scopedSlots:e._u([{key:"default",fn:function(t){return[e._v(e._s("1"===t.row.tjjgwks?"随机分配":"不处理"))]}}])}),a("el-table-column",{attrs:{prop:"cjsj",label:"创建时间"}}),a("el-table-column",{attrs:{prop:"gxsj",label:"更新时间"}}),a("el-table-column",{attrs:{align:"center",width:"200",label:"操作"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("span",{staticClass:"text",staticStyle:{"margin-right":"10px"},attrs:{type:"text"},on:{click:function(a){return e.clickEdit(t.row)}}},[e._v("编辑任务")]),a("span",{staticClass:"text",attrs:{type:"text"},on:{click:function(a){return e.clickCheck(t.row)}}},[e._v("查看推荐生成结果")])]}}])})],1),a("div",{staticClass:"content-page"},[a("el-pagination",{attrs:{"current-page":this.queryForm.current,"page-sizes":[10,20,30,40],"page-size":this.queryForm.size,layout:"total, sizes, prev, pager, next, jumper",total:this.queryForm.total},on:{"size-change":e.handleSizeChange,"current-change":e.handleCurrentChange}})],1)],1),a("el-dialog",{staticClass:"add-dialog",attrs:{title:"新增关联关系",visible:e.addDialogVisible,width:"80%","before-close":e.addDialogClose,"close-on-click-modal":!1,"close-on-press-escape":!1},on:{"update:visible":function(t){e.addDialogVisible=t}}},[a("span",{staticClass:"dialog-header",attrs:{slot:"title"},slot:"title"},[a("span",{staticClass:"header-text"},[e._v(e._s(e.addDialogTitle))])]),a("el-form",{ref:"addDialogForm",staticClass:"addDialog-form",attrs:{model:e.addDialogForm,"label-width":"130px"}},[a("div",{staticClass:"form-item"},[a("div",{staticClass:"form-title"},[e._v(e._s("关联标签设置:"))]),a("div",{staticClass:"form-content"},[a("el-table",{staticClass:"content-table",attrs:{border:"",data:e.addDialogForm.labelList}},[a("el-table-column",{attrs:{prop:"tagTargetId",label:"营销活动的标签"},scopedSlots:e._u([{key:"default",fn:function(t){return[e._v(e._s(t.row?"":t.row)+"\n                  "),a("el-select",{staticStyle:{width:"80%",padding:"10px"},attrs:{size:"mini",filterable:"",clearable:"",placeholder:"请选择"},model:{value:e.addDialogForm.tagSource,callback:function(t){e.$set(e.addDialogForm,"tagSource",t)},expression:"addDialogForm.tagSource"}},e._l(e.yxhdbqOptions,(function(e){return a("el-option",{key:e.value,attrs:{label:e.label,value:e.value}})})),1)]}}])}),a("el-table-column",{attrs:{prop:"tagRecId",label:"用户编号的标签"},scopedSlots:e._u([{key:"default",fn:function(t){return[e._v(e._s(t.row?"":t.row)+"\n                  "),a("el-select",{staticStyle:{width:"80%",padding:"10px"},attrs:{size:"mini",filterable:"",clearable:"",placeholder:"请选择"},model:{value:e.addDialogForm.tagTarget,callback:function(t){e.$set(e.addDialogForm,"tagTarget",t)},expression:"addDialogForm.tagTarget"}},e._l(e.yhbhbqOptions,(function(e){return a("el-option",{key:e.value,attrs:{label:e.label,value:e.value}})})),1)]}}])})],1)],1)]),a("div",{staticClass:"form-item"},[a("div",{staticClass:"form-title"},[e._v(e._s("推荐结果设置:"))]),a("div",{staticClass:"form-content",staticStyle:{border:"1px solid #ebeef5"}},[a("el-form-item",{attrs:{label:"最大推荐结果数:"}},[a("el-input-number",{staticClass:"input",staticStyle:{width:"200px"},attrs:{min:1,max:1e6,size:"mini"},model:{value:e.addDialogForm.recResultNumber,callback:function(t){e.$set(e.addDialogForm,"recResultNumber",t)},expression:"addDialogForm.recResultNumber"}})],1),a("el-form-item",{attrs:{label:"推荐结果为空时:"}},[a("el-radio-group",{model:{value:e.addDialogForm.recEmpty,callback:function(t){e.$set(e.addDialogForm,"recEmpty",t)},expression:"addDialogForm.recEmpty"}},[a("el-radio",{attrs:{label:"0"}},[e._v("不处理")]),a("el-radio",{attrs:{label:"1"}},[e._v("随机分配")])],1),a("span",{staticClass:"tip"},[e._v(e._s("（当目标对象无具体推荐对象时，给目标对象随机分配主体内的对象）"))])],1)],1)])]),a("div",{staticClass:"dialog-pagination"}),a("span",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[a("el-button",{attrs:{size:"small",type:"primary"},on:{click:e.addDialogConfirm}},[e._v("确定")]),a("el-button",{attrs:{size:"small"},on:{click:e.addDialogClose}},[e._v("关闭")])],1)],1),a("el-dialog",{staticClass:"check-dialog",attrs:{title:"推荐生成结果",visible:e.checkDialogVisible,width:"80%","before-close":e.checkDialogClose,"close-on-click-modal":!1,"close-on-press-escape":!1},on:{"update:visible":function(t){e.checkDialogVisible=t}}},[a("span",{staticClass:"dialog-header",attrs:{slot:"title"},slot:"title"},[a("span",{staticClass:"header-text"},[e._v(e._s("推荐生成结果"))])]),a("div",{staticClass:"query-group"},[a("div",{staticClass:"search"},[a("el-input",{staticClass:"input",attrs:{size:"small",placeholder:"请输入营销活动"},model:{value:e.checkDialogForm.yxhdmc,callback:function(t){e.$set(e.checkDialogForm,"yxhdmc","string"===typeof t?t.trim():t)},expression:"checkDialogForm.yxhdmc"}}),a("el-input",{staticClass:"input",attrs:{size:"small",placeholder:"请输入用户编号"},model:{value:e.checkDialogForm.yhbhmc,callback:function(t){e.$set(e.checkDialogForm,"yhbhmc","string"===typeof t?t.trim():t)},expression:"checkDialogForm.yhbhmc"}}),a("el-select",{staticClass:"select",attrs:{size:"small",filterable:"",clearable:"",placeholder:"请选择营销活动标签"},model:{value:e.checkDialogForm.yxhdbq,callback:function(t){e.$set(e.checkDialogForm,"yxhdbq",t)},expression:"checkDialogForm.yxhdbq"}},e._l(e.yxhdbqOptions,(function(e){return a("el-option",{key:e.value,attrs:{label:e.label,value:e.value}})})),1),a("el-select",{staticClass:"select",attrs:{filterable:"",clearable:"",size:"small",placeholder:"请选择用户编号标签"},model:{value:e.checkDialogForm.yhbhbq,callback:function(t){e.$set(e.checkDialogForm,"yhbhbq",t)},expression:"checkDialogForm.yhbhbq"}},e._l(e.yhbhbqOptions,(function(e){return a("el-option",{key:e.value,attrs:{label:e.label,value:e.value}})})),1),a("el-button",{attrs:{size:"small",type:"primary"},on:{click:e.getCheckDialogData}},[e._v("查询")])],1)]),a("el-table",{staticClass:"dialog-table",attrs:{border:"",data:e.checkDialogData,height:400,"row-class-name":e.tableRowClassName}},[a("el-table-column",{attrs:{prop:"yxhdbq",label:"营销活动编号"}}),a("el-table-column",{attrs:{prop:"yxhdmc",label:"营销活动名称"}}),a("el-table-column",{attrs:{prop:"yhmc",label:"用户名称"}}),a("el-table-column",{attrs:{prop:"yhbhbq",label:"用户编号"}})],1),a("div",{staticClass:"dialog-pagination"},[a("el-pagination",{attrs:{"current-page":this.checkDialogForm.current,"page-sizes":[10,20,30,40],"page-size":this.checkDialogForm.size,layout:"total, sizes, prev, pager, next, jumper",total:this.checkDialogForm.total},on:{"size-change":e.checkDialogSizeChange,"current-change":e.checkDialogCurrentChange}})],1),a("span",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[a("el-button",{attrs:{size:"small"},on:{click:e.checkDialogClose}},[e._v("关闭")])],1)],1)],1)},l=[],s=a("2909"),o=a("6ed3"),r=a("80f2"),n=a("db49"),c={name:"lelationalPolicyLibrary",components:{},mixins:[o["a"],r["a"]],props:{},data:function(){return{queryForm:{yxhdbq:"",yhbhbq:"",current:1,size:10,total:0},yxhdbqOptions:[],yhbhbqOptions:[],listId:"",tableData:[],addDialogVisible:!1,addDialogTitle:"新增关联关系",addDialogData:[],addDialogForm:{tagSource:"",tagTarget:"",labelList:[{}],recResultNumber:"",recEmpty:"",current:1,size:10,total:0},tagSourceOptions:[],tagTargetOptions:[],checkDialogVisible:!1,checkDialogData:[],checkDialogForm:{yxhdmc:"",yhbhmc:"",yxhdbq:"",yhbhbq:"",current:1,size:10,total:0},ykid:""}},mounted:function(){this.getTableData(),this.getGddwOptions(),this.getYxhdOptions()},methods:{tableRowClassName:function(e){e.row;var t=e.rowIndex;return t%2===0?"success-row":""},handleSizeChange:function(e){this.queryForm.size=e,this.getTableData()},handleCurrentChange:function(e){this.queryForm.current=e,this.getTableData()},clickAdd:function(){this.addDialogForm.tagSource="",this.addDialogForm.tagTarget="",this.addDialogForm.recResultNumber="",this.addDialogForm.recEmpty="",this.ykid="",this.addDialogTitle="新增关联关系",this.addDialogVisible=!0},addDialogClose:function(){this.addDialogVisible=!1},addDialogConfirm:function(){var e=this;if(this.addDialogForm.tagSource)if(this.addDialogForm.tagTarget){var t={yhbhbq:this.addDialogForm.tagTarget,yxhdbq:this.addDialogForm.tagSource,zdtjjgs:this.addDialogForm.recResultNumber,tjjgwks:this.addDialogForm.recEmpty};"编辑关联关系"===this.addDialogTitle?(t.ykid=this.ykid,this.updateYhbhStrategy(t).then((function(){e.addDialogVisible=!1,e.getTableData()}))):this.addYhbhStrategy(t).then((function(){e.addDialogVisible=!1,e.getTableData()}))}else this.$message.warning("用户编号标签");else this.$message.warning("营销活动标签")},clickEdit:function(e){this.addDialogForm.tagSource=e.yxhdbqId,this.addDialogForm.tagTarget=e.yhbhbqId,this.addDialogForm.recResultNumber=e.zdtjjgs,this.addDialogForm.recEmpty=e.tjjgwks,this.ykid=e.ykid,this.addDialogTitle="编辑关联关系",this.addDialogVisible=!0},clickCheck:function(e){this.listId=e.ykid,this.checkDialogForm.yhbhmc="",this.checkDialogForm.yhbhbq="",this.checkDialogForm.yxhdbq="",this.checkDialogForm.yxhdmc="",this.getCheckDialogData(),this.checkDialogVisible=!0},checkDialogClose:function(){this.checkDialogVisible=!1},checkDialogSizeChange:function(e){this.checkDialogForm.size=e,this.getCheckDialogData()},checkDialogCurrentChange:function(e){this.checkDialogForm.current=e,this.getCheckDialogData()},getTableData:function(){var e=this;this.getYhbhStrategy(this.queryForm).then((function(t){e.tableData=Object(s["a"])(t.records),e.queryForm.total=t.total}))},getCheckDialogData:function(){var e=this;this.getYhbhResult({ykid:this.listId,yhbh:this.checkDialogForm.yhbhmc,yhbhbq:this.checkDialogForm.yhbhbq,yxhdbq:this.checkDialogForm.yxhdbq,yxhdmc:this.checkDialogForm.yxhdmc,size:this.checkDialogForm.size,current:this.checkDialogForm.current}).then((function(t){e.checkDialogData=Object(s["a"])(t.records),e.checkDialogForm.total=t.total}))},getGddwOptions:function(){var e=this;this.getLabel({tagobjId:n["i"],gddwbq:""}).then((function(t){e.yhbhbqOptions=t.map((function(e){return{value:e.bqId,label:e.bqName}}))}))},getYxhdOptions:function(){var e=this;this.getLabel({tagobjId:n["j"],yxhdbq:""}).then((function(t){e.yxhdbqOptions=t.map((function(e){return{value:e.bqId,label:e.bqName}}))}))}}},u=c,d=(a("9101"),a("2877")),h=Object(d["a"])(u,i,l,!1,null,"b21d962e",null);t["default"]=h.exports},"4d3e":function(e,t,a){"use strict";var i=a("f747"),l=a.n(i);l.a},5072:function(e,t,a){"use strict";var i=a("0705"),l=a.n(i);l.a},5122:function(e,t,a){"use strict";var i=a("2e82"),l=a.n(i);l.a},5472:function(e,t,a){"use strict";a.r(t);var i=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"approvalTask"},[a("div",{staticClass:"header"},[a("el-input",{staticClass:"input",attrs:{size:"small",placeholder:"请输入营销活动内容关键词"},model:{value:e.queryForm.activityKeyword,callback:function(t){e.$set(e.queryForm,"activityKeyword","string"===typeof t?t.trim():t)},expression:"queryForm.activityKeyword"}}),a("el-button",{attrs:{size:"small",type:"primary"},on:{click:e.getTableData}},[e._v("查询")])],1),a("div",{staticClass:"content"},[a("el-table",{staticClass:"content-table",attrs:{border:"",data:e.tableData,height:500,"row-class-name":e.tableRowClassName}},[a("el-table-column",{attrs:{label:"序号",align:"center",type:"index",width:"70"}}),a("el-table-column",{attrs:{prop:"activityName",label:"营销活动名称"}}),a("el-table-column",{attrs:{align:"center",label:"推荐客户清单查看"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("span",{staticClass:"text",attrs:{type:"text"},on:{click:function(a){return e.clickCheck(t.row)}}},[e._v("点击查看")])]}}])}),a("el-table-column",{attrs:{prop:"executePlacePlan",label:"计划执行地点"}}),a("el-table-column",{attrs:{prop:"executeTimePlan",label:"计划执行时间"}}),a("el-table-column",{attrs:{prop:"applyUserName",label:"申请人"}}),a("el-table-column",{attrs:{align:"center",width:"200",label:"流程节点"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("el-button",{attrs:{type:"text",disabled:!e.isPermissions},on:{click:function(a){return e.clickSet(t.row)}}},[e._v("待审批")])]}}])})],1),a("div",{staticClass:"content-page"},[a("el-pagination",{attrs:{"current-page":this.queryForm.current,"page-sizes":[10,20,30,40],"page-size":this.queryForm.size,layout:"total, sizes, prev, pager, next, jumper",total:this.queryForm.total},on:{"size-change":e.handleSizeChange,"current-change":e.handleCurrentChange}})],1)],1),a("el-dialog",{staticClass:"check-dialog",attrs:{title:"推荐清单查看",visible:e.checkDialogVisible,width:"80%","before-close":e.checkDialogClose,"close-on-click-modal":!1,"close-on-press-escape":!1},on:{"update:visible":function(t){e.checkDialogVisible=t}}},[a("span",{staticClass:"dialog-header",attrs:{slot:"title"},slot:"title"},[a("span",{staticClass:"header-text"},[e._v(e._s("推荐清单查看"))])]),a("div",{staticClass:"query-group"},[a("div",{staticClass:"search"},[a("el-select",{staticClass:"select",attrs:{size:"small",clearable:"",placeholder:"请选择标签"},model:{value:e.checkDialogForm.tagId,callback:function(t){e.$set(e.checkDialogForm,"tagId",t)},expression:"checkDialogForm.tagId"}},e._l(e.labelOptions,(function(e){return a("el-option",{key:e.value,attrs:{label:e.label,value:e.value}})})),1),a("el-input",{staticClass:"input",attrs:{size:"small",placeholder:"请输入用户编号"},model:{value:e.checkDialogForm.yhbh,callback:function(t){e.$set(e.checkDialogForm,"yhbh","string"===typeof t?t.trim():t)},expression:"checkDialogForm.yhbh"}}),a("el-button",{attrs:{size:"small",type:"primary"},on:{click:e.getCheckDialogData}},[e._v("查询")])],1)]),a("el-table",{staticClass:"dialog-table",attrs:{border:"",data:e.checkDialogData,height:400,"row-class-name":e.tableRowClassName}},[a("el-table-column",{attrs:{prop:"yhbh",label:"用户编号"}}),a("el-table-column",{attrs:{prop:"yhmc",label:"用电客户名称"}}),a("el-table-column",{attrs:{prop:"yddz",label:"用户地址"}})],1),a("div",{staticClass:"dialog-pagination"},[a("el-pagination",{attrs:{"current-page":this.checkDialogForm.current,"page-sizes":[10,20,30,40],"page-size":this.checkDialogForm.size,layout:"total, sizes, prev, pager, next, jumper",total:this.checkDialogForm.total},on:{"size-change":e.checkDialogSizeChange,"current-change":e.checkDialogCurrentChange}})],1),a("span",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[a("el-button",{attrs:{size:"small"},on:{click:e.checkDialogClose}},[e._v("关闭")])],1)],1),a("el-dialog",{staticClass:"set-dialog",attrs:{title:"推荐审批",visible:e.aduitDialogVisible,width:"40%","before-close":e.aduitDialogClose,"close-on-click-modal":!1,"close-on-press-escape":!1},on:{"update:visible":function(t){e.aduitDialogVisible=t}}},[a("span",{staticClass:"dialog-header",attrs:{slot:"title"},slot:"title"},[a("span",{staticClass:"header-text"},[e._v(e._s("推荐审批"))])]),a("el-form",{staticClass:"aduitDialog-form",attrs:{model:e.aduitDialogForm,"label-width":"150px"}},[a("el-form-item",{attrs:{label:"审批意见"}},[a("el-select",{staticClass:"input",attrs:{size:"small",placeholder:"请选择审批意见"},model:{value:e.aduitDialogForm.approvalFlag,callback:function(t){e.$set(e.aduitDialogForm,"approvalFlag",t)},expression:"aduitDialogForm.approvalFlag"}},e._l(e.approvalFlagOptions,(function(e){return a("el-option",{key:e.value,attrs:{label:e.label,value:e.value}})})),1)],1),a("el-form-item",{attrs:{label:"审批备注"}},[a("el-input",{staticClass:"input",attrs:{size:"small",type:"textarea",rows:"5",resize:"none",placeholder:"请输入审批备注"},model:{value:e.aduitDialogForm.approvalCommend,callback:function(t){e.$set(e.aduitDialogForm,"approvalCommend",t)},expression:"aduitDialogForm.approvalCommend"}})],1)],1),a("span",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[a("el-button",{attrs:{type:"primary",size:"small"},on:{click:e.aduitDialogConfirm}},[e._v("提交")]),a("el-button",{attrs:{size:"small"},on:{click:e.aduitDialogClose}},[e._v("关闭")])],1)],1)],1)},l=[],s=(a("8e6e"),a("ac6a"),a("456d"),a("2909")),o=a("ade3"),r=a("6ed3"),n=a("db49");function c(e,t){var a=Object.keys(e);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);t&&(i=i.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),a.push.apply(a,i)}return a}function u(e){for(var t=1;t<arguments.length;t++){var a=null!=arguments[t]?arguments[t]:{};t%2?c(Object(a),!0).forEach((function(t){Object(o["a"])(e,t,a[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(a)):c(Object(a)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(a,t))}))}return e}var d={name:"approvalTask",components:{},mixins:[r["a"]],props:{},data:function(){return{isPermissions:!1,queryForm:{applicationStatus:"",activityKeyword:"",current:1,size:10,total:0},applicationStatusOptions:[],listId:"",activityId:"",tableData:[],checkDialogVisible:!1,checkDialogData:[],checkDialogForm:{tagId:"",yhbh:"",current:1,size:10,total:0},labelOptions:[],aduitDialogVisible:!1,aduitDialogData:[],aduitDialogForm:{approvalFlag:"",approvalCommend:""},approvalFlagOptions:[{label:"同意",value:!0},{label:"不同意",value:!1}],zxrOptions:[]}},mounted:function(){this.checkPermissions(),this.getTableData()},methods:{tableRowClassName:function(e){e.row;var t=e.rowIndex;return t%2===0?"success-row":""},handleSizeChange:function(e){this.queryForm.size=e,this.getTableData()},handleCurrentChange:function(e){this.queryForm.current=e,this.getTableData()},clickCheck:function(e){this.listId=e.id,this.activityId=e.activityId,this.checkDialogForm.current=1,this.checkDialogForm.size=10,this.getLabelOptions(),this.getCheckDialogData(),this.checkDialogVisible=!0},checkDialogClose:function(){this.checkDialogVisible=!1},checkDialogSizeChange:function(e){this.checkDialogForm.size=e,this.getCheckDialogData()},checkDialogCurrentChange:function(e){this.checkDialogForm.current=e,this.getCheckDialogData()},clickSet:function(e){this.listId=e.id,this.aduitDialogVisible=!0},aduitDialogConfirm:function(){var e=this;this.approval(u(u({},this.aduitDialogForm),{},{id:this.listId})).then((function(t){e.$message.success(t),e.getTableData(),e.aduitDialogVisible=!1}))},aduitDialogClose:function(){this.aduitDialogVisible=!1},checkPermissions:function(){var e=this;this.hasApprovalPower().then((function(t){e.isPermissions=t,console.log(e.isPermissions," this.isPermissions")}))},getTableData:function(){var e=this;this.applyList(this.queryForm).then((function(t){e.tableData=Object(s["a"])(t.records),e.queryForm.total=t.total}))},getCheckDialogData:function(){var e=this;this.getRecommendCustomer(u(u({},this.checkDialogForm),{},{activityId:this.activityId})).then((function(t){e.checkDialogData=Object(s["a"])(t.records),e.checkDialogForm.total=t.total}))},getLabelOptions:function(){var e=this;this.getLabel({tagobjId:n["i"]}).then((function(t){0!==t.length&&(e.labelOptions=t.map((function(e){return{value:e.bqId,label:e.bqName}})))}))}}},h=d,p=(a("5122"),a("2877")),g=Object(p["a"])(h,i,l,!1,null,"6282e7af",null);t["default"]=g.exports},"5a8e":function(e,t,a){},"5c3a":function(e,t,a){},6228:function(e,t,a){},"69cc":function(e,t,a){"use strict";a.r(t);var i=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"taskManagement"},[a("div",{staticClass:"right"},[a("div",{staticClass:"right-button"},[a("el-button",{attrs:{type:"primary"},on:{click:e.createTask}},[e._v("新增推荐生成任务")])],1),a("div",{staticClass:"right-content"},[a("bdaTable",{staticClass:"content-table",attrs:{tableData:e.taskData,headerColor:e.taskHeaderColor,indexWidth:0,isPage:!0,pageConfig:e.pageConfig},on:{operate:e.taskOperate,changePage:e.changePage}})],1),a("el-dialog",{staticClass:"addNew-dialog",attrs:{title:e.addNewDialogTitle,visible:e.addNewDialogVisible,width:"70%","before-close":e.addNewDialogClose,"close-on-click-modal":!1,"close-on-press-escape":!1},on:{"update:visible":function(t){e.addNewDialogVisible=t}}},[a("span",{staticClass:"dialog-header",attrs:{slot:"title"},slot:"title"},[a("span",{staticClass:"header-text"},[e._v(e._s("新增"))])]),a("div",{staticClass:"dialog-content"},[a("el-form",{attrs:{"label-width":"120px"},model:{value:e.addNewForm,callback:function(t){e.addNewForm=t},expression:"addNewForm"}},[a("el-row",[a("el-col",{attrs:{span:8}},[a("el-form-item",{attrs:{label:"目录编码："}},[a("el-input",{staticClass:"input",attrs:{size:"mini"},model:{value:e.addNewForm.directoryCode,callback:function(t){e.$set(e.addNewForm,"directoryCode",t)},expression:"addNewForm.directoryCode"}})],1)],1),a("el-col",{attrs:{span:8}},[a("el-form-item",{attrs:{label:"目录级数："}},[a("el-input",{staticClass:"input",attrs:{size:"mini"},model:{value:e.addNewForm.directoryLevel,callback:function(t){e.$set(e.addNewForm,"directoryLevel",t)},expression:"addNewForm.directoryLevel"}})],1)],1),a("el-col",{attrs:{span:8}},[a("el-form-item",{attrs:{label:"目录排序号："}},[a("el-input",{staticClass:"input",attrs:{size:"mini"},model:{value:e.addNewForm.directorySort,callback:function(t){e.$set(e.addNewForm,"directorySort",t)},expression:"addNewForm.directorySort"}})],1)],1)],1),a("el-row",[a("el-col",{attrs:{span:24}},[a("el-form-item",{attrs:{label:"标签目录名称："}},[a("el-input",{staticClass:"input-row",attrs:{size:"mini"},model:{value:e.addNewForm.labelDirectoryName,callback:function(t){e.$set(e.addNewForm,"labelDirectoryName",t)},expression:"addNewForm.labelDirectoryName"}})],1)],1)],1),a("el-row",[a("el-col",{attrs:{span:24}},[a("el-form-item",{attrs:{label:"目录描述："}},[a("el-input",{staticClass:"input-row",attrs:{type:"textarea",rows:4,placeholder:"请输入内容"},model:{value:e.addNewForm.directoryDescription,callback:function(t){e.$set(e.addNewForm,"directoryDescription",t)},expression:"addNewForm.directoryDescription"}})],1)],1)],1)],1)],1),a("span",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[a("el-button",{attrs:{type:"primary"},on:{click:e.addNewSubmit}},[e._v("提交")])],1)]),e.createTaskDialogVisible?a("operateDialog",{attrs:{visible:e.createTaskDialogVisible,showData:e.createTaskDialogData,type:e.createTaskDialogType},on:{"update:visible":function(t){e.createTaskDialogVisible=t},operateStauts:e.operateStauts}}):e._e()],1)])},l=[],s=(a("8e6e"),a("456d"),a("7f7f"),a("2909")),o=(a("ac6a"),a("ade3")),r=a("c286"),n=a("f9fe"),c=a("0973");function u(e,t){var a=Object.keys(e);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);t&&(i=i.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),a.push.apply(a,i)}return a}function d(e){for(var t=1;t<arguments.length;t++){var a=null!=arguments[t]?arguments[t]:{};t%2?u(Object(a),!0).forEach((function(t){Object(o["a"])(e,t,a[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(a)):u(Object(a)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(a,t))}))}return e}var h={components:{bdaTable:n["a"],operateDialog:c["default"]},name:"taskManagement",mixins:[r["a"]],watch:{filterText:function(e){this.$refs.tree.filter(e)}},props:{menuType:{type:String,default:""}},data:function(){return{filterText:"",treeData:[],defaultProps:{children:"children",label:"label"},addNewDialogVisible:!1,addNewDialogTitle:"",addNewDialogStatus:"",addNewForm:{directoryCode:"",directoryLevel:"",directorySort:"",labelDirectoryName:"",directoryDescription:""},taskData:{},taskHeaderColor:"",queryForm:{current:1,size:10},pageConfig:{current:1,size:10,pageSizes:[10,20,30,40],layout:"prev, pager, next, sizes,jumper,total",total:0},createTaskDialogVisible:!1,createTaskDialogData:{},createTaskDialogType:"add",updateCycleOptions:[{name:"指定日期",value:"0"},{name:"日更新",value:"1"},{name:"周更新",value:"2"},{name:"月更新",value:"3"},{name:"年更新",value:"4"}]}},mounted:function(){this.getTreeData(),this.getTaskData()},methods:{nodeClick:function(e,t){console.log(e,t,"obj, node")},addNewDirectory:function(){this.addNewDialogTitle="新增目录",this.addNewDialogStatus="add",this.addNewDialogVisible=!0},editNewDirectory:function(e){e.currentTarget===e.target&&(this.addNewDialogTitle="编辑目录",this.addNewDialogStatus="edit",this.addNewDialogVisible=!0)},delNewDirectory:function(){},addNewSubmit:function(){},addNewDialogClose:function(){this.addNewDialogVisible=!1},operateStauts:function(){this.getTaskData()},changePage:function(e){this.queryForm.size=e.size,this.queryForm.current=e.current,this.getTaskData()},createTask:function(){this.createTaskDialogVisible=!0,this.createTaskDialogType="add"},taskOperate:function(e,t){console.log(e,t),this.createTaskDialogType=e,"edit"===e&&this.getTaskDetail(t),"detail"===e&&this.getTaskDetail(t),"delete"===e&&this.deleteTaskList(t)},deleteTaskList:function(e){var t=this;this.$confirm("是否删除该条数据?","提示",{confirmButtonText:"确定",cancelButtonText:"取消",closeOnClickModal:!1,closeOnPressEscape:!1,confirmButtonClass:"btnFalses",type:"warning"}).then((function(){t.deleteRecommendGenerateTask({relationNumber:e.relationNumber,tagId:e.tagId}).then((function(e){t.$message.success(e),t.queryForm.current=1,t.queryForm.size=10,t.getTaskData()}))})).catch((function(){}))},filterNode:function(e,t){return console.log(e,t,"value, data"),!e||-1!==t.label.indexOf(e)},getTreeData:function(){this.selectDirectoryNavigation({}).then((function(e){console.log(e,"selectDirectoryNavigation")})),this.treeData=[{id:1,label:"一级 1",icon:"el-icon-folder-opened",children:[{id:4,label:"二级 1-1",children:[{id:9,label:"三级 1-1-1"},{id:10,label:"三级 1-1-2"}]}]},{id:2,label:"一级 2",icon:"el-icon-folder-opened",children:[{id:5,label:"二级 2-1"},{id:6,label:"二级 2-2"}]},{id:3,label:"一级 3",icon:"el-icon-folder-opened",children:[{id:7,label:"二级 3-1"},{id:8,label:"二级 3-2"}]}]},getTaskData:function(){var e=this;this.taskHeaderColor="#1899fa";var t=[{prop:"relationNumber",label:"关系编号",width:120},{prop:"relationName",label:"关联关系名称"},{prop:"descibe",label:"关联关系描述"},{prop:"updateCycleName",label:"更新周期"},{prop:"createTime",label:"创建时间"},{prop:"updateTime",label:"更新时间"},{prop:"exeTime",label:"执行时间"},{prop:"Operate",label:"操作",align:"center",type:[{name:"编辑",action:"edit"},{name:"详情",action:"detail"},{name:"删除",action:"delete"}]}];this.selectRecommendGenerateTaskList(d(d({},this.queryForm),{},{menuType:this.menuType})).then((function(a){e.pageConfig.total=a.total,e.pageConfig.size=e.queryForm.size,e.pageConfig.current=e.queryForm.current,a.records.forEach((function(t){return t.updateCycleName=e.translate(t.updateCycle,e.updateCycleOptions)})),e.taskData={tableData:Object(s["a"])(a.records),columnNameData:t}})).catch((function(a){a&&(e.taskData={tableData:[],columnNameData:t})}))},getTaskDetail:function(e){var t=this;this.selectRecommendGenerateTaskDetail({relationNumber:e.relationNumber,targetId:e.targetId,recId:e.recId,tagId:e.tagId}).then((function(e){t.createTaskDialogData=e,t.createTaskDialogVisible=!0}))},translate:function(e,t){var a="";return t.forEach((function(t){t.value===e&&(a=t.name)})),a}}},p=h,g=(a("807c"),a("34c2"),a("2877")),m=Object(g["a"])(p,i,l,!1,null,"22db836d",null);t["default"]=m.exports},"6ffa":function(e,t,a){"use strict";a.r(t);var i=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"servicePolicyProcess"},[a("div",{staticClass:"header"},[a("el-select",{staticClass:"select",attrs:{size:"small",clearable:"",placeholder:"请选择执行申请状态"},model:{value:e.queryForm.status,callback:function(t){e.$set(e.queryForm,"status",t)},expression:"queryForm.status"}},e._l(e.statusOptions,(function(e){return a("el-option",{key:e.value,attrs:{label:e.label,value:e.value}})})),1),a("el-input",{staticClass:"input",attrs:{size:"small",placeholder:"请输入营销活动内容关键词"},model:{value:e.queryForm.activityKeyword,callback:function(t){e.$set(e.queryForm,"activityKeyword","string"===typeof t?t.trim():t)},expression:"queryForm.activityKeyword"}}),a("el-button",{attrs:{size:"small",type:"primary"},on:{click:e.getTableData}},[e._v("查询")])],1),a("div",{staticClass:"content"},[a("el-table",{staticClass:"content-table",attrs:{border:"",data:e.tableData,height:500,"row-class-name":e.tableRowClassName}},[a("el-table-column",{attrs:{label:"序号",align:"center",type:"index",width:"70"}}),a("el-table-column",{attrs:{prop:"activityName",label:"现场营销活动名称"}}),a("el-table-column",{attrs:{prop:"hdyxq",label:"营销活动有效期"}}),a("el-table-column",{attrs:{align:"center",label:"推荐客户清单查看"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("span",{staticClass:"text",attrs:{type:"text"},on:{click:function(a){return e.clickCheck(t.row)}}},[e._v("点击查看")])]}}])}),a("el-table-column",{attrs:{prop:"executePlacePlan",label:"计划执行地点"}}),a("el-table-column",{attrs:{prop:"executeTimePlan",label:"计划执行时间"}}),a("el-table-column",{attrs:{prop:"statusName",label:"执行申请状态"}}),a("el-table-column",{attrs:{align:"center",width:"200",label:"操作"},scopedSlots:e._u([{key:"default",fn:function(t){return["0"===t.row.status?a("span",{staticClass:"text",attrs:{type:"text"},on:{click:function(a){return e.clickSet(t.row)}}},[e._v("配置任务")]):e._e(),"1"===t.row.status?a("span",{staticClass:"text",attrs:{type:"text"},on:{click:function(a){return e.clickSubmit(t.row)}}},[e._v("提交申请")]):e._e()]}}])})],1),a("div",{staticClass:"content-page"},[a("el-pagination",{attrs:{"current-page":this.queryForm.current,"page-sizes":[10,20,30,40],"page-size":this.queryForm.size,layout:"total, sizes, prev, pager, next, jumper",total:this.queryForm.total},on:{"size-change":e.handleSizeChange,"current-change":e.handleCurrentChange}})],1)],1),a("el-dialog",{staticClass:"check-dialog",attrs:{title:"推荐清单查看",visible:e.checkDialogVisible,width:"80%","before-close":e.checkDialogClose,"close-on-click-modal":!1,"close-on-press-escape":!1},on:{"update:visible":function(t){e.checkDialogVisible=t}}},[a("span",{staticClass:"dialog-header",attrs:{slot:"title"},slot:"title"},[a("span",{staticClass:"header-text"},[e._v(e._s("推荐清单查看"))])]),a("div",{staticClass:"query-group"},[a("div",{staticClass:"search"},[a("el-select",{staticClass:"select",attrs:{size:"small",clearable:"",placeholder:"请选择标签"},model:{value:e.checkDialogForm.tagId,callback:function(t){e.$set(e.checkDialogForm,"tagId",t)},expression:"checkDialogForm.tagId"}},e._l(e.labelOptions,(function(e){return a("el-option",{key:e.value,attrs:{label:e.label,value:e.value}})})),1),a("el-input",{staticClass:"input",attrs:{size:"small",placeholder:"请输入用户编号"},model:{value:e.checkDialogForm.yhbh,callback:function(t){e.$set(e.checkDialogForm,"yhbh","string"===typeof t?t.trim():t)},expression:"checkDialogForm.yhbh"}}),a("el-button",{attrs:{size:"small",type:"primary"},on:{click:e.getCheckDialogData}},[e._v("查询")])],1)]),a("el-table",{directives:[{name:"loading",rawName:"v-loading",value:e.checkDialogDataLoading,expression:"checkDialogDataLoading"}],staticClass:"dialog-table",attrs:{border:"",data:e.checkDialogData,height:400,"row-class-name":e.tableRowClassName}},[a("el-table-column",{attrs:{prop:"yhbh",label:"用户编号"}}),a("el-table-column",{attrs:{prop:"yhmc",label:"用电客户名称"}}),a("el-table-column",{attrs:{prop:"yddz",label:"用户地址"}})],1),a("div",{staticClass:"dialog-pagination"},[a("el-pagination",{attrs:{"current-page":this.checkDialogForm.current,"page-sizes":[10,20,30,40],"page-size":this.checkDialogForm.size,layout:"total, sizes, prev, pager, next, jumper",total:this.checkDialogForm.total},on:{"size-change":e.checkDialogSizeChange,"current-change":e.checkDialogCurrentChange}})],1),a("span",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[a("el-button",{attrs:{size:"small"},on:{click:e.checkDialogClose}},[e._v("关闭")])],1)],1),a("el-dialog",{staticClass:"set-dialog",attrs:{title:"营销活动任务配置",visible:e.setDialogVisible,width:"40%","before-close":e.setDialogClose,"close-on-click-modal":!1,"close-on-press-escape":!1},on:{"update:visible":function(t){e.setDialogVisible=t}}},[a("span",{staticClass:"dialog-header",attrs:{slot:"title"},slot:"title"},[a("span",{staticClass:"header-text"},[e._v(e._s("营销活动任务配置"))])]),a("el-form",{staticClass:"setDialog-form",attrs:{model:e.setDialogForm,"label-width":"150px"}},[a("el-form-item",{attrs:{label:"活动计划执行地点"}},[a("el-input",{staticClass:"input",attrs:{size:"small",placeholder:"请输入活动计划执行地点"},model:{value:e.setDialogForm.executePlacePlan,callback:function(t){e.$set(e.setDialogForm,"executePlacePlan",t)},expression:"setDialogForm.executePlacePlan"}})],1),a("el-form-item",{attrs:{label:"活动计划执行时间"}},[a("el-date-picker",{staticClass:"input",attrs:{size:"small",type:"date","value-format":"yyyy-MM-dd",placeholder:"请选择时间"},model:{value:e.setDialogForm.executeTimePlan,callback:function(t){e.$set(e.setDialogForm,"executeTimePlan",t)},expression:"setDialogForm.executeTimePlan"}})],1)],1),a("span",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[a("el-button",{attrs:{type:"primary",size:"small"},on:{click:e.setDialogConfirm}},[e._v("确定")]),a("el-button",{attrs:{size:"small"},on:{click:e.setDialogClose}},[e._v("关闭")])],1)],1)],1)},l=[],s=(a("8e6e"),a("ac6a"),a("456d"),a("2909")),o=a("ade3"),r=a("db49"),n=a("6ed3");function c(e,t){var a=Object.keys(e);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);t&&(i=i.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),a.push.apply(a,i)}return a}function u(e){for(var t=1;t<arguments.length;t++){var a=null!=arguments[t]?arguments[t]:{};t%2?c(Object(a),!0).forEach((function(t){Object(o["a"])(e,t,a[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(a)):c(Object(a)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(a,t))}))}return e}var d={name:"servicePolicyProcess",components:{},mixins:[n["a"]],props:{},data:function(){return{queryForm:{status:"",activityKeyword:"",current:1,size:10,total:0},statusOptions:[{value:"0",label:"待配置"},{value:"1",label:"待申请"},{value:"2",label:"审批中"},{value:"3",label:"执行中"},{value:"4",label:"已关闭"}],tableData:[],listId:"",activityId:"",checkDialogDataLoading:!1,checkDialogVisible:!1,checkDialogData:[],checkDialogForm:{tagId:"",yhbh:"",current:1,size:10,total:0},labelOptions:[],setDialogVisible:!1,setDialogData:[],setDialogForm:{executePlacePlan:"",executeTimePlan:""}}},mounted:function(){this.getTableData()},methods:{tableRowClassName:function(e){e.row;var t=e.rowIndex;return t%2===0?"success-row":""},handleSizeChange:function(e){this.queryForm.size=e,this.getTableData()},handleCurrentChange:function(e){this.queryForm.current=e,this.getTableData()},clickCheck:function(e){this.listId=e.id,this.activityId=e.activityId,this.checkDialogForm.current=1,this.checkDialogForm.size=10,this.getLabelOptions(),this.getCheckDialogData(),this.checkDialogVisible=!0},checkDialogClose:function(){this.checkDialogVisible=!1},checkDialogSizeChange:function(e){this.checkDialogForm.size=e,this.getCheckDialogData()},checkDialogCurrentChange:function(e){this.checkDialogForm.current=e,this.getCheckDialogData()},clickSet:function(e){this.listId=e.id,this.setDialogVisible=!0},clickSubmit:function(e){var t=this;this.listId=e.id,this.commitApply({id:this.listId}).then((function(e){t.$message.success(e),t.getTableData()})).catch((function(){}))},setDialogConfirm:function(){var e=this;this.disposeActivityConfig(u(u({},this.setDialogForm),{},{id:this.listId})).then((function(t){e.$message.success(t),e.setDialogVisible=!1,e.getTableData()})).catch((function(){}))},setDialogClose:function(){this.setDialogVisible=!1},getTableData:function(){var e=this;this.getActivityConfig(this.queryForm).then((function(t){e.tableData=Object(s["a"])(t.records),e.queryForm.total=t.total}))},getCheckDialogData:function(){var e=this;this.checkDialogDataLoading=!0,this.getRecommendCustomer(u(u({},this.checkDialogForm),{},{activityId:this.activityId})).then((function(t){e.checkDialogData=Object(s["a"])(t.records),e.checkDialogForm.total=t.total})).finally((function(){e.checkDialogDataLoading=!1}))},getLabelOptions:function(){var e=this;this.getLabel({tagobjId:r["i"]}).then((function(t){0!==t.length&&(e.labelOptions=t.map((function(e){return{value:e.bqId,label:e.bqName}})))}))}}},h=d,p=(a("1ac5"),a("2877")),g=Object(p["a"])(h,i,l,!1,null,"b6291642",null);t["default"]=g.exports},"7d8f":function(e,t,a){},"7f13":function(e,t,a){"use strict";a.r(t);var i=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"taskExecutionSupervisionEvaluation"},[a("div",{staticClass:"header"},[a("el-input",{staticClass:"input",attrs:{size:"small",placeholder:"请输入营销活动内容关键词"},model:{value:e.queryForm.activityKeyword,callback:function(t){e.$set(e.queryForm,"activityKeyword","string"===typeof t?t.trim():t)},expression:"queryForm.activityKeyword"}}),a("el-button",{attrs:{size:"small",type:"primary"},on:{click:e.getTableData}},[e._v("查询")])],1),a("div",{staticClass:"content"},[a("el-table",{staticClass:"content-table",attrs:{border:"",data:e.tableData,height:500,"row-class-name":e.tableRowClassName}},[a("el-table-column",{attrs:{label:"序号",align:"center",type:"index",width:"70"}}),a("el-table-column",{attrs:{prop:"activityName",label:"营销活动名称"}}),a("el-table-column",{attrs:{align:"center",label:"计划参与活动的客户清单"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("span",{staticClass:"text",attrs:{type:"text"},on:{click:function(a){return e.clickCheck(t.row)}}},[e._v("查看")])]}}])}),a("el-table-column",{attrs:{prop:"executePlacePlan",label:"计划执行地点"}}),a("el-table-column",{attrs:{prop:"executeTimePlan",label:"计划执行时间"}}),a("el-table-column",{attrs:{prop:"updateTime",label:"完成时间"}}),a("el-table-column",{attrs:{align:"center",width:"200",label:"操作"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("span",{staticClass:"text",attrs:{type:"text"},on:{click:function(a){return e.clickDetail(t.row)}}},[e._v("查看参与活动客户明细")])]}}])})],1),a("div",{staticClass:"content-page"},[a("el-pagination",{attrs:{"current-page":this.queryForm.current,"page-sizes":[10,20,30,40],"page-size":this.queryForm.size,layout:"total, sizes, prev, pager, next, jumper",total:this.queryForm.total},on:{"size-change":e.handleSizeChange,"current-change":e.handleCurrentChange}})],1)],1),a("el-dialog",{staticClass:"check-dialog",attrs:{title:"推荐清单查看",visible:e.checkDialogVisible,width:"80%","before-close":e.checkDialogClose,"close-on-click-modal":!1,"close-on-press-escape":!1},on:{"update:visible":function(t){e.checkDialogVisible=t}}},[a("span",{staticClass:"dialog-header",attrs:{slot:"title"},slot:"title"},[a("span",{staticClass:"header-text"},[e._v(e._s("推荐清单查看"))])]),a("div",{staticClass:"query-group"},[a("div",{staticClass:"search"},[a("el-select",{staticClass:"select",attrs:{size:"small",clearable:"",placeholder:"请选择标签"},model:{value:e.checkDialogForm.tagId,callback:function(t){e.$set(e.checkDialogForm,"tagId",t)},expression:"checkDialogForm.tagId"}},e._l(e.labelOptions,(function(e){return a("el-option",{key:e.value,attrs:{label:e.label,value:e.value}})})),1),a("el-input",{staticClass:"input",attrs:{size:"small",placeholder:"请输入用户编号"},model:{value:e.checkDialogForm.yhbh,callback:function(t){e.$set(e.checkDialogForm,"yhbh","string"===typeof t?t.trim():t)},expression:"checkDialogForm.yhbh"}}),a("el-button",{attrs:{size:"small",type:"primary"},on:{click:e.getCheckDialogData}},[e._v("查询")])],1)]),a("el-table",{staticClass:"dialog-table",attrs:{border:"",data:e.checkDialogData,height:400,"row-class-name":e.tableRowClassName}},[a("el-table-column",{attrs:{prop:"yhbh",label:"用户编号"}}),a("el-table-column",{attrs:{prop:"yhmc",label:"用电客户名称"}}),a("el-table-column",{attrs:{prop:"yddz",label:"用户地址"}})],1),a("div",{staticClass:"dialog-pagination"},[a("el-pagination",{attrs:{"current-page":this.checkDialogForm.current,"page-sizes":[10,20,30,40],"page-size":this.checkDialogForm.size,layout:"total, sizes, prev, pager, next, jumper",total:this.checkDialogForm.total},on:{"size-change":e.checkDialogSizeChange,"current-change":e.checkDialogCurrentChange}})],1),a("span",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[a("el-button",{attrs:{size:"small"},on:{click:e.checkDialogClose}},[e._v("关闭")])],1)],1),a("el-dialog",{staticClass:"detail-dialog",attrs:{title:"参与活动客户标记",visible:e.detailDialogVisible,width:"80%","before-close":e.detailDialogClose,"close-on-click-modal":!1,"close-on-press-escape":!1},on:{"update:visible":function(t){e.detailDialogVisible=t}}},[a("span",{staticClass:"dialog-header",attrs:{slot:"title"},slot:"title"},[a("span",{staticClass:"header-text"},[e._v(e._s("参与活动客户标记"))])]),a("div",{staticClass:"query-group"},[a("div",{staticClass:"search"},[a("el-input",{staticClass:"input",attrs:{size:"small",placeholder:"请输入用户编号"},model:{value:e.detailDialogForm.yhbh,callback:function(t){e.$set(e.detailDialogForm,"yhbh","string"===typeof t?t.trim():t)},expression:"detailDialogForm.yhbh"}}),a("el-button",{attrs:{size:"small",type:"primary"},on:{click:e.getDetailDialogData}},[e._v("查询")])],1)]),a("el-table",{staticClass:"dialog-table",attrs:{border:"",data:e.detailDialogData,height:400,"row-class-name":e.tableRowClassName}},[a("el-table-column",{attrs:{prop:"yhbh",label:"用户编号"}}),a("el-table-column",{attrs:{prop:"yhmc",label:"用电客户名称"}}),a("el-table-column",{attrs:{prop:"yddz",label:"用户地址"}}),a("el-table-column",{attrs:{prop:"algorithm",label:"是否算法推荐用户"},scopedSlots:e._u([{key:"default",fn:function(t){return[e._v("\n          "+e._s("1"===t.row.algorithm?"是":"否")+"\n        ")]}}])}),a("el-table-column",{attrs:{prop:"operateTime",label:"操作时间"}})],1),a("div",{staticClass:"dialog-pagination"},[a("el-pagination",{attrs:{"current-page":this.detailDialogForm.current,"page-sizes":[10,20,30,40],"page-size":this.detailDialogForm.size,layout:"total, sizes, prev, pager, next, jumper",total:this.detailDialogForm.total},on:{"size-change":e.detailDialogSizeChange,"current-change":e.detailDialogCurrentChange}})],1),a("span",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[a("el-button",{attrs:{size:"small"},on:{click:e.detailDialogClose}},[e._v("关闭")])],1)],1)],1)},l=[],s=(a("8e6e"),a("ac6a"),a("456d"),a("ade3")),o=a("2909"),r=a("db49"),n=a("6ed3");function c(e,t){var a=Object.keys(e);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);t&&(i=i.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),a.push.apply(a,i)}return a}function u(e){for(var t=1;t<arguments.length;t++){var a=null!=arguments[t]?arguments[t]:{};t%2?c(Object(a),!0).forEach((function(t){Object(s["a"])(e,t,a[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(a)):c(Object(a)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(a,t))}))}return e}var d={name:"taskExecutionSupervisionEvaluation",components:{},mixins:[n["a"]],props:{},data:function(){return{queryForm:{status:"4",activityKeyword:"",current:1,size:10,total:0},tableData:[],checkDialogVisible:!1,checkDialogData:[{}],checkDialogForm:{tagId:"",yhbh:"",current:1,size:10,total:0},labelOptions:[],detailDialogVisible:!1,detailDialogData:[],detailDialogForm:{yhbh:"",current:1,size:10,total:0}}},mounted:function(){this.getTableData()},methods:{tableRowClassName:function(e){e.row;var t=e.rowIndex;return t%2===0?"success-row":""},handleSizeChange:function(e){this.queryForm.size=e,this.getTableData()},handleCurrentChange:function(e){this.queryForm.current=e,this.getTableData()},clickDetail:function(e){this.activityId=e.activityId,this.detailDialogForm.current=1,this.detailDialogForm.size=10,this.getDetailDialogData(),this.detailDialogVisible=!0},clickCheck:function(e){this.activityId=e.activityId,this.checkDialogForm.current=1,this.checkDialogForm.size=10,this.getLabelOptions(),this.getCheckDialogData(),this.checkDialogVisible=!0},checkDialogClose:function(){this.checkDialogVisible=!1},checkDialogSizeChange:function(e){this.checkDialogForm.size=e,this.getCheckDialogData()},checkDialogCurrentChange:function(e){this.checkDialogForm.current=e,this.getCheckDialogData()},detailDialogClose:function(){this.detailDialogVisible=!1},detailDialogSizeChange:function(e){this.detailDialogForm.size=e,this.getDetailDialogData()},detailDialogCurrentChange:function(e){this.detailDialogForm.current=e,this.getDetailDialogData()},getTableData:function(){var e=this;this.getActivityConfig(this.queryForm).then((function(t){e.tableData=Object(o["a"])(t.records),e.queryForm.total=t.total}))},getCheckDialogData:function(){var e=this;this.getRecommendCustomer(u(u({},this.checkDialogForm),{},{activityId:this.activityId})).then((function(t){e.checkDialogData=Object(o["a"])(t.records),e.checkDialogForm.total=t.total}))},getDetailDialogData:function(){var e=this;this.getJoinCustomer(u(u({},this.detailDialogForm),{},{activityId:this.activityId})).then((function(t){e.detailDialogData=Object(o["a"])(t.records),e.detailDialogForm.total=t.total}))},getLabelOptions:function(){var e=this;this.getLabel({tagobjId:r["i"]}).then((function(t){0!==t.length&&(e.labelOptions=t.map((function(e){return{value:e.bqId,label:e.bqName}})))}))}}},h=d,p=(a("4d3e"),a("2877")),g=Object(p["a"])(h,i,l,!1,null,"539a9b8e",null);t["default"]=g.exports},"807c":function(e,t,a){"use strict";var i=a("f31b"),l=a.n(i);l.a},"80f2":function(e,t,a){"use strict";var i=a("db49"),l=a("ab3e"),s=i["c"]+"/residentialElectricity/getPowerAreaCode";function o(e){return Object(l["a"])({method:"post",headers:{"Content-Type":"application/json;charset=utf8"},data:e,url:s})}var r=i["b"]+"/tag/listTagTreeAndTagobj";function n(e){return Object(l["a"])({method:"get",headers:{"Content-Type":"application/json;charset=utf8"},data:e,url:r})}var c=i["c"]+"/cptYxhdYdkh/getXl";function u(e){return Object(l["a"])({method:"get",headers:{"Content-Type":"application/json;charset=utf8"},data:e,url:c})}t["a"]={data:function(){return{commonApi:{list:[],page:null,limit:null,total:0,model:null}}},methods:{getPowerAreaCode:function(e){return o(e).then((function(e){return e}))},getBdaTagList:function(e){return n(e).then((function(e){return e}))},getXl:function(e){return u(e).then((function(e){return e}))}}}},"823e":function(e,t,a){},9101:function(e,t,a){"use strict";var i=a("3c4c"),l=a.n(i);l.a},"97ad":function(e,t,a){"use strict";var i=a("4186"),l=a.n(i);l.a},"9b3a":function(e,t,a){},"9e5c":function(e,t,a){"use strict";a.r(t);var i=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"recommendManagement"},[a("div",{staticClass:"left-content"},e._l(e.menuData,(function(t,i){return a("div",{key:i,staticClass:"content-menu",class:e.active==="0"+(i+1)?"active":"",on:{click:function(t){return e.changeActive(i+1)}}},[e._v(e._s(t.name))])})),0),a("div",{staticClass:"right-content"},["01"===e.active?a("servicePolicyProcess",{attrs:{menuType:e.menuType}}):e._e(),"02"===e.active?a("approvalTask",{attrs:{menuType:e.menuType}}):e._e(),"03"===e.active?a("executionInformation",{attrs:{menuType:e.menuType}}):e._e(),"04"===e.active?a("taskExecutionSupervisionEvaluation",{attrs:{menuType:e.menuType}}):e._e(),"05"===e.active?a("marketingActivityAllocation",{attrs:{menuType:e.menuType}}):e._e(),"06"===e.active?a("marketingService",{attrs:{menuType:e.menuType}}):e._e()],1)])},l=[],s=(a("28a5"),a("69cc"),a("7f13")),o=a("5472"),r=(a("4287"),a("f44b")),n=(a("177d"),a("ab01")),c=a("1380"),u=a("6ffa"),d={components:{approvalTask:o["default"],executionInformation:r["default"],taskExecutionSupervisionEvaluation:s["default"],marketingService:n["default"],marketingActivityAllocation:c["default"],servicePolicyProcess:u["default"]},name:"recommendManagement",data:function(){return{active:"01",menuType:"",menuData:[{name:"精准营销服务策略开展流程",value:"01"},{name:"审批执行任务",value:"02"},{name:"任务执行信息录入与展示",value:"03"},{name:"任务执行监督及评估页面",value:"04"},{name:"现场营销活动配置",value:"05"},{name:"营销服务活动策略库",value:"06"}]}},created:function(){this.menuType=window.location.href.split("/")[window.location.href.split("/").length-1]},methods:{changeActive:function(e){this.active="0"+e}}},h=d,p=(a("5072"),a("2877")),g=Object(p["a"])(h,i,l,!1,null,"3aacb511",null);t["default"]=g.exports},a203:function(e,t,a){"use strict";var i=a("9b3a"),l=a.n(i);l.a},aa77:function(e,t,a){var i=a("5ca1"),l=a("be13"),s=a("79e5"),o=a("fdef"),r="["+o+"]",n="​",c=RegExp("^"+r+r+"*"),u=RegExp(r+r+"*$"),d=function(e,t,a){var l={},r=s((function(){return!!o[e]()||n[e]()!=n})),c=l[e]=r?t(h):o[e];a&&(l[a]=c),i(i.P+i.F*r,"String",l)},h=d.trim=function(e,t){return e=String(l(e)),1&t&&(e=e.replace(c,"")),2&t&&(e=e.replace(u,"")),e};e.exports=d},ab01:function(e,t,a){"use strict";a.r(t);var i=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"marketingService"},[a("div",{staticClass:"content content-border"},[a("div",{staticClass:"header"},[a("div",{staticClass:"change-type"},[a("span",{staticClass:"change-button",class:"1"===e.changeTypeActive?"active":"",on:{click:function(t){return e.changeType("1")}}},[e._v("基于供电单位特征差异化推荐营销活动策略库")]),a("span",{staticClass:"change-button",class:"2"===e.changeTypeActive?"active":"",on:{click:function(t){return e.changeType("2")}}},[e._v("基于营销活动特征差异化推荐用电客户策略库")])])]),a("div",{staticClass:"main"},["1"===e.changeTypeActive?[a("pelationshipBasicInformation")]:e._e(),"2"===e.changeTypeActive?[a("lelationalPolicyLibrary")]:e._e()],2)])])},l=[],s=a("d0a6"),o=a("4cb8"),r=a("8d05"),n={name:"marketingService",components:{pelationshipBasicInformation:s["default"],lelationalPolicyLibrary:o["default"]},mixins:[r["a"]],props:{},data:function(){return{changeTypeActive:"1"}},mounted:function(){},methods:{changeType:function(e){this.changeTypeActive=e}}},c=n,u=(a("03d4"),a("2877")),d=Object(u["a"])(c,i,l,!1,null,"40b5dd2c",null);t["default"]=d.exports},b85d:function(e,t,a){"use strict";var i=a("6228"),l=a.n(i);l.a},c5f6:function(e,t,a){"use strict";var i=a("7726"),l=a("69a8"),s=a("2d95"),o=a("5dbc"),r=a("6a99"),n=a("79e5"),c=a("9093").f,u=a("11e9").f,d=a("86cc").f,h=a("aa77").trim,p="Number",g=i[p],m=g,b=g.prototype,f=s(a("2aeb")(b))==p,y="trim"in String.prototype,v=function(e){var t=r(e,!1);if("string"==typeof t&&t.length>2){t=y?t.trim():h(t,3);var a,i,l,s=t.charCodeAt(0);if(43===s||45===s){if(a=t.charCodeAt(2),88===a||120===a)return NaN}else if(48===s){switch(t.charCodeAt(1)){case 66:case 98:i=2,l=49;break;case 79:case 111:i=8,l=55;break;default:return+t}for(var o,n=t.slice(2),c=0,u=n.length;c<u;c++)if(o=n.charCodeAt(c),o<48||o>l)return NaN;return parseInt(n,i)}}return+t};if(!g(" 0o1")||!g("0b1")||g("+0x1")){g=function(e){var t=arguments.length<1?0:e,a=this;return a instanceof g&&(f?n((function(){b.valueOf.call(a)})):s(a)!=p)?o(new m(v(t)),a,g):v(t)};for(var D,k=a("9e1e")?c(m):"MAX_VALUE,MIN_VALUE,NaN,NEGATIVE_INFINITY,POSITIVE_INFINITY,EPSILON,isFinite,isInteger,isNaN,isSafeInteger,MAX_SAFE_INTEGER,MIN_SAFE_INTEGER,parseFloat,parseInt,isInteger".split(","),C=0;k.length>C;C++)l(m,D=k[C])&&!l(g,D)&&d(g,D,u(m,D));g.prototype=b,b.constructor=g,a("2aba")(i,p,g)}},d0a6:function(e,t,a){"use strict";a.r(t);var i=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"pelationshipBasicInformation"},[a("div",{staticClass:"header"},[a("el-select",{staticClass:"select",attrs:{size:"small",placeholder:"请选择供电单位标签",filterable:"",clearable:""},model:{value:e.queryForm.gddwbq,callback:function(t){e.$set(e.queryForm,"gddwbq",t)},expression:"queryForm.gddwbq"}},e._l(e.gddwbqOptions,(function(e){return a("el-option",{key:e.value,attrs:{label:e.label,value:e.value}})})),1),a("el-select",{staticClass:"select",attrs:{size:"small",placeholder:"请选择营销活动标签",filterable:"",clearable:""},model:{value:e.queryForm.yxhdbq,callback:function(t){e.$set(e.queryForm,"yxhdbq",t)},expression:"queryForm.yxhdbq"}},e._l(e.yxhdbqOptions,(function(e){return a("el-option",{key:e.value,attrs:{label:e.label,value:e.value}})})),1),a("el-button",{attrs:{size:"small",type:"primary"},on:{click:e.getTableData}},[e._v("查询")]),a("el-button",{attrs:{size:"small",type:"primary"},on:{click:e.clickAdd}},[e._v("新增关联关系")])],1),a("div",{staticClass:"content"},[a("el-table",{staticClass:"content-table",attrs:{border:"",data:e.tableData,height:500,"row-class-name":e.tableRowClassName}},[a("el-table-column",{attrs:{label:"序号",align:"center",type:"index",width:"70"}}),a("el-table-column",{attrs:{prop:"ygid",label:"关系编号"}}),a("el-table-column",{attrs:{prop:"gddwbq",label:"供电单位标签"}}),a("el-table-column",{attrs:{prop:"yxhdbq",label:"营销活动标签"}}),a("el-table-column",{attrs:{prop:"zdtjjgs",label:"最大推荐结果数"}}),a("el-table-column",{attrs:{prop:"tjjgwkj",label:"推荐结果为空时"},scopedSlots:e._u([{key:"default",fn:function(t){return[e._v(e._s("1"===t.row.tjjgwkj?"随机分配":"不处理"))]}}])}),a("el-table-column",{attrs:{prop:"cjsj",label:"创建时间"}}),a("el-table-column",{attrs:{prop:"gxsj",label:"更新时间"}}),a("el-table-column",{attrs:{align:"center",width:"200",label:"操作"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("span",{staticClass:"text",staticStyle:{"margin-right":"10px"},attrs:{type:"text"},on:{click:function(a){return e.clickEdit(t.row)}}},[e._v("编辑任务")]),a("span",{staticClass:"text",attrs:{type:"text"},on:{click:function(a){return e.clickCheck(t.row)}}},[e._v("查看推荐生成结果")])]}}])})],1),a("div",{staticClass:"content-page"},[a("el-pagination",{attrs:{"current-page":this.queryForm.current,"page-sizes":[10,20,30,40],"page-size":this.queryForm.size,layout:"total, sizes, prev, pager, next, jumper",total:this.queryForm.total},on:{"size-change":e.handleSizeChange,"current-change":e.handleCurrentChange}})],1)],1),a("el-dialog",{staticClass:"add-dialog",attrs:{title:"新增关联关系",visible:e.addDialogVisible,width:"80%","before-close":e.addDialogClose,"close-on-click-modal":!1,"close-on-press-escape":!1},on:{"update:visible":function(t){e.addDialogVisible=t}}},[a("span",{staticClass:"dialog-header",attrs:{slot:"title"},slot:"title"},[a("span",{staticClass:"header-text"},[e._v(e._s(e.addDialogTitle))])]),a("el-form",{ref:"addDialogForm",staticClass:"addDialog-form",attrs:{model:e.addDialogForm,"label-width":"130px"}},[a("div",{staticClass:"form-item"},[a("div",{staticClass:"form-title"},[e._v(e._s("关联标签设置:"))]),a("div",{staticClass:"form-content"},[a("el-table",{staticClass:"content-table",attrs:{border:"",data:e.addDialogForm.labelList}},[a("el-table-column",{attrs:{prop:"tagTargetId",label:"供电单位的标签"},scopedSlots:e._u([{key:"default",fn:function(t){return[e._v(e._s(t.row?"":t.row)+"\n                "),a("el-select",{staticStyle:{width:"80%",padding:"10px"},attrs:{size:"mini",filterable:"",clearable:"",placeholder:"请选择"},model:{value:e.addDialogForm.tagSource,callback:function(t){e.$set(e.addDialogForm,"tagSource",t)},expression:"addDialogForm.tagSource"}},e._l(e.gddwbqOptions,(function(e){return a("el-option",{key:e.value,attrs:{label:e.label,value:e.value}})})),1)]}}])}),a("el-table-column",{attrs:{prop:"tagRecId",label:"营销活动的标签"},scopedSlots:e._u([{key:"default",fn:function(t){return[e._v(e._s(t.row?"":t.row)+"\n                "),a("el-select",{staticStyle:{width:"80%",padding:"10px"},attrs:{size:"mini",filterable:"",clearable:"",placeholder:"请选择"},model:{value:e.addDialogForm.tagTarget,callback:function(t){e.$set(e.addDialogForm,"tagTarget",t)},expression:"addDialogForm.tagTarget"}},e._l(e.yxhdbqOptions,(function(e){return a("el-option",{key:e.value,attrs:{label:e.label,value:e.value}})})),1)]}}])})],1)],1)]),a("div",{staticClass:"form-item"},[a("div",{staticClass:"form-title"},[e._v(e._s("推荐结果设置:"))]),a("div",{staticClass:"form-content",staticStyle:{border:"1px solid #ebeef5"}},[a("el-form-item",{attrs:{label:"最大推荐结果数:"}},[a("el-input-number",{staticClass:"input",staticStyle:{width:"200px"},attrs:{min:1,max:1e6,size:"mini"},model:{value:e.addDialogForm.recResultNumber,callback:function(t){e.$set(e.addDialogForm,"recResultNumber",t)},expression:"addDialogForm.recResultNumber"}})],1),a("el-form-item",{attrs:{label:"推荐结果为空时:"}},[a("el-radio-group",{model:{value:e.addDialogForm.recEmpty,callback:function(t){e.$set(e.addDialogForm,"recEmpty",t)},expression:"addDialogForm.recEmpty"}},[a("el-radio",{attrs:{label:"0"}},[e._v("不处理")]),a("el-radio",{attrs:{label:"1"}},[e._v("随机分配")])],1),a("span",{staticClass:"tip"},[e._v(e._s("（当目标对象无具体推荐对象时，给目标对象随机分配主体内的对象）"))])],1)],1)])]),a("div",{staticClass:"dialog-pagination"}),a("span",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[a("el-button",{attrs:{size:"small",type:"primary"},on:{click:e.addDialogConfirm}},[e._v("确定")]),a("el-button",{attrs:{size:"small"},on:{click:e.addDialogClose}},[e._v("关闭")])],1)],1),a("el-dialog",{staticClass:"check-dialog",attrs:{title:"推荐生成结果",visible:e.checkDialogVisible,width:"80%","before-close":e.checkDialogClose,"close-on-click-modal":!1,"close-on-press-escape":!1},on:{"update:visible":function(t){e.checkDialogVisible=t}}},[a("span",{staticClass:"dialog-header",attrs:{slot:"title"},slot:"title"},[a("span",{staticClass:"header-text"},[e._v(e._s("推荐生成结果"))])]),a("div",{staticClass:"query-group"},[a("div",{staticClass:"search"},[a("el-input",{staticClass:"input",attrs:{size:"small",placeholder:"请输入供电单位名称"},model:{value:e.checkDialogForm.gddwmc,callback:function(t){e.$set(e.checkDialogForm,"gddwmc","string"===typeof t?t.trim():t)},expression:"checkDialogForm.gddwmc"}}),a("el-input",{staticClass:"input",attrs:{size:"small",placeholder:"请输入营销活动名称"},model:{value:e.checkDialogForm.yxhdmc,callback:function(t){e.$set(e.checkDialogForm,"yxhdmc","string"===typeof t?t.trim():t)},expression:"checkDialogForm.yxhdmc"}}),a("el-select",{staticClass:"select",attrs:{size:"small",placeholder:"请选择供电单位标签"},model:{value:e.checkDialogForm.gddwbq,callback:function(t){e.$set(e.checkDialogForm,"gddwbq",t)},expression:"checkDialogForm.gddwbq"}},e._l(e.gddwbqOptions,(function(e){return a("el-option",{key:e.value,attrs:{label:e.label,value:e.value}})})),1),a("el-select",{staticClass:"select",attrs:{size:"small",placeholder:"请选择营销活动标签"},model:{value:e.checkDialogForm.yxhdbq,callback:function(t){e.$set(e.checkDialogForm,"yxhdbq",t)},expression:"checkDialogForm.yxhdbq"}},e._l(e.yxhdbqOptions,(function(e){return a("el-option",{key:e.value,attrs:{label:e.label,value:e.value}})})),1),a("el-button",{attrs:{size:"small",type:"primary"},on:{click:e.getCheckDialogData}},[e._v("查询")])],1)]),a("el-table",{staticClass:"dialog-table",attrs:{border:"",data:e.checkDialogData,height:400,"row-class-name":e.tableRowClassName}},[a("el-table-column",{attrs:{prop:"gddwmc",label:"供电单位"}}),a("el-table-column",{attrs:{prop:"yxhdmc",label:"营销活动名称"}}),a("el-table-column",{attrs:{prop:"yxhdbq",label:"营销活动编号"}})],1),a("div",{staticClass:"dialog-pagination"},[a("el-pagination",{attrs:{"current-page":this.checkDialogForm.current,"page-sizes":[10,20,30,40],"page-size":this.checkDialogForm.size,layout:"total, sizes, prev, pager, next, jumper",total:this.checkDialogForm.total},on:{"size-change":e.checkDialogSizeChange,"current-change":e.checkDialogCurrentChange}})],1),a("span",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[a("el-button",{attrs:{size:"small"},on:{click:e.checkDialogClose}},[e._v("关闭")])],1)],1)],1)},l=[],s=a("2909"),o=a("6ed3"),r=a("80f2"),n=a("db49"),c={name:"pelationshipBasicInformation",components:{},mixins:[o["a"],r["a"]],props:{},data:function(){return{queryForm:{gddwbq:"",yxhdbq:"",current:1,size:10,total:0},gddwbqOptions:[],yxhdbqOptions:[],listId:"",tableData:[],addDialogVisible:!1,addDialogTitle:"新增关联关系",addDialogData:[],addDialogForm:{tagSource:"",tagTarget:"",labelList:[{}],recResultNumber:"",recEmpty:"",current:1,size:10,total:0},tagSourceOptions:[],tagTargetOptions:[],checkDialogVisible:!1,checkDialogData:[],checkDialogForm:{gddwmc:"",yxhdmc:"",gddwbq:"",yxhdbq:"",current:1,size:10,total:0},ygid:""}},mounted:function(){this.getGddwOptions(),this.getYxhdOptions(),this.getTableData()},methods:{tableRowClassName:function(e){e.row;var t=e.rowIndex;return t%2===0?"success-row":""},handleSizeChange:function(e){this.queryForm.size=e,this.getTableData()},handleCurrentChange:function(e){this.queryForm.current=e,this.getTableData()},clickAdd:function(){this.addDialogForm.tagSource="",this.addDialogForm.tagTarget="",this.addDialogForm.recResultNumber="",this.addDialogForm.recEmpty="",this.ygid="",this.addDialogTitle="新增关联关系",this.addDialogVisible=!0},addDialogClose:function(){this.addDialogVisible=!1},addDialogConfirm:function(){var e=this;if(this.addDialogForm.tagSource)if(this.addDialogForm.tagTarget)if(""!==this.addDialogForm.recEmpty){var t={gddwbq:this.addDialogForm.tagSource,yxhdbq:this.addDialogForm.tagTarget,zdtjjgs:this.addDialogForm.recResultNumber,tjjgwkj:this.addDialogForm.recEmpty};"编辑关联关系"===this.addDialogTitle?(t.ygid=this.ygid,this.updateGddwStrategy(t).then((function(){e.addDialogVisible=!1,e.getTableData()}))):this.addGddwStrategy(t).then((function(){e.addDialogVisible=!1,e.getTableData()}))}else this.$message.warning("请选择推荐结果为空时选项");else this.$message.warning("请选择营销活动标签");else this.$message.warning("请选择供电单位标签")},clickEdit:function(e){this.addDialogForm.tagSource=e.gddwbqId,this.addDialogForm.tagTarget=e.yxhdbqId,this.addDialogForm.recResultNumber=e.zdtjjgs,this.addDialogForm.recEmpty=e.tjjgwkj,this.ygid=e.ygid,this.addDialogTitle="编辑关联关系",this.addDialogVisible=!0},clickCheck:function(e){this.checkDialogForm.gddwbq="",this.checkDialogForm.yxhdbq="",this.checkDialogForm.gddwmc="",this.checkDialogForm.yxhdmc="",this.listId=e.ygid,this.getCheckDialogData(),this.checkDialogVisible=!0},checkDialogClose:function(){this.checkDialogVisible=!1},checkDialogSizeChange:function(e){this.checkDialogForm.size=e,this.getCheckDialogData()},checkDialogCurrentChange:function(e){this.checkDialogForm.current=e,this.getCheckDialogData()},getTableData:function(){var e=this;this.getGddwStrategy(this.queryForm).then((function(t){e.tableData=Object(s["a"])(t.records),e.queryForm.total=t.total}))},getCheckDialogData:function(){var e=this;this.getGddwResult({ygid:this.listId,gddwbq:this.checkDialogForm.gddwbq,yxhdbq:this.checkDialogForm.yxhdbq,gddwmc:this.checkDialogForm.gddwmc,yxhdmc:this.checkDialogForm.yxhdmc,size:this.checkDialogForm.size,current:this.checkDialogForm.current}).then((function(t){e.checkDialogData=Object(s["a"])(t.records),e.checkDialogForm.total=t.total}))},getGddwOptions:function(){var e=this;this.getLabel({tagobjId:n["e"],gddwbq:""}).then((function(t){e.gddwbqOptions=t.map((function(e){return{value:e.bqId,label:e.bqName}}))}))},getYxhdOptions:function(){var e=this;this.getLabel({tagobjId:n["j"],yxhdbq:""}).then((function(t){e.yxhdbqOptions=t.map((function(e){return{value:e.bqId,label:e.bqName}}))}))}}},u=c,d=(a("e889"),a("2877")),h=Object(d["a"])(u,i,l,!1,null,"1f135c10",null);t["default"]=h.exports},d1f8:function(e,t,a){},e01e:function(e,t,a){},e889:function(e,t,a){"use strict";var i=a("5c3a"),l=a.n(i);l.a},f31b:function(e,t,a){},f44b:function(e,t,a){"use strict";a.r(t);var i=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"executionInformation"},[a("div",{staticClass:"header"},[a("el-input",{staticClass:"input",attrs:{size:"small",placeholder:"请输入营销活动内容关键词"},model:{value:e.queryForm.activityKeyword,callback:function(t){e.$set(e.queryForm,"activityKeyword","string"===typeof t?t.trim():t)},expression:"queryForm.activityKeyword"}}),a("el-button",{attrs:{size:"small",type:"primary"},on:{click:e.getTableData}},[e._v("查询")])],1),a("div",{staticClass:"content"},[a("el-table",{staticClass:"content-table",attrs:{border:"",data:e.tableData,height:500,"row-class-name":e.tableRowClassName}},[a("el-table-column",{attrs:{label:"序号",align:"center",type:"index",width:"70"}}),a("el-table-column",{attrs:{prop:"activityName",label:"营销活动名称"}}),a("el-table-column",{attrs:{align:"center",label:"计划参与活动的客户清单"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("span",{staticClass:"text",attrs:{type:"text"},on:{click:function(a){return e.clickCheck(t.row)}}},[e._v("查看")])]}}])}),a("el-table-column",{attrs:{prop:"executePlacePlan",label:"计划执行地点"}}),a("el-table-column",{attrs:{prop:"executeTimePlan",label:"计划执行时间"}}),a("el-table-column",{attrs:{prop:"updateTime",label:"更新时间"}}),a("el-table-column",{attrs:{align:"center",label:"参与活动客户清单录入"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("span",{staticClass:"text",attrs:{type:"text"},on:{click:function(a){return e.clickEntry(t.row)}}},[e._v("录入已执行营销活动客户清单")])]}}])}),a("el-table-column",{attrs:{align:"center",width:"200",label:"操作"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("span",{staticClass:"text",attrs:{type:"text"},on:{click:function(a){return e.clickClose(t.row)}}},[e._v("关闭任务")])]}}])})],1),a("div",{staticClass:"content-page"},[a("el-pagination",{attrs:{"current-page":this.queryForm.current,"page-sizes":[10,20,30,40],"page-size":this.queryForm.size,layout:"total, sizes, prev, pager, next, jumper",total:this.queryForm.total},on:{"size-change":e.handleSizeChange,"current-change":e.handleCurrentChange}})],1)],1),a("el-dialog",{staticClass:"check-dialog",attrs:{title:"推荐清单查看",visible:e.checkDialogVisible,width:"80%","before-close":e.checkDialogClose,"close-on-click-modal":!1,"close-on-press-escape":!1},on:{"update:visible":function(t){e.checkDialogVisible=t}}},[a("span",{staticClass:"dialog-header",attrs:{slot:"title"},slot:"title"},[a("span",{staticClass:"header-text"},[e._v(e._s("推荐清单查看"))])]),a("div",{staticClass:"query-group"},[a("div",{staticClass:"search"},[a("el-select",{staticClass:"select",attrs:{size:"small",clearable:"",placeholder:"请选择标签"},model:{value:e.checkDialogForm.tagId,callback:function(t){e.$set(e.checkDialogForm,"tagId",t)},expression:"checkDialogForm.tagId"}},e._l(e.labelOptions,(function(e){return a("el-option",{key:e.value,attrs:{label:e.label,value:e.value}})})),1),a("el-input",{staticClass:"input",attrs:{size:"small",placeholder:"请输入用户编号"},model:{value:e.checkDialogForm.yhbh,callback:function(t){e.$set(e.checkDialogForm,"yhbh","string"===typeof t?t.trim():t)},expression:"checkDialogForm.yhbh"}}),a("el-button",{attrs:{size:"small",type:"primary"},on:{click:e.getCheckDialogData}},[e._v("查询")])],1)]),a("el-table",{staticClass:"dialog-table",attrs:{border:"",data:e.checkDialogData,height:400,"row-class-name":e.tableRowClassName}},[a("el-table-column",{attrs:{prop:"yhbh",label:"用户编号"}}),a("el-table-column",{attrs:{prop:"yhmc",label:"用电客户名称"}}),a("el-table-column",{attrs:{prop:"yddz",label:"用户地址"}})],1),a("div",{staticClass:"dialog-pagination"},[a("el-pagination",{attrs:{"current-page":this.checkDialogForm.current,"page-sizes":[10,20,30,40],"page-size":this.checkDialogForm.size,layout:"total, sizes, prev, pager, next, jumper",total:this.checkDialogForm.total},on:{"size-change":e.checkDialogSizeChange,"current-change":e.checkDialogCurrentChange}})],1),a("span",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[a("el-button",{attrs:{size:"small"},on:{click:e.checkDialogClose}},[e._v("关闭")])],1)],1),a("el-dialog",{staticClass:"entry-dialog",attrs:{title:"参与活动客户标记",visible:e.entryDialogVisible,width:"80%","before-close":e.entryDialogClose,"close-on-click-modal":!1,"close-on-press-escape":!1},on:{"update:visible":function(t){e.entryDialogVisible=t}}},[a("span",{staticClass:"dialog-header",attrs:{slot:"title"},slot:"title"},[a("span",{staticClass:"header-text"},[e._v(e._s("参与活动客户标记"))])]),a("div",{staticClass:"query-group"},[a("div",{staticClass:"search"},[a("el-input",{staticClass:"input",attrs:{size:"small",placeholder:"请输入用户编号"},model:{value:e.entryDialogForm.yhbh,callback:function(t){e.$set(e.entryDialogForm,"yhbh","string"===typeof t?t.trim():t)},expression:"entryDialogForm.yhbh"}}),a("el-button",{attrs:{size:"small",type:"primary"},on:{click:e.getEntryDialogData}},[e._v("查询")]),a("el-button",{attrs:{size:"small",type:"primary"},on:{click:e.downFile}},[e._v("下载模板")]),a("el-upload",{staticClass:"upload",attrs:{action:e.actionUrl,data:e.uploadParams,"on-success":e.handleSuccess,multiple:"",accept:".xls, .xlsx","before-upload":e.beforeUpload,"show-file-list":!1}},[a("el-button",{attrs:{size:"small",type:"primary"}},[e._v("上传清单")])],1)],1)]),a("el-table",{staticClass:"dialog-table",attrs:{border:"",data:e.entryDialogData,height:400,"row-class-name":e.tableRowClassName}},[a("el-table-column",{attrs:{prop:"yhbh",label:"用户编号"}}),a("el-table-column",{attrs:{prop:"yhmc",label:"用电客户名称"}}),a("el-table-column",{attrs:{prop:"yddz",label:"用户地址"}}),a("el-table-column",{attrs:{prop:"algorithm",label:"是否算法推荐用户"},scopedSlots:e._u([{key:"default",fn:function(t){return[e._v("\n            "+e._s("1"===t.row.algorithm?"是":"否")+"\n          ")]}}])}),a("el-table-column",{attrs:{prop:"czsj",align:"center",label:"是否参与活动"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("el-checkbox",{attrs:{disabled:t.row.flag},on:{change:function(a){return e.activeSelect(t.row)}},model:{value:t.row.flag,callback:function(a){e.$set(t.row,"flag",a)},expression:"scope.row.flag"}})]}}])}),a("el-table-column",{attrs:{prop:"operateTime",label:"操作时间"}})],1),a("div",{staticClass:"dialog-pagination"},[a("el-pagination",{attrs:{"current-page":e.entryDialogForm.current,"page-sizes":[5,20,30,40],"page-size":e.entryDialogForm.size,layout:"total, sizes, prev, pager, next, jumper",total:e.entryDialogForm.total},on:{"size-change":e.entryDialogSizeChange,"current-change":e.entryDialogCurrentChange}})],1),a("span",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[a("el-button",{attrs:{size:"small"},on:{click:e.entryDialogClose}},[e._v("关闭")])],1)],1)],1)},l=[],s=(a("8e6e"),a("456d"),a("ade3")),o=a("2909"),r=(a("ac6a"),a("7f7f"),a("db49")),n=a("6ed3"),c=a("4328"),u=a.n(c);function d(e,t){var a=Object.keys(e);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);t&&(i=i.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),a.push.apply(a,i)}return a}function h(e){for(var t=1;t<arguments.length;t++){var a=null!=arguments[t]?arguments[t]:{};t%2?d(Object(a),!0).forEach((function(t){Object(s["a"])(e,t,a[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(a)):d(Object(a)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(a,t))}))}return e}var p={name:"executionInformation",components:{},mixins:[n["a"]],props:{},data:function(){return{queryForm:{status:"3",activityKeyword:"",current:1,size:10,total:0},activityId:"",tableData:[],checkDialogVisible:!1,checkDialogData:[{}],checkDialogForm:{tagId:"",yhbh:"",current:1,size:10,total:0},labelOptions:[],entryDialogVisible:!1,entryDialogData:[],entryDialogForm:{yhbh:"",current:1,size:5,total:0},uploadParams:{current:1,size:5,activityId:"",fileUploadId:""},actionUrl:r["c"]+"/cptActivityConfig/uploadExcel",tableType:"1"}},mounted:function(){this.getTableData()},methods:{tableRowClassName:function(e){e.row;var t=e.rowIndex;return t%2===0?"success-row":""},handleSizeChange:function(e){this.queryForm.size=e,this.getTableData()},handleCurrentChange:function(e){this.queryForm.current=e,this.getTableData()},clickEntry:function(e){this.activityId=e.activityId,window.console.log(e,";;"),this.getEntryDialogData(),this.entryDialogVisible=!0},clickCheck:function(e){this.activityId=e.activityId,this.checkDialogForm.current=1,this.checkDialogForm.size=10,this.getLabelOptions(),this.getCheckDialogData(),this.checkDialogVisible=!0},checkDialogClose:function(){this.checkDialogVisible=!1},checkDialogSizeChange:function(e){this.checkDialogForm.size=e,this.getCheckDialogData()},checkDialogCurrentChange:function(e){this.checkDialogForm.current=e,this.getCheckDialogData()},downFile:function(){window.location.href=r["c"]+"/cptActivityConfig/downloadTemplate"},beforeUpload:function(e,t){this.uploadParams.activityId=this.activityId,this.uploadParams.current=this.entryDialogForm.current=1,this.uploadParams.size=this.entryDialogForm.size;var a=e.name.substring(e.name.lastIndexOf(".")+1),i="xls"===a||"xlsx"===a;return i||this.$alert("上传文件只能是xls、xlsx格式!"),i},handleSuccess:function(e,t){this.uploadParams.fileUploadId=e.data.fileUploadId||"",console.log(t),"00000"===e.code&&(this.tableType="2",this.$message.success("上传成功"),e.data.rows.forEach((function(e){e.flag="1"===e.flag})),this.entryDialogData=Object(o["a"])(e.data.rows),this.entryDialogForm.total=e.data.total,this.entryDialogData.forEach((function(e){e.bindTagB="1"===e.bindTag})))},UploadExcel:function(){var e=this;this.uploadExcel(u.a.stringify({current:this.entryDialogForm.current,size:this.entryDialogForm.size,activityId:this.uploadParams.activityId,fileUploadId:this.uploadParams.fileUploadId})).then((function(t){e.tableType="2",t.rows.forEach((function(e){e.flag="1"===e.flag})),e.entryDialogData=Object(o["a"])(t.rows),e.entryDialogForm.total=t.total,e.entryDialogData.forEach((function(e){e.bindTagB="1"===e.bindTag}))}))},entryDialogClose:function(){this.entryDialogVisible=!1},entryDialogSizeChange:function(e){this.entryDialogForm.size=e,"1"===this.tableType?this.getEntryDialogData():this.UploadExcel()},entryDialogCurrentChange:function(e){this.entryDialogForm.current=e,"1"===this.tableType?this.getEntryDialogData():this.UploadExcel()},clickClose:function(e){var t=this;this.$confirm("此操作将关闭改任务, 是否继续?","提示",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then((function(){window.console.log(e),t.closeTask({id:e.id}).then((function(){t.getTableData(),t.$message.info("已关闭")}))})).catch((function(){}))},getTableData:function(){var e=this;this.getActivityConfig(this.queryForm).then((function(t){e.tableData=Object(o["a"])(t.records),e.queryForm.total=t.total}))},getCheckDialogData:function(){var e=this;this.getRecommendCustomer(h(h({},this.checkDialogForm),{},{activityId:this.activityId})).then((function(t){e.checkDialogData=Object(o["a"])(t.records),e.checkDialogForm.total=t.total}))},getEntryDialogData:function(){var e=this;this.customerList({size:this.entryDialogForm.size,current:this.entryDialogForm.current,activityId:this.activityId,yhbh:this.entryDialogForm.yhbh}).then((function(t){e.tableType="1",t.records.forEach((function(e){e.flag="1"===e.flag})),e.entryDialogData=t.records,window.console.log(e.entryDialogData),e.entryDialogForm.total=t.total}))},getLabelOptions:function(){var e=this;this.getLabel({tagobjId:r["i"]}).then((function(t){0!==t.length&&(e.labelOptions=t.map((function(e){return{value:e.bqId,label:e.bqName}})))}))},activeSelect:function(e){var t=this;this.$confirm("勾选后将不可逆, 是否继续?","提示",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then((function(){t.joinActivity({activityId:t.activityId,yhbh:e.yhbh}).then((function(){t.$message.success("勾选参与活动成功")}))})).catch((function(){e.flag=!1,t.$message({type:"info",message:"已取消标记"})}))}}},g=p,m=(a("a203"),a("2877")),b=Object(m["a"])(g,i,l,!1,null,"26005f15",null);t["default"]=b.exports},f747:function(e,t,a){},f9fe:function(e,t,a){"use strict";var i=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{ref:"bdaTable",staticClass:"bda-table",attrs:{id:e.id}},[a("div",{staticClass:"content-table"},[e.loading?a("el-table",{staticClass:"table",staticStyle:{width:"100%",height:"100%"},attrs:{data:e.tableDealData,height:e.tableHeight,"row-class-name":e.tabRowClassName,border:"",align:"center","header-cell-style":e.headStyle},on:{"selection-change":e.handleSelectionChange}},[0!==e.selectWidth&&0!==e.columnData.length?a("el-table-column",{attrs:{type:"selection",width:e.selectWidth}}):e._e(),0!==e.indexWidth&&0!==e.columnData.length?a("el-table-column",{attrs:{type:"index",label:"序号",width:e.indexWidth}}):e._e(),e._l(e.columnData,(function(t,i){return a("el-table-column",{key:i,attrs:{prop:t.prop,label:t.label,width:t.width,align:t.align?t.align:"left"},scopedSlots:e._u([{key:"default",fn:function(i){return["Operate"===t.prop?a("div",{staticClass:"operate"},e._l(t.type.filter((function(e){return!e.disabledValue||-1===e.disabledValue.indexOf(i.row[e.disabledField])})),(function(t,l){return a("el-button",{key:l,attrs:{type:"text"},on:{click:function(a){return e.operate(t.action,i.row)}}},[a("span",[e._v(e._s(t.name))])])})),1):e._e(),"Select"===t.prop?a("div",{staticClass:"select"},[a("el-select",{attrs:{size:"mini",placeholder:"请选择"},model:{value:i.row[t.model],callback:function(a){e.$set(i.row,t.model,a)},expression:"scope.row[item.model]"}},e._l(e.options,(function(e){return a("el-option",{key:e.value,attrs:{label:e.name,value:e.value}})})),1)],1):e._e(),"CilckRow"===t.type?a("div",{staticClass:"cilck-row"},[a("div",{staticClass:"click-text",on:{click:function(a){return e.clickRow(t.prop,i.row)}}},[a("span",[e._v(e._s(i.row[t.prop]))])])]):e._e(),t.formatter?a("div",[a("span",[e._v(e._s(t.formatter[i.row[t.prop]]))])]):e._e(),"CilckRow"!==t.type&&"Operate"!==t.prop&&"Select"!==t.prop?a("div",{staticClass:"text"},[a("span",[e._v(e._s(i.row[t.prop]))])]):e._e()]}}],null,!0)})}))],2):e._e()],1),e.isPage?a("el-pagination",{staticClass:"content-pagination",attrs:{"current-page":e.queryForm.current,"page-sizes":e.pageConfig.pageSizes,"page-size":e.queryForm.size,layout:e.pageConfig.layout,total:e.pageConfig.total},on:{"size-change":e.sizeChange,"current-change":e.currentChange}}):e._e()],1)},l=[],s=(a("ac6a"),a("456d"),a("7f7f"),a("c5f6"),{components:{},props:{tableData:{type:Object,default:function(){return{}}},headerColor:{type:String,default:function(){return""}},indexWidth:{type:Number,default:function(){return 70}},selectWidth:{type:Number,default:function(){return 0}},isPage:{type:Boolean,default:function(){return!1}},pageConfig:{type:Object,default:function(){return{name:"",current:1,size:10,pageSizes:[10,20,30,40],layout:"prev, pager, next, sizes,jumper,total",total:0}}}},name:"bda-table",data:function(){return{id:"bda-table"+Math.random(),loading:!1,tableDealData:[],columnData:[],tableHeight:0,headStyle:{background:"#1899fa"},queryForm:{name:"",current:1,size:10},options:[{name:"是",value:"1"},{name:"否",value:"0"}]}},mounted:function(){this.init(),window.addEventListener("resize",this.calculateHeight)},beforeDestroy:function(){window.removeEventListener("resize",this.calculateHeight)},watch:{tableData:function(){this.init()},headerColor:function(){this.headStyle.background=this.headerColor},pageConfig:function(){}},methods:{calculateHeight:function(){this.tableHeight=document.getElementById(this.id).clientHeight-(this.isPage?52:0)},init:function(){this.queryForm.name=this.pageConfig.name,this.queryForm.size=this.pageConfig.size,this.queryForm.current=this.pageConfig.current,this.headStyle.background=this.headerColor,this.calculateHeight(),this.dataDeal(this.tableData)},sizeChange:function(e){this.queryForm.size=e,this.$emit("changePage",this.queryForm)},currentChange:function(e){this.queryForm.current=e,this.$emit("changePage",this.queryForm)},tabRowClassName:function(e){e.row;var t=e.rowIndex,a=t+1;if(a%2==0)return"warning-row"},dataDeal:function(e){var t=this;0!==Object.keys(e).length?(this.tableDealData=[],this.loading=!1,this.$nextTick((function(){t.tableDealData=e.tableData,t.columnData=e.columnNameData,t.loading=!0}))):this.loading=!0},operate:function(e,t){this.$emit("operate",e,t)},clickRow:function(e,t){this.$emit("clickRow",e,t)},handleSelectionChange:function(e){this.$emit("select",e)}}}),o=s,r=(a("41de"),a("2877")),n=Object(r["a"])(o,i,l,!1,null,"288d3c6c",null);t["a"]=n.exports},fb55:function(e,t,a){},fdef:function(e,t){e.exports="\t\n\v\f\r   ᠎             　\u2028\u2029\ufeff"}}]);
//# sourceMappingURL=chunk-3588ead8.8143e3a4.js.map