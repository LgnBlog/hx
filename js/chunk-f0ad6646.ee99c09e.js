(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-f0ad6646"],{2909:function(t,e,a){"use strict";function i(t,e){(null==e||e>t.length)&&(e=t.length);for(var a=0,i=new Array(e);a<e;a++)i[a]=t[a];return i}function l(t){if(Array.isArray(t))return i(t)}function o(t){if("undefined"!==typeof Symbol&&Symbol.iterator in Object(t))return Array.from(t)}function s(t,e){if(t){if("string"===typeof t)return i(t,e);var a=Object.prototype.toString.call(t).slice(8,-1);return"Object"===a&&t.constructor&&(a=t.constructor.name),"Map"===a||"Set"===a?Array.from(t):"Arguments"===a||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(a)?i(t,e):void 0}}function r(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}function n(t){return l(t)||o(t)||s(t)||r()}a.d(e,"a",(function(){return n}))},"2e82":function(t,e,a){},5122:function(t,e,a){"use strict";var i=a("2e82"),l=a.n(i);l.a},5472:function(t,e,a){"use strict";a.r(e);var i=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"approvalTask"},[a("div",{staticClass:"header"},[a("el-input",{staticClass:"input",attrs:{size:"small",placeholder:"请输入营销活动内容关键词"},model:{value:t.queryForm.activityKeyword,callback:function(e){t.$set(t.queryForm,"activityKeyword","string"===typeof e?e.trim():e)},expression:"queryForm.activityKeyword"}}),a("el-button",{attrs:{size:"small",type:"primary"},on:{click:t.getTableData}},[t._v("查询")])],1),a("div",{staticClass:"content"},[a("el-table",{staticClass:"content-table",attrs:{border:"",data:t.tableData,height:500,"row-class-name":t.tableRowClassName}},[a("el-table-column",{attrs:{label:"序号",align:"center",type:"index",width:"70"}}),a("el-table-column",{attrs:{prop:"activityName",label:"营销活动名称"}}),a("el-table-column",{attrs:{align:"center",label:"推荐客户清单查看"},scopedSlots:t._u([{key:"default",fn:function(e){return[a("span",{staticClass:"text",attrs:{type:"text"},on:{click:function(a){return t.clickCheck(e.row)}}},[t._v("点击查看")])]}}])}),a("el-table-column",{attrs:{prop:"executePlacePlan",label:"计划执行地点"}}),a("el-table-column",{attrs:{prop:"executeTimePlan",label:"计划执行时间"}}),a("el-table-column",{attrs:{prop:"applyUserName",label:"申请人"}}),a("el-table-column",{attrs:{align:"center",width:"200",label:"流程节点"},scopedSlots:t._u([{key:"default",fn:function(e){return[a("el-button",{attrs:{type:"text",disabled:!t.isPermissions},on:{click:function(a){return t.clickSet(e.row)}}},[t._v("待审批")])]}}])})],1),a("div",{staticClass:"content-page"},[a("el-pagination",{attrs:{"current-page":this.queryForm.current,"page-sizes":[10,20,30,40],"page-size":this.queryForm.size,layout:"total, sizes, prev, pager, next, jumper",total:this.queryForm.total},on:{"size-change":t.handleSizeChange,"current-change":t.handleCurrentChange}})],1)],1),a("el-dialog",{staticClass:"check-dialog",attrs:{title:"推荐清单查看",visible:t.checkDialogVisible,width:"80%","before-close":t.checkDialogClose,"close-on-click-modal":!1,"close-on-press-escape":!1},on:{"update:visible":function(e){t.checkDialogVisible=e}}},[a("span",{staticClass:"dialog-header",attrs:{slot:"title"},slot:"title"},[a("span",{staticClass:"header-text"},[t._v(t._s("推荐清单查看"))])]),a("div",{staticClass:"query-group"},[a("div",{staticClass:"search"},[a("el-select",{staticClass:"select",attrs:{size:"small",clearable:"",placeholder:"请选择标签"},model:{value:t.checkDialogForm.tagId,callback:function(e){t.$set(t.checkDialogForm,"tagId",e)},expression:"checkDialogForm.tagId"}},t._l(t.labelOptions,(function(t){return a("el-option",{key:t.value,attrs:{label:t.label,value:t.value}})})),1),a("el-input",{staticClass:"input",attrs:{size:"small",placeholder:"请输入用户编号"},model:{value:t.checkDialogForm.yhbh,callback:function(e){t.$set(t.checkDialogForm,"yhbh","string"===typeof e?e.trim():e)},expression:"checkDialogForm.yhbh"}}),a("el-button",{attrs:{size:"small",type:"primary"},on:{click:t.getCheckDialogData}},[t._v("查询")])],1)]),a("el-table",{staticClass:"dialog-table",attrs:{border:"",data:t.checkDialogData,height:400,"row-class-name":t.tableRowClassName}},[a("el-table-column",{attrs:{prop:"yhbh",label:"用户编号"}}),a("el-table-column",{attrs:{prop:"yhmc",label:"用电客户名称"}}),a("el-table-column",{attrs:{prop:"yddz",label:"用户地址"}})],1),a("div",{staticClass:"dialog-pagination"},[a("el-pagination",{attrs:{"current-page":this.checkDialogForm.current,"page-sizes":[10,20,30,40],"page-size":this.checkDialogForm.size,layout:"total, sizes, prev, pager, next, jumper",total:this.checkDialogForm.total},on:{"size-change":t.checkDialogSizeChange,"current-change":t.checkDialogCurrentChange}})],1),a("span",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[a("el-button",{attrs:{size:"small"},on:{click:t.checkDialogClose}},[t._v("关闭")])],1)],1),a("el-dialog",{staticClass:"set-dialog",attrs:{title:"推荐审批",visible:t.aduitDialogVisible,width:"40%","before-close":t.aduitDialogClose,"close-on-click-modal":!1,"close-on-press-escape":!1},on:{"update:visible":function(e){t.aduitDialogVisible=e}}},[a("span",{staticClass:"dialog-header",attrs:{slot:"title"},slot:"title"},[a("span",{staticClass:"header-text"},[t._v(t._s("推荐审批"))])]),a("el-form",{staticClass:"aduitDialog-form",attrs:{model:t.aduitDialogForm,"label-width":"150px"}},[a("el-form-item",{attrs:{label:"审批意见"}},[a("el-select",{staticClass:"input",attrs:{size:"small",placeholder:"请选择审批意见"},model:{value:t.aduitDialogForm.approvalFlag,callback:function(e){t.$set(t.aduitDialogForm,"approvalFlag",e)},expression:"aduitDialogForm.approvalFlag"}},t._l(t.approvalFlagOptions,(function(t){return a("el-option",{key:t.value,attrs:{label:t.label,value:t.value}})})),1)],1),a("el-form-item",{attrs:{label:"审批备注"}},[a("el-input",{staticClass:"input",attrs:{size:"small",type:"textarea",rows:"5",resize:"none",placeholder:"请输入审批备注"},model:{value:t.aduitDialogForm.approvalCommend,callback:function(e){t.$set(t.aduitDialogForm,"approvalCommend",e)},expression:"aduitDialogForm.approvalCommend"}})],1)],1),a("span",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[a("el-button",{attrs:{type:"primary",size:"small"},on:{click:t.aduitDialogConfirm}},[t._v("提交")]),a("el-button",{attrs:{size:"small"},on:{click:t.aduitDialogClose}},[t._v("关闭")])],1)],1)],1)},l=[],o=(a("8e6e"),a("ac6a"),a("456d"),a("2909")),s=a("ade3"),r=a("6ed3"),n=a("db49");function c(t,e){var a=Object.keys(t);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(t);e&&(i=i.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),a.push.apply(a,i)}return a}function u(t){for(var e=1;e<arguments.length;e++){var a=null!=arguments[e]?arguments[e]:{};e%2?c(Object(a),!0).forEach((function(e){Object(s["a"])(t,e,a[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(a)):c(Object(a)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(a,e))}))}return t}var p={name:"approvalTask",components:{},mixins:[r["a"]],props:{},data:function(){return{isPermissions:!1,queryForm:{applicationStatus:"",activityKeyword:"",current:1,size:10,total:0},applicationStatusOptions:[],listId:"",activityId:"",tableData:[],checkDialogVisible:!1,checkDialogData:[],checkDialogForm:{tagId:"",yhbh:"",current:1,size:10,total:0},labelOptions:[],aduitDialogVisible:!1,aduitDialogData:[],aduitDialogForm:{approvalFlag:"",approvalCommend:""},approvalFlagOptions:[{label:"同意",value:!0},{label:"不同意",value:!1}],zxrOptions:[]}},mounted:function(){this.checkPermissions(),this.getTableData()},methods:{tableRowClassName:function(t){t.row;var e=t.rowIndex;return e%2===0?"success-row":""},handleSizeChange:function(t){this.queryForm.size=t,this.getTableData()},handleCurrentChange:function(t){this.queryForm.current=t,this.getTableData()},clickCheck:function(t){this.listId=t.id,this.activityId=t.activityId,this.checkDialogForm.current=1,this.checkDialogForm.size=10,this.getLabelOptions(),this.getCheckDialogData(),this.checkDialogVisible=!0},checkDialogClose:function(){this.checkDialogVisible=!1},checkDialogSizeChange:function(t){this.checkDialogForm.size=t,this.getCheckDialogData()},checkDialogCurrentChange:function(t){this.checkDialogForm.current=t,this.getCheckDialogData()},clickSet:function(t){this.listId=t.id,this.aduitDialogVisible=!0},aduitDialogConfirm:function(){var t=this;this.approval(u(u({},this.aduitDialogForm),{},{id:this.listId})).then((function(e){t.$message.success(e),t.getTableData(),t.aduitDialogVisible=!1}))},aduitDialogClose:function(){this.aduitDialogVisible=!1},checkPermissions:function(){var t=this;this.hasApprovalPower().then((function(e){t.isPermissions=e,console.log(t.isPermissions," this.isPermissions")}))},getTableData:function(){var t=this;this.applyList(this.queryForm).then((function(e){t.tableData=Object(o["a"])(e.records),t.queryForm.total=e.total}))},getCheckDialogData:function(){var t=this;this.getRecommendCustomer(u(u({},this.checkDialogForm),{},{activityId:this.activityId})).then((function(e){t.checkDialogData=Object(o["a"])(e.records),t.checkDialogForm.total=e.total}))},getLabelOptions:function(){var t=this;this.getLabel({tagobjId:n["i"]}).then((function(e){0!==e.length&&(t.labelOptions=e.map((function(t){return{value:t.bqId,label:t.bqName}})))}))}}},h=p,g=(a("5122"),a("2877")),d=Object(g["a"])(h,i,l,!1,null,"6282e7af",null);e["default"]=d.exports}}]);
//# sourceMappingURL=chunk-f0ad6646.ee99c09e.js.map