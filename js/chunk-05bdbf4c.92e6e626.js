(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-05bdbf4c"],{"03400":function(e,t,a){"use strict";a.d(t,"a",(function(){return l})),a.d(t,"b",(function(){return o}));var n=a("db49"),i=a("bc3a"),r=a.n(i);function l(e){window.location.href=n["c"]+e}function o(e,t){console.log(e,t),r()({method:"post",url:n["c"]+e,data:t,responseType:"blob"}).then((function(e){console.log(e,"res");var t=e.data,a=new Blob([t]),n="导出信息.xls";if("download"in document.createElement("a")){var i=document.createElement("a");i.download=n,i.style.display="none",i.href=URL.createObjectURL(a),document.body.appendChild(i),i.click(),URL.revokeObjectURL(i.href),document.body.removeChild(i)}else navigator.msSaveBlob(a,n)}))}},"1f19":function(e,t,a){"use strict";a.r(t);var n=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"panoramicAnalysis"},[a("div",{staticClass:"top"},[a("div",{staticClass:"content"},[a("div",{staticClass:"content-left content-border"},[e._m(0),a("div",{staticClass:"chart-main"},[a("themeLabelList",{attrs:{labelData:e.labelData,pageConfig:e.labelPageConfig,showDetailData:e.labelDetailData},on:{changePage:e.changePage,clickDetail:e.getLabelDetailData,changeDetailPage:e.changePage,exportExcel:e.themeLabelExportExcel}})],1)]),a("div",{staticClass:"content-right content-border"},[e._m(1),a("div",{staticClass:"chart-main"},[a("bdaTable",{attrs:{tableData:e.recommendData,headerColor:"#1899fa",indexWidth:0,isPage:!0,pageConfig:e.recommendPageConfig},on:{changePage:e.changePage}})],1)])])]),a("div",{staticClass:"bottom"},[a("div",{staticClass:"content content-border"},[e._m(2),a("div",{staticClass:"chart-main"},[e.batteryWarningRes?a("barCharts",{attrs:{barChartsData:e.batteryWarningData,barWidth:40,barType:"bar",isShadow:!0,name:"用户日电量预警",showDetail:!0,showDetailData:e.batteryWarningDetailData,maxShowNumber:13},on:{setOption:e.setOption,clickBar:e.getBatteryWarningDetailData,changePageData:e.changePage}}):e._e()],1)])])])},i=[function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"content-title"},[a("span",{staticClass:"block"}),a("span",{staticClass:"text"},[e._v("主题标签")])])},function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"content-title"},[a("span",{staticClass:"block"}),a("span",{staticClass:"text"},[e._v("主题推荐关联关系")])])},function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"content-title"},[a("span",{staticClass:"block"}),a("span",[e._v("用户日电量预警")])])}],r=(a("8e6e"),a("456d"),a("ac6a"),a("2909")),l=a("ade3"),o=(a("7f7f"),a("89e8")),s=a("1b04"),c=a("f9fe"),u=a("ac3e"),b=a("03400");function g(e,t){var a=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),a.push.apply(a,n)}return a}function m(e){for(var t=1;t<arguments.length;t++){var a=null!=arguments[t]?arguments[t]:{};t%2?g(Object(a),!0).forEach((function(t){Object(l["a"])(e,t,a[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(a)):g(Object(a)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(a,t))}))}return e}var h={components:{barCharts:s["a"],bdaTable:c["a"],themeLabelList:u["a"]},name:"panoramicAnalysis",mixins:[o["a"]],data:function(){return{labelData:[],labelQueryForm:{menuType:"7",current:1,size:10},labelPageConfig:{name:"label",current:1,size:10,pageSizes:[10,20,30,40,50],layout:"prev, pager, next, sizes,jumper,total",total:0},labelDetailData:{},labelDetailQueryForm:{dbcolumnAS:"",menuType:"7",tagName:"",current:1,size:10},labelDetailPageConfig:{name:"labelDetail",current:1,size:10,pageSizes:[10,20,30,40,50],layout:"prev, pager, next, sizes,jumper,total",total:0},recommendData:{},recommendRes:!1,recommendForm:{menuType:"7",current:1,size:10},recommendPageConfig:{name:"recommend",current:1,size:10,pageSizes:[10,20,30,40],layout:"prev, pager, next, sizes,jumper,total",total:0},batteryWarningData:[],batteryWarningRes:!1,batteryWarningDetailForm:{name:"",current:1,size:10},batteryWarningDetailData:{},setOptionData:{}}},mounted:function(){var e=this;this.getLabelData(),this.getRecommendData(),this.getBatteryWarningData(),window.addEventListener("resize",(function(){e.setOptionData["用户日电量预警"]&&e.setOptionData["用户日电量预警"].resize()}))},methods:{setOption:function(e,t){this.setOptionData[e]=t},changePage:function(e){console.log(e,"data"),"label"===e.name&&(this.labelQueryForm.size=e.size,this.labelQueryForm.current=e.current,this.getLabelData()),"labelDetail"===e.name&&(this.labelDetailQueryForm.dbcolumnAS=e.keyValue||"",this.labelDetailQueryForm.size=e.size,this.labelDetailQueryForm.current=e.current,this.getLabelDetailData()),"recommend"===e.name&&(this.recommendForm.size=e.size,this.recommendForm.current=e.current,this.getRecommendData()),"batteryWarningDetail"===e.name&&(this.batteryWarningDetailForm.size=e.size,this.batteryWarningDetailForm.current=e.current,this.getBatteryWarningDetailData())},themeLabelExportExcel:function(e){Object(b["a"])("/leanSeatingSkillController/exportLabelUserDisplay?tagId="+e.tagId)},getLabelData:function(){var e=this;this.themeLabelDisplay(this.labelQueryForm).then((function(t){e.labelPageConfig.total=t.total,e.labelPageConfig.size=e.labelQueryForm.size,e.labelPageConfig.current=e.labelQueryForm.current,e.labelData=t.list.map((function(e){return m(m({},e),{},{name:e.tagName,text:e.tagDescription,value:e.account||0})})),console.log(e.labelData,"labelData")}))},getLabelDetailData:function(e){var t=this;e&&(this.labelDetailQueryForm.tagId=e.tagId,this.labelDetailQueryForm.size=10,this.labelDetailQueryForm.current=1);var a=[];this.labelUserDisplay(m({},this.labelDetailQueryForm)).then((function(e){t.labelDetailPageConfig.total=e.result[0]?e.result[0].total:0,t.labelDetailPageConfig.size=t.labelDetailQueryForm.size,t.labelDetailPageConfig.current=t.labelDetailQueryForm.current,e.showField[t.labelDetailQueryForm.tagId]&&(a=e.showField[t.labelDetailQueryForm.tagId].map((function(e){return{prop:e.dbcolumnAS,label:e.dbcolumnTitle}})).filter((function(e){return"地区编码"!==e.label&&"县区局编码"!==e.label&&"供电单位编码"!==e.label&&"供电电网编码"!==e.label}))),console.log(a,"columnNameData"),e.result.shift(),t.labelDetailData={tableData:Object(r["a"])(e.result),columnNameData:a,name:"labelDetail",headerColor:"#1899fa",title:"客户明细列表",total:t.labelDetailPageConfig.total,current:t.labelDetailQueryForm.current,size:t.labelDetailQueryForm.size}}))},getRecommendData:function(){var e=this,t=[{prop:"clbh",label:"关系编号"},{prop:"clmc",label:"关联关系名称"},{prop:"clsm",label:"关联关系描述"}];this.topicsRecommendAssociations(this.recommendForm).then((function(a){console.log(a,"topicsRecommendAssociations"),e.recommendPageConfig.total=a.total,e.recommendPageConfig.size=e.recommendForm.size,e.recommendPageConfig.current=e.recommendForm.current,e.recommendData={tableData:Object(r["a"])(a.records),columnNameData:t}})).catch((function(a){a&&(e.recommendData={tableData:[],columnNameData:t})}))},getBatteryWarningData:function(){var e=this;this.batteryWarningRes=!1,this.dailyElectricWarningUser({}).then((function(t){console.log(t,"dailyElectricWarningUser");var a=[],n=[];t.forEach((function(e){a.push(e.count),n.push(e.name)})),e.batteryWarningData={dataMap:{"用户日电量预警":a},xNameData:n,colorMap:{"用户日电量预警":[["#2790FF","#55BFFF","#dcf1ff"]]},xyName:{"x轴":{name:"",color:"#4D4D4D",diffcolor:!1},"y轴":[{name:"客户数",color:"#808080"}]}},e.batteryWarningRes=!0}))},getBatteryWarningDetailData:function(e){var t=this;console.log(e,"getUseUsageDetailData"),this.batteryWarningDetailData={},e&&(this.batteryWarningDetailForm.name=e.name,this.batteryWarningDetailForm.current=1,this.batteryWarningDetailForm.size=10),this.dailyElectricWarningUserDetails(m({detailsContent:this.batteryWarningDetailForm.name},this.batteryWarningDetailForm)).then((function(e){t.batteryWarningDetailData={tableData:Object(r["a"])(e.records),headerColor:"#1899fa",title:"日用电量预警",name:"batteryWarningDetail",size:t.batteryWarningDetailForm.size,current:t.batteryWarningDetailForm.current,total:e.total,columnNameData:[{prop:"gdj",label:"供电局"},{prop:"gdqj",label:"供电区级"},{prop:"yhbh",label:"用户编号"},{prop:"yhmc",label:"用户名称"},{prop:"dqdl",label:"当前电量"},{prop:"hbdl",label:"环比电量"},{prop:"tbdl",label:"同比电量"},{prop:"mom",label:"环比电量"},{prop:"yoy",label:"同比电量"}]}}))}}},D=h,f=(a("d70d"),a("2877")),d=Object(f["a"])(D,n,i,!1,null,"3231172c",null);t["default"]=d.exports},"39fb":function(e,t,a){},ac3e:function(e,t,a){"use strict";var n=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"lable-table"},[e._m(0),0!==e.labelDealData.length?a("div",{staticClass:"lable-box",style:{height:e.tableHeight+"px"}},e._l(e.labelDealData,(function(t,n){return a("div",{key:n,staticClass:"lable-item"},[a("span",{staticClass:"name",style:{backgroundColor:t.color}},[e._v("\n        "+e._s(t.name)+"\n      ")]),a("span",{staticClass:"text",style:{backgroundColor:t.backgroundColor}},[e._v("\n        "+e._s(t.text)+"\n      ")]),a("span",{staticClass:"value",style:{backgroundColor:t.backgroundColor},on:{click:function(a){return e.showDetail(t)}}},[e._v(e._s(t.value+"户"))])])})),0):a("div",{staticClass:"no-data"},[a("span",[e._v("暂无数据")])]),e.isPage?a("el-pagination",{staticClass:"content-pagination",attrs:{"current-page":e.queryForm.current,"page-sizes":e.pageConfig.pageSizes,"page-size":e.queryForm.size,layout:e.pageConfig.layout,total:e.pageConfig.total},on:{"size-change":e.sizeChange,"current-change":e.currentChange}}):e._e(),e.showDetailVisible?a("showDetailList",{ref:"showDetailList",attrs:{visible:e.showDetailVisible,detailData:e.detailData,isQuery:e.isQuery},on:{"update:visible":function(t){e.showDetailVisible=t},changePageData:e.changePageData,exportExcel:e.exportExcel}}):e._e()],1)},i=[function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"lable-header"},[a("span",{staticClass:"name"},[e._v("标签名称")]),a("span",{staticClass:"text"},[e._v("标签说明")]),a("span",{staticClass:"value"},[e._v("覆盖客户数")])])}],r=(a("8e6e"),a("ade3")),l=(a("7f7f"),a("ac6a"),a("456d"),a("db03"));function o(e,t){var a=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),a.push.apply(a,n)}return a}function s(e){for(var t=1;t<arguments.length;t++){var a=null!=arguments[t]?arguments[t]:{};t%2?o(Object(a),!0).forEach((function(t){Object(r["a"])(e,t,a[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(a)):o(Object(a)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(a,t))}))}return e}var c={components:{showDetailList:l["a"]},props:{labelData:{type:Array,default:function(){return[]}},showDetailData:{type:Object,default:function(){return{}}},isQuery:{type:Boolean,default:function(){return!1}},isPage:{type:Boolean,default:function(){return!0}},pageConfig:{type:Object,default:function(){return{name:"",current:1,size:10,pageSizes:[10,20,30,40],layout:"prev, pager, next, sizes,jumper,total",total:0}}}},name:"show-detail-list",data:function(){return{tableHeight:0,queryForm:{tagId:"",name:"",current:1,size:10},labelDealData:[],showDetailVisible:!1,detailData:{},rowData:{},detailQueryForm:{current:1,size:10},detailPageConfig:{name:"detail",current:1,size:10,pageSizes:[10,20,30,40,50],layout:"prev, pager, next, sizes,jumper,total",total:0}}},mounted:function(){this.init()},watch:{labelData:function(){this.dataDeal(this.labelData)},showDetailData:function(){console.log(this.showDetailData,"showDetailData"),0!==Object.keys(this.showDetailData).length&&this.showDetailDeal()}},methods:{changeLoading:function(){this.$refs.showDetailList.themeLoading=!1},init:function(){this.tableHeight=document.getElementsByClassName("lable-table")[0].clientHeight-30-(this.isPage?52:0),this.queryForm.name=this.pageConfig.name,this.queryForm.size=this.pageConfig.size,this.queryForm.current=this.pageConfig.current,this.dataDeal(this.labelData)},sizeChange:function(e){this.queryForm.size=e,this.$emit("changePage",this.queryForm)},currentChange:function(e){this.queryForm.current=e,this.$emit("changePage",this.queryForm)},exportExcel:function(e){this.$emit("exportExcel",s(s({},e),{},{tagId:this.queryForm.tagId}))},showDetail:function(e){this.queryForm.tagId=e.tagId,this.$emit("clickDetail",e)},changePageData:function(e){this.rowData=e,this.$emit("changeDetailPage",s(s({},e),this.rowData))},showDetailDeal:function(){var e=s({},this.showDetailData);console.log(e,"rowData"),this.detailData=e,this.showDetailVisible=!0},dataDeal:function(e){var t=this;if(this.labelDealData=[],0!==Object.keys(e).length){var a=["#3890FF","#21CCA8","#E69617","#1ABDEF","#546EDD","#1FB7C8","#8663D5"],n=["#ebf3ff","#e8f9f6","#fcf4e7","#e8f8fd","#edf0fb","#e8f7f9","#f2effa"];e.forEach((function(e,t){t<a.length?(e.color=a[t],e.backgroundColor=n[t]):(e.color=a[t-a.length*Math.floor(t/a.length)],e.backgroundColor=n[t-a.length*Math.floor(t/a.length)])})),this.$nextTick((function(){t.labelDealData=e}))}}}},u=c,b=(a("cb3b"),a("2877")),g=Object(b["a"])(u,n,i,!1,null,"1b473ea9",null);t["a"]=g.exports},cb3b:function(e,t,a){"use strict";var n=a("e62f"),i=a.n(n);i.a},d70d:function(e,t,a){"use strict";var n=a("39fb"),i=a.n(n);i.a},e62f:function(e,t,a){}}]);
//# sourceMappingURL=chunk-05bdbf4c.92e6e626.js.map