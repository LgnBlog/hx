(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-471b3a43"],{"0016":function(e,t,a){},7100:function(e,t,a){},"763b":function(e,t,a){"use strict";var i=a("7100"),r=a.n(i);r.a},b604:function(e,t,a){"use strict";a.r(t);var i=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"taskManagement"},[a("div",{staticClass:"right"},[a("div",{staticClass:"right-button"},[a("el-button",{attrs:{type:"primary"},on:{click:e.createTask}},[e._v("新增推荐生成任务")])],1),a("div",{staticClass:"right-content"},[a("bdaTable",{staticClass:"content-table",attrs:{tableData:e.taskData,headerColor:e.taskHeaderColor,indexWidth:0,isPage:!0,pageConfig:e.pageConfig},on:{operate:e.taskOperate,changePage:e.changePage}})],1),a("el-dialog",{staticClass:"addNew-dialog",attrs:{title:e.addNewDialogTitle,visible:e.addNewDialogVisible,width:"70%","before-close":e.addNewDialogClose,"close-on-click-modal":!1,"close-on-press-escape":!1},on:{"update:visible":function(t){e.addNewDialogVisible=t}}},[a("span",{staticClass:"dialog-header",attrs:{slot:"title"},slot:"title"},[a("span",{staticClass:"header-text"},[e._v(e._s("新增"))])]),a("div",{staticClass:"dialog-content"},[a("el-form",{attrs:{"label-width":"120px"},model:{value:e.addNewForm,callback:function(t){e.addNewForm=t},expression:"addNewForm"}},[a("el-row",[a("el-col",{attrs:{span:8}},[a("el-form-item",{attrs:{label:"目录编码："}},[a("el-input",{staticClass:"input",attrs:{size:"mini"},model:{value:e.addNewForm.directoryCode,callback:function(t){e.$set(e.addNewForm,"directoryCode",t)},expression:"addNewForm.directoryCode"}})],1)],1),a("el-col",{attrs:{span:8}},[a("el-form-item",{attrs:{label:"目录级数："}},[a("el-input",{staticClass:"input",attrs:{size:"mini"},model:{value:e.addNewForm.directoryLevel,callback:function(t){e.$set(e.addNewForm,"directoryLevel",t)},expression:"addNewForm.directoryLevel"}})],1)],1),a("el-col",{attrs:{span:8}},[a("el-form-item",{attrs:{label:"目录排序号："}},[a("el-input",{staticClass:"input",attrs:{size:"mini"},model:{value:e.addNewForm.directorySort,callback:function(t){e.$set(e.addNewForm,"directorySort",t)},expression:"addNewForm.directorySort"}})],1)],1)],1),a("el-row",[a("el-col",{attrs:{span:24}},[a("el-form-item",{attrs:{label:"标签目录名称："}},[a("el-input",{staticClass:"input-row",attrs:{size:"mini"},model:{value:e.addNewForm.labelDirectoryName,callback:function(t){e.$set(e.addNewForm,"labelDirectoryName",t)},expression:"addNewForm.labelDirectoryName"}})],1)],1)],1),a("el-row",[a("el-col",{attrs:{span:24}},[a("el-form-item",{attrs:{label:"目录描述："}},[a("el-input",{staticClass:"input-row",attrs:{type:"textarea",rows:4,placeholder:"请输入内容"},model:{value:e.addNewForm.directoryDescription,callback:function(t){e.$set(e.addNewForm,"directoryDescription",t)},expression:"addNewForm.directoryDescription"}})],1)],1)],1)],1)],1),a("span",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[a("el-button",{attrs:{type:"primary"},on:{click:e.addNewSubmit}},[e._v("提交")])],1)]),e.createTaskDialogVisible?a("operateDialog",{attrs:{visible:e.createTaskDialogVisible,showData:e.createTaskDialogData,type:e.createTaskDialogType},on:{"update:visible":function(t){e.createTaskDialogVisible=t},operateStauts:e.operateStauts}}):e._e()],1)])},r=[],o=(a("8e6e"),a("456d"),a("7f7f"),a("2909")),l=(a("ac6a"),a("ade3")),s=a("c286"),n=a("f9fe"),c=a("3479");function d(e,t){var a=Object.keys(e);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);t&&(i=i.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),a.push.apply(a,i)}return a}function u(e){for(var t=1;t<arguments.length;t++){var a=null!=arguments[t]?arguments[t]:{};t%2?d(Object(a),!0).forEach((function(t){Object(l["a"])(e,t,a[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(a)):d(Object(a)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(a,t))}))}return e}var p={components:{bdaTable:n["a"],operateDialog:c["default"]},name:"taskManagement",mixins:[s["a"]],watch:{filterText:function(e){this.$refs.tree.filter(e)}},props:{menuType:{type:String,default:""}},data:function(){return{filterText:"",treeData:[],defaultProps:{children:"children",label:"label"},addNewDialogVisible:!1,addNewDialogTitle:"",addNewDialogStatus:"",addNewForm:{directoryCode:"",directoryLevel:"",directorySort:"",labelDirectoryName:"",directoryDescription:""},taskData:{},taskHeaderColor:"",queryForm:{current:1,size:10},pageConfig:{current:1,size:10,pageSizes:[10,20,30,40],layout:"prev, pager, next, sizes,jumper,total",total:0},createTaskDialogVisible:!1,createTaskDialogData:{},createTaskDialogType:"add",updateCycleOptions:[{name:"指定日期",value:"0"},{name:"日更新",value:"1"},{name:"周更新",value:"2"},{name:"月更新",value:"3"},{name:"年更新",value:"4"}]}},mounted:function(){this.getTreeData(),this.getTaskData()},methods:{nodeClick:function(e,t){console.log(e,t,"obj, node")},addNewDirectory:function(){this.addNewDialogTitle="新增目录",this.addNewDialogStatus="add",this.addNewDialogVisible=!0},editNewDirectory:function(e){e.currentTarget===e.target&&(this.addNewDialogTitle="编辑目录",this.addNewDialogStatus="edit",this.addNewDialogVisible=!0)},delNewDirectory:function(){},addNewSubmit:function(){},addNewDialogClose:function(){this.addNewDialogVisible=!1},operateStauts:function(){this.getTaskData()},changePage:function(e){this.queryForm.size=e.size,this.queryForm.current=e.current,this.getTaskData()},createTask:function(){this.createTaskDialogVisible=!0,this.createTaskDialogType="add"},taskOperate:function(e,t){console.log(e,t),this.createTaskDialogType=e,"edit"===e&&this.getTaskDetail(t),"detail"===e&&this.getTaskDetail(t),"delete"===e&&this.deleteTaskList(t)},deleteTaskList:function(e){var t=this;this.$confirm("是否删除该条数据?","提示",{confirmButtonText:"确定",cancelButtonText:"取消",closeOnClickModal:!1,closeOnPressEscape:!1,confirmButtonClass:"btnFalses",type:"warning"}).then((function(){t.deleteRecommendGenerateTask({relationNumber:e.relationNumber,tagId:e.tagId}).then((function(e){t.$message.success(e),t.queryForm.current=1,t.queryForm.size=10,t.getTaskData()}))})).catch((function(){}))},filterNode:function(e,t){return console.log(e,t,"value, data"),!e||-1!==t.label.indexOf(e)},getTreeData:function(){this.selectDirectoryNavigation({}).then((function(e){console.log(e,"selectDirectoryNavigation")})),this.treeData=[{id:1,label:"一级 1",icon:"el-icon-folder-opened",children:[{id:4,label:"二级 1-1",children:[{id:9,label:"三级 1-1-1"},{id:10,label:"三级 1-1-2"}]}]},{id:2,label:"一级 2",icon:"el-icon-folder-opened",children:[{id:5,label:"二级 2-1"},{id:6,label:"二级 2-2"}]},{id:3,label:"一级 3",icon:"el-icon-folder-opened",children:[{id:7,label:"二级 3-1"},{id:8,label:"二级 3-2"}]}]},getTaskData:function(){var e=this;this.taskHeaderColor="#1899fa";var t=[{prop:"relationNumber",label:"关系编号",width:120},{prop:"relationName",label:"关联关系名称"},{prop:"descibe",label:"关联关系描述"},{prop:"updateCycleName",label:"更新周期"},{prop:"createTime",label:"创建时间"},{prop:"updateTime",label:"更新时间"},{prop:"exeTime",label:"执行时间"},{prop:"Operate",label:"操作",align:"center",type:[{name:"编辑",action:"edit"},{name:"详情",action:"detail"},{name:"删除",action:"delete"}]}];this.selectRecommendGenerateTaskList(u(u({},this.queryForm),{},{menuType:this.menuType})).then((function(a){e.pageConfig.total=a.total,e.pageConfig.size=e.queryForm.size,e.pageConfig.current=e.queryForm.current,a.records.forEach((function(t){return t.updateCycleName=e.translate(t.updateCycle,e.updateCycleOptions)})),e.taskData={tableData:Object(o["a"])(a.records),columnNameData:t}})).catch((function(a){a&&(e.taskData={tableData:[],columnNameData:t})}))},getTaskDetail:function(e){var t=this;this.selectRecommendGenerateTaskDetail({relationNumber:e.relationNumber,targetId:e.targetId,recId:e.recId,tagId:e.tagId}).then((function(e){t.createTaskDialogData=e,t.createTaskDialogVisible=!0}))},translate:function(e,t){var a="";return t.forEach((function(t){t.value===e&&(a=t.name)})),a}}},m=p,b=(a("ced0"),a("763b"),a("2877")),g=Object(b["a"])(m,i,r,!1,null,"3a9b97da",null);t["default"]=g.exports},ced0:function(e,t,a){"use strict";var i=a("0016"),r=a.n(i);r.a}}]);
//# sourceMappingURL=chunk-471b3a43.892ef25f.js.map